/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e={713:e=>{e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},109:(e,t,n)=>{var o=n(713);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}},0:e=>{var t={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(e){this.toString=function(){return"CORRUPT: "+this.message},this.message=e},invalid:function(e){this.toString=function(){return"INVALID: "+this.message},this.message=e},bug:function(e){this.toString=function(){return"BUG: "+this.message},this.message=e},notReady:function(e){this.toString=function(){return"NOT READY: "+this.message},this.message=e}}};e.exports&&(e.exports=t),"function"===typeof window.define&&window.define([],function(){return t}),t.cipher.aes=function(e){this._tables[0][0][0]||this._precompute();var n,o,r,s,i,a=this._tables[0][4],c=this._tables[1],u=e.length,l=1;if(4!==u&&6!==u&&8!==u)throw new t.exception.invalid("invalid aes key size");for(this._key=[s=e.slice(0),i=[]],n=u;n<4*u+28;n++)r=s[n-1],(n%u===0||8===u&&n%u===4)&&(r=a[r>>>24]<<24^a[r>>16&255]<<16^a[r>>8&255]<<8^a[255&r],n%u===0&&(r=r<<8^r>>>24^l<<24,l=l<<1^283*(l>>7))),s[n]=s[n-u]^r;for(o=0;n;o++,n--)r=s[3&o?n:n-4],i[o]=n<=4||o<4?r:c[0][a[r>>>24]]^c[1][a[r>>16&255]]^c[2][a[r>>8&255]]^c[3][a[255&r]]},t.cipher.aes.prototype={encrypt:function(e){return this._crypt(e,0)},decrypt:function(e){return this._crypt(e,1)},_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var e,t,n,o,r,s,i,a,c=this._tables[0],u=this._tables[1],l=c[4],d=u[4],p=[],f=[];for(e=0;e<256;e++)f[(p[e]=e<<1^283*(e>>7))^e]=e;for(t=n=0;!l[t];t^=o||1,n=f[n]||1)for(s=(s=n^n<<1^n<<2^n<<3^n<<4)>>8^255&s^99,l[t]=s,d[s]=t,a=16843009*p[r=p[o=p[t]]]^65537*r^257*o^16843008*t,i=257*p[s]^16843008*s,e=0;e<4;e++)c[e][t]=i=i<<24^i>>>8,u[e][s]=a=a<<24^a>>>8;for(e=0;e<5;e++)c[e]=c[e].slice(0),u[e]=u[e].slice(0)},_crypt:function(e,n){if(4!==e.length)throw new t.exception.invalid("invalid aes block size");var o,r,s,i,a=this._key[n],c=e[0]^a[0],u=e[n?3:1]^a[1],l=e[2]^a[2],d=e[n?1:3]^a[3],p=a.length/4-2,f=4,_=[0,0,0,0],h=this._tables[n],E=h[0],g=h[1],m=h[2],y=h[3],I=h[4];for(i=0;i<p;i++)o=E[c>>>24]^g[u>>16&255]^m[l>>8&255]^y[255&d]^a[f],r=E[u>>>24]^g[l>>16&255]^m[d>>8&255]^y[255&c]^a[f+1],s=E[l>>>24]^g[d>>16&255]^m[c>>8&255]^y[255&u]^a[f+2],d=E[d>>>24]^g[c>>16&255]^m[u>>8&255]^y[255&l]^a[f+3],f+=4,c=o,u=r,l=s;for(i=0;i<4;i++)_[n?3&-i:i]=I[c>>>24]<<24^I[u>>16&255]<<16^I[l>>8&255]<<8^I[255&d]^a[f++],o=c,c=u,u=l,l=d,d=o;return _}},t.bitArray={bitSlice:function(e,n,o){return e=t.bitArray._shiftRight(e.slice(n/32),32-(31&n)).slice(1),void 0===o?e:t.bitArray.clamp(e,o-n)},extract:function(e,t,n){var o=Math.floor(-t-n&31);return(-32&(t+n-1^t)?e[t/32|0]<<32-o^e[t/32+1|0]>>>o:e[t/32|0]>>>o)&(1<<n)-1},concat:function(e,n){if(0===e.length||0===n.length)return e.concat(n);var o=e[e.length-1],r=t.bitArray.getPartial(o);return 32===r?e.concat(n):t.bitArray._shiftRight(n,r,0|o,e.slice(0,e.length-1))},bitLength:function(e){var n,o=e.length;return 0===o?0:(n=e[o-1],32*(o-1)+t.bitArray.getPartial(n))},clamp:function(e,n){if(32*e.length<n)return e;var o=(e=e.slice(0,Math.ceil(n/32))).length;return n&=31,o>0&&n&&(e[o-1]=t.bitArray.partial(n,e[o-1]&2147483648>>n-1,1)),e},partial:function(e,t,n){return 32===e?t:(n?0|t:t<<32-e)+1099511627776*e},getPartial:function(e){return Math.round(e/1099511627776)||32},equal:function(e,n){if(t.bitArray.bitLength(e)!==t.bitArray.bitLength(n))return!1;var o,r=0;for(o=0;o<e.length;o++)r|=e[o]^n[o];return 0===r},_shiftRight:function(e,n,o,r){var s,i,a;for(void 0===r&&(r=[]);n>=32;n-=32)r.push(o),o=0;if(0===n)return r.concat(e);for(s=0;s<e.length;s++)r.push(o|e[s]>>>n),o=e[s]<<32-n;return i=e.length?e[e.length-1]:0,a=t.bitArray.getPartial(i),r.push(t.bitArray.partial(n+a&31,n+a>32?o:r.pop(),1)),r},_xor4:function(e,t){return[e[0]^t[0],e[1]^t[1],e[2]^t[2],e[3]^t[3]]},byteswapM:function(e){var t,n;for(t=0;t<e.length;++t)n=e[t],e[t]=n>>>24|n>>>8&65280|(65280&n)<<8|n<<24;return e}},t.codec.utf8String={fromBits:function(e){var n,o,r="",s=t.bitArray.bitLength(e);for(n=0;n<s/8;n++)0===(3&n)&&(o=e[n/4]),r+=String.fromCharCode(o>>>24),o<<=8;return decodeURIComponent(escape(r))},toBits:function(e){e=unescape(encodeURIComponent(e));var n,o=[],r=0;for(n=0;n<e.length;n++)r=r<<8|e.charCodeAt(n),3===(3&n)&&(o.push(r),r=0);return 3&n&&o.push(t.bitArray.partial(8*(3&n),r)),o}},t.codec.hex={fromBits:function(e){var n,o="";for(n=0;n<e.length;n++)o+=(0xf00000000000+(0|e[n])).toString(16).substr(4);return o.substr(0,t.bitArray.bitLength(e)/4)},toBits:function(e){var n,o,r=[];for(o=(e=e.replace(/\s|0x/g,"")).length,e+="00000000",n=0;n<e.length;n+=8)r.push(0^parseInt(e.substr(n,8),16));return t.bitArray.clamp(r,4*o)}},t.codec.base64={_chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(e,n,o){var r,s="",i=0,a=t.codec.base64._chars,c=0,u=t.bitArray.bitLength(e);for(o&&(a=a.substr(0,62)+"-_"),r=0;6*s.length<u;)s+=a.charAt((c^e[r]>>>i)>>>26),i<6?(c=e[r]<<6-i,i+=26,r++):(c<<=6,i-=6);for(;3&s.length&&!n;)s+="=";return s},toBits:function(e,n){e=e.replace(/\s|=/g,"");var o,r,s=[],i=0,a=t.codec.base64._chars,c=0;for(n&&(a=a.substr(0,62)+"-_"),o=0;o<e.length;o++){if((r=a.indexOf(e.charAt(o)))<0)throw new t.exception.invalid("this isn't base64!");i>26?(i-=26,s.push(c^r>>>i),c=r<<32-i):c^=r<<32-(i+=6)}return 56&i&&s.push(t.bitArray.partial(56&i,c,1)),s}},t.codec.base64url={fromBits:function(e){return t.codec.base64.fromBits(e,1,1)},toBits:function(e){return t.codec.base64.toBits(e,1)}},t.hash.sha256=function(e){this._key[0]||this._precompute(),e?(this._h=e._h.slice(0),this._buffer=e._buffer.slice(0),this._length=e._length):this.reset()},t.hash.sha256.hash=function(e){return(new t.hash.sha256).update(e).finalize()},t.hash.sha256.prototype={blockSize:512,reset:function(){return this._h=this._init.slice(0),this._buffer=[],this._length=0,this},update:function(e){"string"===typeof e&&(e=t.codec.utf8String.toBits(e));var n,o=this._buffer=t.bitArray.concat(this._buffer,e),r=this._length,s=this._length=r+t.bitArray.bitLength(e);for(n=512+r&-512;n<=s;n+=512)this._block(o.splice(0,16));return this},finalize:function(){var e,n=this._buffer,o=this._h;for(e=(n=t.bitArray.concat(n,[t.bitArray.partial(1,1)])).length+2;15&e;e++)n.push(0);for(n.push(Math.floor(this._length/4294967296)),n.push(0|this._length);n.length;)this._block(n.splice(0,16));return this.reset(),o},_init:[],_key:[],_precompute:function(){var e,t=0,n=2;function o(e){return 4294967296*(e-Math.floor(e))|0}e:for(;t<64;n++){for(e=2;e*e<=n;e++)if(n%e===0)continue e;t<8&&(this._init[t]=o(Math.pow(n,.5))),this._key[t]=o(Math.pow(n,1/3)),t++}},_block:function(e){var t,n,o,r,s=e.slice(0),i=this._h,a=this._key,c=i[0],u=i[1],l=i[2],d=i[3],p=i[4],f=i[5],_=i[6],h=i[7];for(t=0;t<64;t++)t<16?n=s[t]:(o=s[t+1&15],r=s[t+14&15],n=s[15&t]=(o>>>7^o>>>18^o>>>3^o<<25^o<<14)+(r>>>17^r>>>19^r>>>10^r<<15^r<<13)+s[15&t]+s[t+9&15]|0),n=n+h+(p>>>6^p>>>11^p>>>25^p<<26^p<<21^p<<7)+(_^p&(f^_))+a[t],h=_,_=f,f=p,p=d+n|0,d=l,l=u,c=n+((u=c)&l^d&(u^l))+(u>>>2^u>>>13^u>>>22^u<<30^u<<19^u<<10)|0;i[0]=i[0]+c|0,i[1]=i[1]+u|0,i[2]=i[2]+l|0,i[3]=i[3]+d|0,i[4]=i[4]+p|0,i[5]=i[5]+f|0,i[6]=i[6]+_|0,i[7]=i[7]+h|0}},t.mode.ccm={name:"ccm",encrypt:function(e,n,o,r,s){var i,a,c=n.slice(0),u=t.bitArray,l=u.bitLength(o)/8,d=u.bitLength(c)/8;if(s=s||64,r=r||[],l<7)throw new t.exception.invalid("ccm: iv must be at least 7 bytes");for(i=2;i<4&&d>>>8*i;i++);return i<15-l&&(i=15-l),o=u.clamp(o,8*(15-i)),a=t.mode.ccm._computeTag(e,n,o,r,s,i),c=t.mode.ccm._ctrMode(e,c,o,a,s,i),u.concat(c.data,c.tag)},decrypt:function(e,n,o,r,s){s=s||64,r=r||[];var i,a,c=t.bitArray,u=c.bitLength(o)/8,l=c.bitLength(n),d=c.clamp(n,l-s),p=c.bitSlice(n,l-s);if(l=(l-s)/8,u<7)throw new t.exception.invalid("ccm: iv must be at least 7 bytes");for(i=2;i<4&&l>>>8*i;i++);if(i<15-u&&(i=15-u),o=c.clamp(o,8*(15-i)),d=t.mode.ccm._ctrMode(e,d,o,p,s,i),a=t.mode.ccm._computeTag(e,d.data,o,r,s,i),!c.equal(d.tag,a))throw new t.exception.corrupt("ccm: tag doesn't match");return d.data},_computeTag:function(e,n,o,r,s,i){var a,c,u,l=[],d=t.bitArray,p=d._xor4;if((s/=8)%2||s<4||s>16)throw new t.exception.invalid("ccm: invalid tag length");if(r.length>4294967295||n.length>4294967295)throw new t.exception.bug("ccm: can't deal with 4GiB or more data");if(a=[d.partial(8,(r.length?64:0)|s-2<<2|i-1)],(a=d.concat(a,o))[3]|=d.bitLength(n)/8,a=e.encrypt(a),r.length)for((c=d.bitLength(r)/8)<=65279?l=[d.partial(16,c)]:c<=4294967295&&(l=d.concat([d.partial(16,65534)],[c])),l=d.concat(l,r),u=0;u<l.length;u+=4)a=e.encrypt(p(a,l.slice(u,u+4).concat([0,0,0])));for(u=0;u<n.length;u+=4)a=e.encrypt(p(a,n.slice(u,u+4).concat([0,0,0])));return d.clamp(a,8*s)},_ctrMode:function(e,n,o,r,s,i){var a,c,u,l=t.bitArray,d=l._xor4,p=n.length,f=l.bitLength(n);if(u=l.concat([l.partial(8,i-1)],o).concat([0,0,0]).slice(0,4),r=l.bitSlice(d(r,e.encrypt(u)),0,s),!p)return{tag:r,data:[]};for(c=0;c<p;c+=4)u[3]++,a=e.encrypt(u),n[c]^=a[0],n[c+1]^=a[1],n[c+2]^=a[2],n[c+3]^=a[3];return{tag:r,data:l.clamp(n,f)}}},t.mode.ocb2={name:"ocb2",encrypt:function(e,n,o,r,s,i){if(128!==t.bitArray.bitLength(o))throw new t.exception.invalid("ocb iv must be 128 bits");var a,c,u,l,d=t.mode.ocb2._times2,p=t.bitArray,f=p._xor4,_=[0,0,0,0],h=d(e.encrypt(o)),E=[];for(r=r||[],s=s||64,a=0;a+4<n.length;a+=4)_=f(_,c=n.slice(a,a+4)),E=E.concat(f(h,e.encrypt(f(h,c)))),h=d(h);return c=n.slice(a),u=p.bitLength(c),l=e.encrypt(f(h,[0,0,0,u])),c=p.clamp(f(c.concat([0,0,0]),l),u),_=f(_,f(c.concat([0,0,0]),l)),_=e.encrypt(f(_,f(h,d(h)))),r.length&&(_=f(_,i?r:t.mode.ocb2.pmac(e,r))),E.concat(p.concat(c,p.clamp(_,s)))},decrypt:function(e,n,o,r,s,i){if(128!==t.bitArray.bitLength(o))throw new t.exception.invalid("ocb iv must be 128 bits");s=s||64;var a,c,u,l,d=t.mode.ocb2._times2,p=t.bitArray,f=p._xor4,_=[0,0,0,0],h=d(e.encrypt(o)),E=t.bitArray.bitLength(n)-s,g=[];for(r=r||[],a=0;a+4<E/32;a+=4)c=f(h,e.decrypt(f(h,n.slice(a,a+4)))),_=f(_,c),g=g.concat(c),h=d(h);if(u=E-32*a,l=e.encrypt(f(h,[0,0,0,u])),c=f(l,p.clamp(n.slice(a),u).concat([0,0,0])),_=f(_,c),_=e.encrypt(f(_,f(h,d(h)))),r.length&&(_=f(_,i?r:t.mode.ocb2.pmac(e,r))),!p.equal(p.clamp(_,s),p.bitSlice(n,E)))throw new t.exception.corrupt("ocb: tag doesn't match");return g.concat(p.clamp(c,u))},pmac:function(e,n){var o,r,s=t.mode.ocb2._times2,i=t.bitArray,a=i._xor4,c=[0,0,0,0],u=e.encrypt([0,0,0,0]);for(u=a(u,s(s(u))),o=0;o+4<n.length;o+=4)u=s(u),c=a(c,e.encrypt(a(u,n.slice(o,o+4))));return r=n.slice(o),i.bitLength(r)<128&&(u=a(u,s(u)),r=i.concat(r,[-2147483648,0,0,0])),c=a(c,r),e.encrypt(a(s(a(u,s(u))),c))},_times2:function(e){return[e[0]<<1^e[1]>>>31,e[1]<<1^e[2]>>>31,e[2]<<1^e[3]>>>31,e[3]<<1^135*(e[0]>>>31)]}},t.mode.gcm={name:"gcm",encrypt:function(e,n,o,r,s){var i,a=n.slice(0),c=t.bitArray;return s=s||128,r=r||[],i=t.mode.gcm._ctrMode(!0,e,a,r,o,s),c.concat(i.data,i.tag)},decrypt:function(e,n,o,r,s){var i,a,c=n.slice(0),u=t.bitArray,l=u.bitLength(c);if(r=r||[],(s=s||128)<=l?(a=u.bitSlice(c,l-s),c=u.bitSlice(c,0,l-s)):(a=c,c=[]),i=t.mode.gcm._ctrMode(!1,e,c,r,o,s),!u.equal(i.tag,a))throw new t.exception.corrupt("gcm: tag doesn't match");return i.data},_galoisMultiply:function(e,n){var o,r,s,i,a,c=t.bitArray._xor4;for(s=[0,0,0,0],i=n.slice(0),o=0;o<128;o++){for(0!==(e[Math.floor(o/32)]&1<<31-o%32)&&(s=c(s,i)),a=0!==(1&i[3]),r=3;r>0;r--)i[r]=i[r]>>>1|(1&i[r-1])<<31;i[0]=i[0]>>>1,a&&(i[0]=i[0]^225<<24)}return s},_ghash:function(e,n,o){var r,s,i=o.length;for(r=n.slice(0),s=0;s<i;s+=4)r[0]^=4294967295&o[s],r[1]^=4294967295&o[s+1],r[2]^=4294967295&o[s+2],r[3]^=4294967295&o[s+3],r=t.mode.gcm._galoisMultiply(r,e);return r},_ctrMode:function(e,n,o,r,s,i){var a,c,u,l,d,p,f,_,h,E,g,m,y=t.bitArray;for(h=o.length,E=y.bitLength(o),g=y.bitLength(r),m=y.bitLength(s),a=n.encrypt([0,0,0,0]),96===m?(c=s.slice(0),c=y.concat(c,[1])):(c=t.mode.gcm._ghash(a,[0,0,0,0],s),c=t.mode.gcm._ghash(a,c,[0,0,Math.floor(m/4294967296),4294967295&m])),u=t.mode.gcm._ghash(a,[0,0,0,0],r),p=c.slice(0),f=u.slice(0),e||(f=t.mode.gcm._ghash(a,u,o)),d=0;d<h;d+=4)p[3]++,l=n.encrypt(p),o[d]^=l[0],o[d+1]^=l[1],o[d+2]^=l[2],o[d+3]^=l[3];return o=y.clamp(o,E),e&&(f=t.mode.gcm._ghash(a,u,o)),_=[Math.floor(g/4294967296),4294967295&g,Math.floor(E/4294967296),4294967295&E],f=t.mode.gcm._ghash(a,f,_),l=n.encrypt(c),f[0]^=l[0],f[1]^=l[1],f[2]^=l[2],f[3]^=l[3],{tag:y.bitSlice(f,0,i),data:o}}},t.misc.hmac=function(e,n){this._hash=n=n||t.hash.sha256;var o,r=[[],[]],s=n.prototype.blockSize/32;for(this._baseHash=[new n,new n],e.length>s&&(e=n.hash(e)),o=0;o<s;o++)r[0][o]=909522486^e[o],r[1][o]=1549556828^e[o];this._baseHash[0].update(r[0]),this._baseHash[1].update(r[1]),this._resultHash=new n(this._baseHash[0])},t.misc.hmac.prototype.encrypt=t.misc.hmac.prototype.mac=function(e){if(this._updated)throw new t.exception.invalid("encrypt on already updated hmac called!");return this.update(e),this.digest(e)},t.misc.hmac.prototype.reset=function(){this._resultHash=new this._hash(this._baseHash[0]),this._updated=!1},t.misc.hmac.prototype.update=function(e){this._updated=!0,this._resultHash.update(e)},t.misc.hmac.prototype.digest=function(){var e=this._resultHash.finalize(),t=new this._hash(this._baseHash[1]).update(e).finalize();return this.reset(),t},t.misc.pbkdf2=function(e,n,o,r,s){if(o=o||1e3,r<0||o<0)throw t.exception.invalid("invalid params to pbkdf2");"string"===typeof e&&(e=t.codec.utf8String.toBits(e)),"string"===typeof n&&(n=t.codec.utf8String.toBits(n));var i,a,c,u,l,d=new(s=s||t.misc.hmac)(e),p=[],f=t.bitArray;for(l=1;32*p.length<(r||1);l++){for(i=a=d.encrypt(f.concat(n,[l])),c=1;c<o;c++)for(a=d.encrypt(a),u=0;u<a.length;u++)i[u]^=a[u];p=p.concat(i)}return r&&(p=f.clamp(p,r)),p},t.prng=function(e){this._pools=[new t.hash.sha256],this._poolEntropy=[0],this._reseedCount=0,this._robins={},this._eventId=0,this._collectorIds={},this._collectorIdNext=0,this._strength=0,this._poolStrength=0,this._nextReseed=0,this._key=[0,0,0,0,0,0,0,0],this._counter=[0,0,0,0],this._cipher=void 0,this._defaultParanoia=e,this._collectorsStarted=!1,this._callbacks={progress:{},seeded:{}},this._callbackI=0,this._NOT_READY=0,this._READY=1,this._REQUIRES_RESEED=2,this._MAX_WORDS_PER_BURST=65536,this._PARANOIA_LEVELS=[0,48,64,96,128,192,256,384,512,768,1024],this._MILLISECONDS_PER_RESEED=3e4,this._BITS_PER_RESEED=80},t.prng.prototype={randomWords:function(e,n){var o,r,s=[],i=this.isReady(n);if(i===this._NOT_READY)throw new t.exception.notReady("generator isn't seeded");for(i&this._REQUIRES_RESEED&&this._reseedFromPools(!(i&this._READY)),o=0;o<e;o+=4)(o+1)%this._MAX_WORDS_PER_BURST===0&&this._gate(),r=this._gen4words(),s.push(r[0],r[1],r[2],r[3]);return this._gate(),s.slice(0,e)},setDefaultParanoia:function(e,t){if(0===e&&"Setting paranoia=0 will ruin your security; use it only for testing"!==t)throw"Setting paranoia=0 will ruin your security; use it only for testing";this._defaultParanoia=e},addEntropy:function(e,n,o){o=o||"user";var r,s,i,a,c=(new Date).valueOf(),u=this._robins[o],l=this.isReady(),d=0;switch(void 0===(r=this._collectorIds[o])&&(r=this._collectorIds[o]=this._collectorIdNext++),void 0===u&&(u=this._robins[o]=0),this._robins[o]=(this._robins[o]+1)%this._pools.length,typeof e){case"number":void 0===n&&(n=1),this._pools[u].update([r,this._eventId++,1,n,c,1,0|e]);break;case"object":if("[object Uint32Array]"===(a=Object.prototype.toString.call(e))){for(i=[],s=0;s<e.length;s++)i.push(e[s]);e=i}else for("[object Array]"!==a&&(d=1),s=0;s<e.length&&!d;s++)"number"!==typeof e[s]&&(d=1);if(!d){if(void 0===n)for(n=0,s=0;s<e.length;s++)for(i=e[s];i>0;)n++,i>>>=1;this._pools[u].update([r,this._eventId++,2,n,c,e.length].concat(e))}break;case"string":void 0===n&&(n=e.length),this._pools[u].update([r,this._eventId++,3,n,c,e.length]),this._pools[u].update(e);break;default:d=1}if(d)throw new t.exception.bug("random: addEntropy only supports number, array of numbers or string");this._poolEntropy[u]+=n,this._poolStrength+=n,l===this._NOT_READY&&(this.isReady()!==this._NOT_READY&&this._fireEvent("seeded",Math.max(this._strength,this._poolStrength)),this._fireEvent("progress",this.getProgress()))},isReady:function(e){var t=this._PARANOIA_LEVELS[void 0!==e?e:this._defaultParanoia];return this._strength&&this._strength>=t?this._poolEntropy[0]>this._BITS_PER_RESEED&&(new Date).valueOf()>this._nextReseed?this._REQUIRES_RESEED|this._READY:this._READY:this._poolStrength>=t?this._REQUIRES_RESEED|this._NOT_READY:this._NOT_READY},getProgress:function(e){var t=this._PARANOIA_LEVELS[e||this._defaultParanoia];return this._strength>=t||this._poolStrength>t?1:this._poolStrength/t},startCollectors:function(){if(!this._collectorsStarted){if(this._eventListener={loadTimeCollector:this._bind(this._loadTimeCollector),mouseCollector:this._bind(this._mouseCollector),keyboardCollector:this._bind(this._keyboardCollector),accelerometerCollector:this._bind(this._accelerometerCollector),touchCollector:this._bind(this._touchCollector)},window.addEventListener)window.addEventListener("load",this._eventListener.loadTimeCollector,!1),window.addEventListener("mousemove",this._eventListener.mouseCollector,!1),window.addEventListener("keypress",this._eventListener.keyboardCollector,!1),window.addEventListener("devicemotion",this._eventListener.accelerometerCollector,!1),window.addEventListener("touchmove",this._eventListener.touchCollector,!1);else{if(!document.attachEvent)throw new t.exception.bug("can't attach event");document.attachEvent("onload",this._eventListener.loadTimeCollector),document.attachEvent("onmousemove",this._eventListener.mouseCollector),document.attachEvent("keypress",this._eventListener.keyboardCollector)}this._collectorsStarted=!0}},stopCollectors:function(){this._collectorsStarted&&(window.removeEventListener?(window.removeEventListener("load",this._eventListener.loadTimeCollector,!1),window.removeEventListener("mousemove",this._eventListener.mouseCollector,!1),window.removeEventListener("keypress",this._eventListener.keyboardCollector,!1),window.removeEventListener("devicemotion",this._eventListener.accelerometerCollector,!1),window.removeEventListener("touchmove",this._eventListener.touchCollector,!1)):document.detachEvent&&(document.detachEvent("onload",this._eventListener.loadTimeCollector),document.detachEvent("onmousemove",this._eventListener.mouseCollector),document.detachEvent("keypress",this._eventListener.keyboardCollector)),this._collectorsStarted=!1)},addEventListener:function(e,t){this._callbacks[e][this._callbackI++]=t},removeEventListener:function(e,t){var n,o,r=this._callbacks[e],s=[];for(o in r)r.hasOwnProperty(o)&&r[o]===t&&s.push(o);for(n=0;n<s.length;n++)delete r[o=s[n]]},_bind:function(e){var t=this;return function(){e.apply(t,arguments)}},_gen4words:function(){for(var e=0;e<4&&(this._counter[e]=this._counter[e]+1|0,!this._counter[e]);e++);return this._cipher.encrypt(this._counter)},_gate:function(){this._key=this._gen4words().concat(this._gen4words()),this._cipher=new t.cipher.aes(this._key)},_reseed:function(e){this._key=t.hash.sha256.hash(this._key.concat(e)),this._cipher=new t.cipher.aes(this._key);for(var n=0;n<4&&(this._counter[n]=this._counter[n]+1|0,!this._counter[n]);n++);},_reseedFromPools:function(e){var n,o=[],r=0;for(this._nextReseed=o[0]=(new Date).valueOf()+this._MILLISECONDS_PER_RESEED,n=0;n<16;n++)o.push(4294967296*Math.random()|0);for(n=0;n<this._pools.length&&(o=o.concat(this._pools[n].finalize()),r+=this._poolEntropy[n],this._poolEntropy[n]=0,e||!(this._reseedCount&1<<n));n++);this._reseedCount>=1<<this._pools.length&&(this._pools.push(new t.hash.sha256),this._poolEntropy.push(0)),this._poolStrength-=r,r>this._strength&&(this._strength=r),this._reseedCount++,this._reseed(o)},_keyboardCollector:function(){this._addCurrentTimeToEntropy(1)},_mouseCollector:function(e){var n,o;try{n=e.x||e.clientX||e.offsetX||0,o=e.y||e.clientY||e.offsetY||0}catch(e){n=0,o=0}0!=n&&0!=o&&t.random.addEntropy([n,o],2,"mouse"),this._addCurrentTimeToEntropy(0)},_touchCollector:function(e){var n=e.touches[0]||e.changedTouches[0],o=n.pageX||n.clientX,r=n.pageY||n.clientY;t.random.addEntropy([o,r],1,"touch"),this._addCurrentTimeToEntropy(0)},_loadTimeCollector:function(){this._addCurrentTimeToEntropy(2)},_addCurrentTimeToEntropy:function(e){"undefined"!==typeof window&&window.performance&&"function"===typeof window.performance.now?t.random.addEntropy(window.performance.now(),e,"loadtime"):t.random.addEntropy((new Date).valueOf(),e,"loadtime")},_accelerometerCollector:function(e){var n=e.accelerationIncludingGravity.x||e.accelerationIncludingGravity.y||e.accelerationIncludingGravity.z;if(window.orientation){var o=window.orientation;"number"===typeof o&&t.random.addEntropy(o,1,"accelerometer")}n&&t.random.addEntropy(n,2,"accelerometer"),this._addCurrentTimeToEntropy(0)},_fireEvent:function(e,n){var o,r=t.random._callbacks[e],s=[];for(o in r)r.hasOwnProperty(o)&&s.push(r[o]);for(o=0;o<s.length;o++)s[o](n)}},t.random=new t.prng(6),function(){try{var n,o,r;if(e.exports&&(o=null)&&o.randomBytes)n=o.randomBytes(128),n=new Uint32Array(new Uint8Array(n).buffer),t.random.addEntropy(n,1024,"crypto.randomBytes");else if("undefined"!==typeof window&&"undefined"!==typeof Uint32Array){if(r=new Uint32Array(32),window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(r);else{if(!window.msCrypto||!window.msCrypto.getRandomValues)return;window.msCrypto.getRandomValues(r)}t.random.addEntropy(r,1024,"crypto.getRandomValues")}}catch(e){"undefined"!==typeof window&&window.console&&(console.log("There was an error collecting entropy from the browser:"),console.log(e))}}(),t.json={defaults:{v:1,iter:1e3,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},_encrypt:function(e,n,o,r){o=o||{},r=r||{};var s,i,a,c=t.json,u=c._add({iv:t.random.randomWords(4,0)},c.defaults);if(c._add(u,o),a=u.adata,"string"===typeof u.salt&&(u.salt=t.codec.base64.toBits(u.salt)),"string"===typeof u.iv&&(u.iv=t.codec.base64.toBits(u.iv)),!t.mode[u.mode]||!t.cipher[u.cipher]||"string"===typeof e&&u.iter<=100||64!==u.ts&&96!==u.ts&&128!==u.ts||128!==u.ks&&192!==u.ks&&256!==u.ks||u.iv.length<2||u.iv.length>4)throw new t.exception.invalid("json encrypt: invalid parameters");return"string"===typeof e?(e=(s=t.misc.cachedPbkdf2(e,u)).key.slice(0,u.ks/32),u.salt=s.salt):t.ecc&&e instanceof t.ecc.elGamal.publicKey&&(s=e.kem(),u.kemtag=s.tag,e=s.key.slice(0,u.ks/32)),"string"===typeof n&&(n=t.codec.utf8String.toBits(n)),"string"===typeof a&&(u.adata=a=t.codec.utf8String.toBits(a)),i=new t.cipher[u.cipher](e),c._add(r,u),r.key=e,u.ct=t.mode[u.mode].encrypt(i,n,u.iv,a,u.ts),u},encrypt:function(e,n,o,r){if(e&&n){var s=t.json,i=s._encrypt.apply(s,arguments);return s.encode(i)}},_decrypt:function(e,n,o,r){o=o||{},r=r||{};var s,i,a,c=t.json,u=c._add(c._add(c._add({},c.defaults),n),o,!0),l=u.adata;if("string"===typeof u.salt&&(u.salt=t.codec.base64.toBits(u.salt)),"string"===typeof u.iv&&(u.iv=t.codec.base64.toBits(u.iv)),!t.mode[u.mode]||!t.cipher[u.cipher]||"string"===typeof e&&u.iter<=100||64!==u.ts&&96!==u.ts&&128!==u.ts||128!==u.ks&&192!==u.ks&&256!==u.ks||!u.iv||u.iv.length<2||u.iv.length>4)throw new t.exception.invalid("json decrypt: invalid parameters");return"string"===typeof e?(e=(i=t.misc.cachedPbkdf2(e,u)).key.slice(0,u.ks/32),u.salt=i.salt):t.ecc&&e instanceof t.ecc.elGamal.secretKey&&(e=e.unkem(t.codec.base64.toBits(u.kemtag)).slice(0,u.ks/32)),"string"===typeof l&&(l=t.codec.utf8String.toBits(l)),a=new t.cipher[u.cipher](e),s=t.mode[u.mode].decrypt(a,u.ct,u.iv,l,u.ts),c._add(r,u),r.key=e,1===o.raw?s:t.codec.utf8String.fromBits(s)},decrypt:function(e,n,o,r){if(e&&n){var s=t.json;return s._decrypt(e,s.decode(n),o,r)}},encode:function(e){var n,o="{",r="";for(n in e)if(e.hasOwnProperty(n)){if(!n.match(/^[a-z0-9]+$/i))throw new t.exception.invalid("json encode: invalid property name");switch(o+=r+'"'+n+'":',r=",",typeof e[n]){case"number":case"boolean":o+=e[n];break;case"string":o+='"'+escape(e[n])+'"';break;case"object":o+='"'+t.codec.base64.fromBits(e[n],0)+'"';break;default:throw new t.exception.bug("json encode: unsupported type")}}return o+"}"},decode:function(e){if(!(e=e.replace(/\s/g,"")).match(/^\{.*\}$/))throw new t.exception.invalid("json decode: this isn't json!");var n,o,r=e.replace(/^\{|\}$/g,"").split(/,/),s={};for(n=0;n<r.length;n++){if(!(o=r[n].match(/^\s*(?:(["']?)([a-z][a-z0-9]*)\1)\s*:\s*(?:(-?\d+)|"([a-z0-9+\/%*_.@=\-]*)"|(true|false))$/i)))throw new t.exception.invalid("json decode: this isn't json!");o[3]?s[o[2]]=parseInt(o[3],10):o[4]?s[o[2]]=o[2].match(/^(ct|adata|salt|iv)$/)?t.codec.base64.toBits(o[4]):unescape(o[4]):o[5]&&(s[o[2]]="true"===o[5])}return s},_add:function(e,n,o){if(void 0===e&&(e={}),void 0===n)return e;var r;for(r in n)if(n.hasOwnProperty(r)){if(o&&void 0!==e[r]&&e[r]!==n[r])throw new t.exception.invalid("required parameter overridden");e[r]=n[r]}return e},_subtract:function(e,t){var n,o={};for(n in e)e.hasOwnProperty(n)&&e[n]!==t[n]&&(o[n]=e[n]);return o},_filter:function(e,t){var n,o={};for(n=0;n<t.length;n++)void 0!==e[t[n]]&&(o[t[n]]=e[t[n]]);return o}},t.encrypt=t.json.encrypt,t.decrypt=t.json.decrypt,t.misc._pbkdf2Cache={},t.misc.cachedPbkdf2=function(e,n){var o,r,s,i,a=t.misc._pbkdf2Cache;return i=(n=n||{}).iter||1e3,(o=(r=a[e]=a[e]||{})[i]=r[i]||{firstSalt:n.salt&&n.salt.length?n.salt.slice(0):t.random.randomWords(2,0)})[s=void 0===n.salt?o.firstSalt:n.salt]=o[s]||t.misc.pbkdf2(e,s,n.iter),{key:o[s].slice(0),salt:s.slice(0)}}},698:(e,t,n)=>{"use strict";n.d(t,{tV:()=>m,h$:()=>y,uP:()=>I,d9:()=>l,kn:()=>E,_A:()=>u,RH:()=>d,U2:()=>p,hK:()=>c,KT:()=>h,kH:()=>O,Cd:()=>T,m8:()=>R,t8:()=>g,Vj:()=>f});var o=n(742);function r(){}function s(){}function i(e,t){let n;t=t||1/0;const{length:o}=e;let r=null;const s=[];let i=0;for(;i<o;i++){if(n=e.charCodeAt(i),n>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(i+1===o){(t-=3)>-1&&s.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),r=n;continue}n=r-55296<<10|n-56320|65536,r=null}else r&&((t-=3)>-1&&s.push(239,191,189),r=null);if(n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<2097152))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function a(e){try{return decodeURIComponent(e)}catch(e){return String.fromCharCode(65533)}}function c(e){if("string"===typeof e)return e.replace(/_/g,"-").toLowerCase()}function u(e){return null===e||"object"!==typeof e?e:(Object.keys(e).forEach(t=>{null!==e[t]&&"object"===typeof e[t]&&(e[t]=u(e[t]))}),Object.isFrozen(e)?e:Object.freeze(e))}function l(e){let t;if(null===e||"object"!==typeof e)return e;if("[object Date]"===Object.prototype.toString.call(e))return new Date(e.getTime());try{t=new e.constructor}catch(e){return}return Object.keys(e).forEach(n=>{t[n]=l(e[n])}),t}function d(...e){const t={},n=e=>{for(const n in e)e.hasOwnProperty(n)&&("[object Object]"===Object.prototype.toString.call(e[n])?t[n]=d(t[n],e[n]):t[n]=e[n])};for(let t=0;t<e.length;t++)n(e[t]);return t}function p(e,t,n){const o=t.split(".").reduce((e,t)=>e&&void 0!==e[t]?e[t]:void 0,e);return o&&n?o[n]:o}function f(){return`${_()}${_()}-${_()}-${_("4")}-${_((Math.floor(10*Math.random())%4+8).toString(16))}-${_()}${_()}${_()}`}function _(e){let t=Math.floor(65535*Math.random()).toString(16);for(let e=4-t.length;e>0;e--)t=`0${t}`;return e=`${e}`.substring(0,4),!Number.isNaN(parseInt(e,16))&&e.length?e+t.substr(e.length):t}function h(e=""){const t=e.match(/[^.]+(?:\.com?(?:\.[a-z]{2})?|(?:\.[a-z]+))?$/i);if(t&&t.length)return t[0].replace(/:[0-9]+$/,"")}function E(e=""){if("string"!==typeof e)return 0;let t=-1;const n=function(){const e=new Array(256);for(let t=0;t<e.length;t++){let n=t;for(let e=0;e<8;e++)n=1&n?3988292384^n>>>1:n>>>1;e[t]=n>>>0}return e}();for(let o=0;o<e.length;o++)t=t>>>8^n[255&(t^e.charCodeAt(o))];return(-1^t)>>>0}function g(e,t,n){let o,r;for("string"===typeof t&&(t=t.split(".")),o=0,r=t.length-1;o<r;o++)"undefined"!==typeof e[t[o]]&&null!==e[t[o]]||(e[t[o]]={}),e=e[t[o]];return e[t[r]]=n,e}function m(e){const t=o.b$(e);return new s("utf-8").decode(t)}function y(e){const t=new r("utf-8").encode(e);return o.JQ(t)}function I(e){if(null!==e&&"object"===typeof e&&0!==Object.keys(e).length)return btoa(JSON.stringify(e))}function O(e){return("string"===typeof e||e instanceof String)&&/^([a-zA-Z\d]|-|_)+$/.test(e)}function T(e,t){return e.length<=t?e:`...${e.substring(e.length-t)}`}function R(e){return e.reduce((e,[t,n])=>(e[t]=n,e),{})}r.prototype.encode=function(e){return"undefined"===typeof Uint8Array?i(e):new Uint8Array(i(e))},s.prototype.decode=function(e){return function(e,t,n){let o="",r="";n=Math.min(e.length,n||1/0);for(let s=t=t||0;s<n;s++)e[s]<=127?(o+=a(r)+String.fromCharCode(e[s]),r=""):r+=`%${e[s].toString(16)}`;return o+a(r)}(e,0,e.length)}},742:(e,t)=>{"use strict";t.b$=function(e){var t,n,s=a(e),i=s[0],c=s[1],u=new r(function(e,t,n){return 3*(t+n)/4-n}(0,i,c)),l=0,d=c>0?i-4:i;for(n=0;n<d;n+=4)t=o[e.charCodeAt(n)]<<18|o[e.charCodeAt(n+1)]<<12|o[e.charCodeAt(n+2)]<<6|o[e.charCodeAt(n+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;2===c&&(t=o[e.charCodeAt(n)]<<2|o[e.charCodeAt(n+1)]>>4,u[l++]=255&t);1===c&&(t=o[e.charCodeAt(n)]<<10|o[e.charCodeAt(n+1)]<<4|o[e.charCodeAt(n+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t);return u},t.JQ=function(e){for(var t,o=e.length,r=o%3,s=[],i=16383,a=0,c=o-r;a<c;a+=i)s.push(u(e,a,a+i>c?c:a+i));1===r?(t=e[o-1],s.push(n[t>>2]+n[t<<4&63]+"==")):2===r&&(t=(e[o-2]<<8)+e[o-1],s.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return s.join("")};for(var n=[],o=[],r="undefined"!==typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0;i<64;++i)n[i]=s[i],o[s.charCodeAt(i)]=i;function a(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[63&e]}function u(e,t,n){for(var o,r=[],s=t;s<n;s+=3)o=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),r.push(c(o));return r.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},961:(e,t,n)=>{var o,r=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",o={};function r(e,t){if(!o[e]){o[e]={};for(var n=0;n<e.length;n++)o[e][e.charAt(n)]=n}return o[e][t]}var s={compressToBase64:function(e){if(null==e)return"";var n=s._compress(e,6,function(e){return t.charAt(e)});switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:s._decompress(e.length,32,function(n){return r(t,e.charAt(n))})},compressToUTF16:function(t){return null==t?"":s._compress(t,15,function(t){return e(t+32)})+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:s._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32})},compressToUint8Array:function(e){for(var t=s.compress(e),n=new Uint8Array(2*t.length),o=0,r=t.length;o<r;o++){var i=t.charCodeAt(o);n[2*o]=i>>>8,n[2*o+1]=i%256}return n},decompressFromUint8Array:function(t){if(null===t||void 0===t)return s.decompress(t);for(var n=new Array(t.length/2),o=0,r=n.length;o<r;o++)n[o]=256*t[2*o]+t[2*o+1];var i=[];return n.forEach(function(t){i.push(e(t))}),s.decompress(i.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":s._compress(e,6,function(e){return n.charAt(e)})},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),s._decompress(e.length,32,function(t){return r(n,e.charAt(t))}))},compress:function(t){return s._compress(t,16,function(t){return e(t)})},_compress:function(e,t,n){if(null==e)return"";var o,r,s,i={},a={},c="",u="",l="",d=2,p=3,f=2,_=[],h=0,E=0;for(s=0;s<e.length;s+=1)if(c=e.charAt(s),Object.prototype.hasOwnProperty.call(i,c)||(i[c]=p++,a[c]=!0),u=l+c,Object.prototype.hasOwnProperty.call(i,u))l=u;else{if(Object.prototype.hasOwnProperty.call(a,l)){if(l.charCodeAt(0)<256){for(o=0;o<f;o++)h<<=1,E==t-1?(E=0,_.push(n(h)),h=0):E++;for(r=l.charCodeAt(0),o=0;o<8;o++)h=h<<1|1&r,E==t-1?(E=0,_.push(n(h)),h=0):E++,r>>=1}else{for(r=1,o=0;o<f;o++)h=h<<1|r,E==t-1?(E=0,_.push(n(h)),h=0):E++,r=0;for(r=l.charCodeAt(0),o=0;o<16;o++)h=h<<1|1&r,E==t-1?(E=0,_.push(n(h)),h=0):E++,r>>=1}0==--d&&(d=Math.pow(2,f),f++),delete a[l]}else for(r=i[l],o=0;o<f;o++)h=h<<1|1&r,E==t-1?(E=0,_.push(n(h)),h=0):E++,r>>=1;0==--d&&(d=Math.pow(2,f),f++),i[u]=p++,l=String(c)}if(""!==l){if(Object.prototype.hasOwnProperty.call(a,l)){if(l.charCodeAt(0)<256){for(o=0;o<f;o++)h<<=1,E==t-1?(E=0,_.push(n(h)),h=0):E++;for(r=l.charCodeAt(0),o=0;o<8;o++)h=h<<1|1&r,E==t-1?(E=0,_.push(n(h)),h=0):E++,r>>=1}else{for(r=1,o=0;o<f;o++)h=h<<1|r,E==t-1?(E=0,_.push(n(h)),h=0):E++,r=0;for(r=l.charCodeAt(0),o=0;o<16;o++)h=h<<1|1&r,E==t-1?(E=0,_.push(n(h)),h=0):E++,r>>=1}0==--d&&(d=Math.pow(2,f),f++),delete a[l]}else for(r=i[l],o=0;o<f;o++)h=h<<1|1&r,E==t-1?(E=0,_.push(n(h)),h=0):E++,r>>=1;0==--d&&(d=Math.pow(2,f),f++)}for(r=2,o=0;o<f;o++)h=h<<1|1&r,E==t-1?(E=0,_.push(n(h)),h=0):E++,r>>=1;for(;;){if(h<<=1,E==t-1){_.push(n(h));break}E++}return _.join("")},decompress:function(e){return null==e?"":""==e?null:s._decompress(e.length,32768,function(t){return e.charCodeAt(t)})},_decompress:function(t,n,o){var r,s,i,a,c,u,l,d=[],p=4,f=4,_=3,h="",E=[],g={val:o(0),position:n,index:1};for(r=0;r<3;r+=1)d[r]=r;for(i=0,c=Math.pow(2,2),u=1;u!=c;)a=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=o(g.index++)),i|=(a>0?1:0)*u,u<<=1;switch(i){case 0:for(i=0,c=Math.pow(2,8),u=1;u!=c;)a=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=o(g.index++)),i|=(a>0?1:0)*u,u<<=1;l=e(i);break;case 1:for(i=0,c=Math.pow(2,16),u=1;u!=c;)a=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=o(g.index++)),i|=(a>0?1:0)*u,u<<=1;l=e(i);break;case 2:return""}for(d[3]=l,s=l,E.push(l);;){if(g.index>t)return"";for(i=0,c=Math.pow(2,_),u=1;u!=c;)a=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=o(g.index++)),i|=(a>0?1:0)*u,u<<=1;switch(l=i){case 0:for(i=0,c=Math.pow(2,8),u=1;u!=c;)a=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=o(g.index++)),i|=(a>0?1:0)*u,u<<=1;d[f++]=e(i),l=f-1,p--;break;case 1:for(i=0,c=Math.pow(2,16),u=1;u!=c;)a=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=o(g.index++)),i|=(a>0?1:0)*u,u<<=1;d[f++]=e(i),l=f-1,p--;break;case 2:return E.join("")}if(0==p&&(p=Math.pow(2,_),_++),d[l])h=d[l];else{if(l!==f)return null;h=s+s.charAt(0)}E.push(h),d[f++]=s+h.charAt(0),s=h,0==--p&&(p=Math.pow(2,_),_++)}}};return s}();void 0===(o=function(){return r}.call(t,n,t,e))||(e.exports=o)},486:e=>{!function(t){"use strict";"function"===typeof bootstrap?bootstrap("promise",t):e.exports=t()}(function(){"use strict";var e=!1;try{throw new Error}catch(t){e=!!t.stack}var t,n=O(),o=function(){},r=function(){var e={task:void 0,next:null},t=e,n=!1,o=void 0,s=!1,i=[];function a(){for(var t,o;e.next;)t=(e=e.next).task,e.task=void 0,(o=e.domain)&&(e.domain=void 0,o.enter()),c(t,o);for(;i.length;)c(t=i.pop());n=!1}function c(e,t){try{e()}catch(e){if(s)throw t&&t.exit(),setTimeout(a,0),t&&t.enter(),e;setTimeout(function(){throw e},0)}t&&t.exit()}if(r=function(e){t=t.next={task:e,domain:s&&process.domain,next:null},n||(n=!0,o())},"object"===typeof process&&"[object process]"===process.toString()&&process.nextTick)s=!0,o=function(){process.nextTick(a)};else if("function"===typeof setImmediate)o="undefined"!==typeof window?setImmediate.bind(window,a):function(){setImmediate(a)};else if("undefined"!==typeof MessageChannel){var u=new MessageChannel;u.port1.onmessage=function(){o=l,u.port1.onmessage=a,a()};var l=function(){u.port2.postMessage(0)};o=function(){setTimeout(a,0),l()}}else o=function(){setTimeout(a,0)};return r.runAfter=function(e){i.push(e),n||(n=!0,o())},r}(),s=Function.call;function i(e){return function(){return s.apply(e,arguments)}}var a,c=i(Array.prototype.slice),u=i(Array.prototype.reduce||function(e,t){var n=0,o=this.length;if(1===arguments.length)for(;;){if(n in this){t=this[n++];break}if(++n>=o)throw new TypeError}for(;n<o;n++)n in this&&(t=e(t,this[n],n));return t}),l=i(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),d=i(Array.prototype.map||function(e,t){var n=this,o=[];return u(n,function(r,s,i){o.push(e.call(t,s,i,n))},void 0),o}),p=Object.create||function(e){function t(){}return t.prototype=e,new t},f=Object.defineProperty||function(e,t,n){return e[t]=n.value,e},_=i(Object.prototype.hasOwnProperty),h=Object.keys||function(e){var t=[];for(var n in e)_(e,n)&&t.push(n);return t},E=i(Object.prototype.toString);a="undefined"!==typeof ReturnValue?ReturnValue:function(e){this.value=e};function g(t,n){if(e&&n.stack&&"object"===typeof t&&null!==t&&t.stack){for(var o=[],r=n;r;r=r.source)r.stack&&(!t.__minimumStackCounter__||t.__minimumStackCounter__>r.stackCounter)&&(f(t,"__minimumStackCounter__",{value:r.stackCounter,configurable:!0}),o.unshift(r.stack));o.unshift(t.stack);var s=function(e){for(var t=e.split("\n"),n=[],o=0;o<t.length;++o){var r=t[o];I(r)||m(r)||!r||n.push(r)}return n.join("\n")}(o.join("\nFrom previous event:\n"));f(t,"stack",{value:s,configurable:!0})}}function m(e){return-1!==e.indexOf("(module.js:")||-1!==e.indexOf("(node.js:")}function y(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n)return[n[1],Number(n[2])];var o=/.*@(.+):(\d+)$/.exec(e);return o?[o[1],Number(o[2])]:void 0}function I(e){var o=y(e);if(!o)return!1;var r=o[0],s=o[1];return r===t&&s>=n&&s<=q}function O(){if(e)try{throw new Error}catch(e){var n=e.stack.split("\n"),o=y(n[0].indexOf("@")>0?n[1]:n[2]);if(!o)return;return t=o[0],o[1]}}function T(e){return e instanceof C?e:b(e)?function(e){var t=A();return T.nextTick(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(e){t.reject(e)}}),t.promise}(e):$(e)}T.resolve=T,T.nextTick=r,T.longStackSupport=!1;var R=1;function A(){var t,n=[],o=[],r=p(A.prototype),s=p(C.prototype);if(s.promiseDispatch=function(e,r,s){var i=c(arguments);n?(n.push(i),"when"===r&&s[1]&&o.push(s[1])):T.nextTick(function(){t.promiseDispatch.apply(t,i)})},s.valueOf=function(){if(n)return s;var e=v(t);return L(e)&&(t=e),e},s.inspect=function(){return t?t.inspect():{state:"pending"}},T.longStackSupport&&e)try{throw new Error}catch(e){s.stack=e.stack.substring(e.stack.indexOf("\n")+1),s.stackCounter=R++}function i(r){t=r,T.longStackSupport&&e&&(s.source=r),u(n,function(e,t){T.nextTick(function(){r.promiseDispatch.apply(r,t)})},void 0),n=void 0,o=void 0}return r.promise=s,r.resolve=function(e){t||i(T(e))},r.fulfill=function(e){t||i($(e))},r.reject=function(e){t||i(V(e))},r.notify=function(e){t||u(o,function(t,n){T.nextTick(function(){n(e)})},void 0)},r}function w(e){if("function"!==typeof e)throw new TypeError("resolver must be a function.");var t=A();try{e(t.resolve,t.reject,t.notify)}catch(e){t.reject(e)}return t.promise}function S(e){return w(function(t,n){for(var o=0,r=e.length;o<r;o++)T(e[o]).then(t,n)})}function C(e,t,n){void 0===t&&(t=function(e){return V(new Error("Promise does not support operation: "+e))}),void 0===n&&(n=function(){return{state:"unknown"}});var o=p(C.prototype);if(o.promiseDispatch=function(n,r,s){var i;try{i=e[r]?e[r].apply(o,s):t.call(o,r,s)}catch(e){i=V(e)}n&&n(i)},o.inspect=n,n){var r=n();"rejected"===r.state&&(o.exception=r.reason),o.valueOf=function(){var e=n();return"pending"===e.state||"rejected"===e.state?o:e.value}}return o}function N(e,t,n,o){return T(e).then(t,n,o)}function v(e){if(L(e)){var t=e.inspect();if("fulfilled"===t.state)return t.value}return e}function L(e){return e instanceof C}function b(e){return(t=e)===Object(t)&&"function"===typeof e.then;var t}"object"===typeof process&&process&&process.env&&process.env.Q_DEBUG&&(T.longStackSupport=!0),T.defer=A,A.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(c(arguments,1)):e.resolve(n)}},T.Promise=w,T.promise=w,w.race=S,w.all=K,w.reject=V,w.resolve=T,T.passByCopy=function(e){return e},C.prototype.passByCopy=function(){return this},T.join=function(e,t){return T(e).join(t)},C.prototype.join=function(e){return T([this,e]).spread(function(e,t){if(e===t)return e;throw new Error("Q can't join: not the same: "+e+" "+t)})},T.race=S,C.prototype.race=function(){return this.then(T.race)},T.makePromise=C,C.prototype.toString=function(){return"[object Promise]"},C.prototype.then=function(e,t,n){var o=this,r=A(),s=!1;return T.nextTick(function(){o.promiseDispatch(function(t){s||(s=!0,r.resolve(function(t){try{return"function"===typeof e?e(t):t}catch(e){return V(e)}}(t)))},"when",[function(e){s||(s=!0,r.resolve(function(e){if("function"===typeof t){g(e,o);try{return t(e)}catch(e){return V(e)}}return V(e)}(e)))}])}),o.promiseDispatch(void 0,"when",[void 0,function(e){var t,o=!1;try{t=function(e){return"function"===typeof n?n(e):e}(e)}catch(e){if(o=!0,!T.onerror)throw e;T.onerror(e)}o||r.notify(t)}]),r.promise},T.tap=function(e,t){return T(e).tap(t)},C.prototype.tap=function(e){return e=T(e),this.then(function(t){return e.fcall(t).thenResolve(t)})},T.when=N,C.prototype.thenResolve=function(e){return this.then(function(){return e})},T.thenResolve=function(e,t){return T(e).thenResolve(t)},C.prototype.thenReject=function(e){return this.then(function(){throw e})},T.thenReject=function(e,t){return T(e).thenReject(t)},T.nearer=v,T.isPromise=L,T.isPromiseAlike=b,T.isPending=function(e){return L(e)&&"pending"===e.inspect().state},C.prototype.isPending=function(){return"pending"===this.inspect().state},T.isFulfilled=function(e){return!L(e)||"fulfilled"===e.inspect().state},C.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},T.isRejected=function(e){return L(e)&&"rejected"===e.inspect().state},C.prototype.isRejected=function(){return"rejected"===this.inspect().state};var k,P,D,U=[],G=[],M=[],x=!0;function F(){U.length=0,G.length=0,x||(x=!0)}function V(e){var t=C({when:function(t){return t&&function(e){if(x){var t=l(G,e);-1!==t&&("object"===typeof process&&"function"===typeof process.emit&&T.nextTick.runAfter(function(){var n=l(M,e);-1!==n&&(process.emit("rejectionHandled",U[t],e),M.splice(n,1))}),G.splice(t,1),U.splice(t,1))}}(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return function(e,t){x&&("object"===typeof process&&"function"===typeof process.emit&&T.nextTick.runAfter(function(){-1!==l(G,e)&&(process.emit("unhandledRejection",t,e),M.push(e))}),G.push(e),t&&"undefined"!==typeof t.stack?U.push(t.stack):U.push("(no stack) "+t))}(t,e),t}function $(e){return C({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},delete:function(t){delete e[t]},post:function(t,n){return null===t||void 0===t?e.apply(void 0,n):e[t].apply(e,n)},apply:function(t,n){return e.apply(t,n)},keys:function(){return h(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function j(e,t,n){return T(e).spread(t,n)}function B(e,t,n){return T(e).dispatch(t,n)}function K(e){return N(e,function(e){var t=0,n=A();return u(e,function(o,r,s){var i;L(r)&&"fulfilled"===(i=r.inspect()).state?e[s]=i.value:(++t,N(r,function(o){e[s]=o,0===--t&&n.resolve(e)},n.reject,function(e){n.notify({index:s,value:e})}))},void 0),0===t&&n.resolve(e),n.promise})}function W(e){if(0===e.length)return T.resolve();var t=T.defer(),n=0;return u(e,function(o,r,s){var i=e[s];n++,N(i,function(e){t.resolve(e)},function(e){if(0===--n){var o=e||new Error(""+e);o.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+o.message,t.reject(o)}},function(e){t.notify({index:s,value:e})})},void 0),t.promise}function H(e){return N(e,function(e){return e=d(e,T),N(K(d(e,function(e){return N(e,o,o)})),function(){return e})})}T.resetUnhandledRejections=F,T.getUnhandledReasons=function(){return U.slice()},T.stopUnhandledRejectionTracking=function(){F(),x=!1},F(),T.reject=V,T.fulfill=$,T.master=function(e){return C({isDef:function(){}},function(t,n){return B(e,t,n)},function(){return T(e).inspect()})},T.spread=j,C.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},T.async=function(e){return function(){function t(e,t){var s;if("undefined"===typeof StopIteration){try{s=n[e](t)}catch(e){return V(e)}return s.done?T(s.value):N(s.value,o,r)}try{s=n[e](t)}catch(e){return function(e){return"[object StopIteration]"===E(e)||e instanceof a}(e)?T(e.value):V(e)}return N(s,o,r)}var n=e.apply(this,arguments),o=t.bind(t,"next"),r=t.bind(t,"throw");return o()}},T.spawn=function(e){T.done(T.async(e)())},T.return=function(e){throw new a(e)},T.promised=function(e){return function(){return j([this,K(arguments)],function(t,n){return e.apply(t,n)})}},T.dispatch=B,C.prototype.dispatch=function(e,t){var n=this,o=A();return T.nextTick(function(){n.promiseDispatch(o.resolve,e,t)}),o.promise},T.get=function(e,t){return T(e).dispatch("get",[t])},C.prototype.get=function(e){return this.dispatch("get",[e])},T.set=function(e,t,n){return T(e).dispatch("set",[t,n])},C.prototype.set=function(e,t){return this.dispatch("set",[e,t])},T.del=T.delete=function(e,t){return T(e).dispatch("delete",[t])},C.prototype.del=C.prototype.delete=function(e){return this.dispatch("delete",[e])},T.mapply=T.post=function(e,t,n){return T(e).dispatch("post",[t,n])},C.prototype.mapply=C.prototype.post=function(e,t){return this.dispatch("post",[e,t])},T.send=T.mcall=T.invoke=function(e,t){return T(e).dispatch("post",[t,c(arguments,2)])},C.prototype.send=C.prototype.mcall=C.prototype.invoke=function(e){return this.dispatch("post",[e,c(arguments,1)])},T.fapply=function(e,t){return T(e).dispatch("apply",[void 0,t])},C.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},T.try=T.fcall=function(e){return T(e).dispatch("apply",[void 0,c(arguments,1)])},C.prototype.fcall=function(){return this.dispatch("apply",[void 0,c(arguments)])},T.fbind=function(e){var t=T(e),n=c(arguments,1);return function(){return t.dispatch("apply",[this,n.concat(c(arguments))])}},C.prototype.fbind=function(){var e=this,t=c(arguments);return function(){return e.dispatch("apply",[this,t.concat(c(arguments))])}},T.keys=function(e){return T(e).dispatch("keys",[])},C.prototype.keys=function(){return this.dispatch("keys",[])},T.all=K,C.prototype.all=function(){return K(this)},T.any=W,C.prototype.any=function(){return W(this)},T.allResolved=(k=H,P="allResolved",D="allSettled",function(){return"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(P+" is deprecated, use "+D+" instead.",new Error("").stack),k.apply(k,arguments)}),C.prototype.allResolved=function(){return H(this)},T.allSettled=function(e){return T(e).allSettled()},C.prototype.allSettled=function(){return this.then(function(e){return K(d(e,function(e){function t(){return e.inspect()}return(e=T(e)).then(t,t)}))})},T.fail=T.catch=function(e,t){return T(e).then(void 0,t)},C.prototype.fail=C.prototype.catch=function(e){return this.then(void 0,e)},T.progress=function(e,t){return T(e).then(void 0,void 0,t)},C.prototype.progress=function(e){return this.then(void 0,void 0,e)},T.fin=T.finally=function(e,t){return T(e).finally(t)},C.prototype.fin=C.prototype.finally=function(e){if(!e||"function"!==typeof e.apply)throw new Error("Q can't apply finally callback");return e=T(e),this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})},T.done=function(e,t,n,o){return T(e).done(t,n,o)},C.prototype.done=function(e,t,n){var o=function(e){T.nextTick(function(){if(g(e,r),!T.onerror)throw e;T.onerror(e)})},r=e||t||n?this.then(e,t,n):this;"object"===typeof process&&process&&process.domain&&(o=process.domain.bind(o)),r.then(void 0,o)},T.timeout=function(e,t,n){return T(e).timeout(t,n)},C.prototype.timeout=function(e,t){var n=A(),o=setTimeout(function(){t&&"string"!==typeof t||((t=new Error(t||"Timed out after "+e+" ms")).code="ETIMEDOUT"),n.reject(t)},e);return this.then(function(e){clearTimeout(o),n.resolve(e)},function(e){clearTimeout(o),n.reject(e)},n.notify),n.promise},T.delay=function(e,t){return void 0===t&&(t=e,e=void 0),T(e).delay(t)},C.prototype.delay=function(e){return this.then(function(t){var n=A();return setTimeout(function(){n.resolve(t)},e),n.promise})},T.nfapply=function(e,t){return T(e).nfapply(t)},C.prototype.nfapply=function(e){var t=A(),n=c(e);return n.push(t.makeNodeResolver()),this.fapply(n).fail(t.reject),t.promise},T.nfcall=function(e){var t=c(arguments,1);return T(e).nfapply(t)},C.prototype.nfcall=function(){var e=c(arguments),t=A();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},T.nfbind=T.denodeify=function(e){if(void 0===e)throw new Error("Q can't wrap an undefined function");var t=c(arguments,1);return function(){var n=t.concat(c(arguments)),o=A();return n.push(o.makeNodeResolver()),T(e).fapply(n).fail(o.reject),o.promise}},C.prototype.nfbind=C.prototype.denodeify=function(){var e=c(arguments);return e.unshift(this),T.denodeify.apply(void 0,e)},T.nbind=function(e,t){var n=c(arguments,2);return function(){var o=n.concat(c(arguments)),r=A();return o.push(r.makeNodeResolver()),T(function(){return e.apply(t,arguments)}).fapply(o).fail(r.reject),r.promise}},C.prototype.nbind=function(){var e=c(arguments,0);return e.unshift(this),T.nbind.apply(void 0,e)},T.nmapply=T.npost=function(e,t,n){return T(e).npost(t,n)},C.prototype.nmapply=C.prototype.npost=function(e,t){var n=c(t||[]),o=A();return n.push(o.makeNodeResolver()),this.dispatch("post",[e,n]).fail(o.reject),o.promise},T.nsend=T.nmcall=T.ninvoke=function(e,t){var n=c(arguments,2),o=A();return n.push(o.makeNodeResolver()),T(e).dispatch("post",[t,n]).fail(o.reject),o.promise},C.prototype.nsend=C.prototype.nmcall=C.prototype.ninvoke=function(e){var t=c(arguments,1),n=A();return t.push(n.makeNodeResolver()),this.dispatch("post",[e,t]).fail(n.reject),n.promise},T.nodeify=function(e,t){return T(e).nodeify(t)},C.prototype.nodeify=function(e){if(!e)return this;this.then(function(t){T.nextTick(function(){e(null,t)})},function(t){T.nextTick(function(){e(t)})})},T.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var q=O();return T})},281:(e,t,n)=>{"use strict";function o(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var r=o(n(109));function s(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var i="function"===typeof Symbol&&Symbol.observable||"@@observable",a=function(){return Math.random().toString(36).substring(7).split("").join(".")},c={INIT:"@@redux/INIT"+a(),REPLACE:"@@redux/REPLACE"+a(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+a()}};function u(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function l(e,t){return function(){return t(e.apply(this,arguments))}}function d(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}t.UY=function(e){for(var t=Object.keys(e),n={},o=0;o<t.length;o++){var r=t[o];0,"function"===typeof e[r]&&(n[r]=e[r])}var i,a=Object.keys(n);try{!function(e){Object.keys(e).forEach(function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:c.INIT}))throw new Error(s(12));if("undefined"===typeof n(void 0,{type:c.PROBE_UNKNOWN_ACTION()}))throw new Error(s(13))})}(n)}catch(e){i=e}return function(e,t){if(void 0===e&&(e={}),i)throw i;for(var o=!1,r={},c=0;c<a.length;c++){var u=a[c],l=n[u],d=e[u],p=l(d,t);if("undefined"===typeof p){t&&t.type;throw new Error(s(14))}r[u]=p,o=o||p!==d}return(o=o||a.length!==Object.keys(e).length)?r:e}},t.MT=function e(t,n,o){var r;if("function"===typeof n&&"function"===typeof o||"function"===typeof o&&"function"===typeof arguments[3])throw new Error(s(0));if("function"===typeof n&&"undefined"===typeof o&&(o=n,n=void 0),"undefined"!==typeof o){if("function"!==typeof o)throw new Error(s(1));return o(e)(t,n)}if("function"!==typeof t)throw new Error(s(2));var a=t,l=n,d=[],p=d,f=!1;function _(){p===d&&(p=d.slice())}function h(){if(f)throw new Error(s(3));return l}function E(e){if("function"!==typeof e)throw new Error(s(4));if(f)throw new Error(s(5));var t=!0;return _(),p.push(e),function(){if(t){if(f)throw new Error(s(6));t=!1,_();var n=p.indexOf(e);p.splice(n,1),d=null}}}function g(e){if(!u(e))throw new Error(s(7));if("undefined"===typeof e.type)throw new Error(s(8));if(f)throw new Error(s(9));try{f=!0,l=a(l,e)}finally{f=!1}for(var t=d=p,n=0;n<t.length;n++){(0,t[n])()}return e}return g({type:c.INIT}),(r={dispatch:g,subscribe:E,getState:h,replaceReducer:function(e){if("function"!==typeof e)throw new Error(s(10));a=e,g({type:c.REPLACE})}})[i]=function(){var e,t=E;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(s(11));function n(){e.next&&e.next(h())}return n(),{unsubscribe:t(n)}}})[i]=function(){return this},e},r}}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(698);if(!!!window.Promise){const e="This browser is not supported by OneID because it does not honor Promise.";throw console.warn(e),new Error(e)}Object.fromEntries=Object.fromEntries||e.m8})(),(()=>{"use strict";const e={ERROR:5,WARN:4,INFO:3,DEBUG:2,LOG:1,OFF:100};let t=e.INFO,o=!1;const r={ERROR:"color:#FC0C1B;background-color:#FFEFEF",WARN:"color:#5B3A06;background-color:#FFFBE6",INFO:"color:#363F47;background-color:#e1e9ff",DEBUG:"color:#444;background-color:#eee",LOG:"color:#000;background-color:transparent",DEFAULT:"color:#000;background-color:transparent;font-weight:",ONEID:"color:#2887b4;background-color:transparent;font-weight:bold"};let s=c();function i(e){"number"===typeof e&&(t=e,s=c())}function a(n){return t>e[n]?(e="",t={})=>{}:o?function(e){const t=["%c[OneID]%c %c[%s]%c: ",r.ONEID,r.DEFAULT,r[e],e,r.DEFAULT];return window.console[e.toLowerCase()].bind(window.console,...t)}(n):function(e){return window.console[e.toLowerCase()].bind(window.console,"[OneID] [%s]: ",e)}(n)}function c(){return{error:a("ERROR"),warn:a("WARN"),info:a("INFO"),debug:a("DEBUG"),log:a("LOG")}}var u=n(698);const l=/^\.?www/,d=/^\.?www\./,p=/^(.+)@([a-z0-9-]+)(\.([a-z]+))+$/i,f=/^[a-z]{2}-[A-Z]{2}$/,_=/LOGIN_FLOW|RECOVERY_FLOW|CONTACT_CSR_FLOW/i,h=/-(DEV|VALID|VAL|QA|STAGE|PROD)$/,E=/^{?[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}}?$/,g="oid_loglevel",m="oid_feature";function y(e){return e&&document.cookie.replace(new RegExp(`(?:(?:^|.*;\\s*)${e}\\s*\\=\\s*([^;]*).*$)|^.*$`),"$1")||null}function I(e,t,n){if(document.cookie=`${encodeURIComponent(e)}=; expires=Thu, 01 Jan 1970 00:00:00 GMT${t?`; domain=${t}`:""}${n?`; path=${n}`:""}`,t&&!l.test(t)){const o=`www${/^\./.test(t)?"":"."}${t}`;s.debug(`also deleting cookie from ${o}`),I(e,o,n)}return!0}function O(e,t,n,o,r,i){let a,c=!1;if(d.test(n)&&(n=n.replace(l,""),c=!0),!e||/^(?:expires|max-age|path|domain|secure)$/i.test(e))return!1;if(a=`${e}=${t}`,r&&r instanceof Date&&(a+=`; expires=${r.toUTCString()}`),n&&(a+=`; domain=${n}`),o&&(a+=`; path=${o}`),i&&(a+="; secure"),document.cookie=a,c){const t=`www${/^\./.test(n)?"":"."}${n}`;s.debug(`calling delete on domain ${t}`),I(e,t,o||"")}return!0}const T={getCookieDomain:function(){const e=(0,u.KT)(window.location.hostname);return e?`.${e}`:".go.com"}};function R(){let e=window.location.hostname;return"localhost"===e?e:(e=e.replace(d,""),`.${e}`)}const A={};function w(){return A}function S(e,t){Array.isArray(A[e])||(A[e]=[]),A[e].push(t)}function C(e,t){if(Array.isArray(A[e]))if("undefined"!==typeof t)for(let n=0;n<A[e].length;n++)A[e][n]===t&&A[e].splice(n,1);else A[e]=[]}function N(e,t){const n=w();Array.isArray(n[e])&&n[e].forEach(e=>{try{e(t)}catch(e){}})}function v(e,t,n,o,r){return{status:e,response:t,statusText:o,headers:(s=n,(s||"").split("\n").map(e=>{const t=e.indexOf(":")||0;return[e.substr(0,t).trim(),e.substr(t+1).trim()]}).filter(e=>!!e[0]).reduce((e,t)=>{const[n,o]=t;return{[n]:o,...e}},{})),debug:{xhrFailureReason:r}};var s}function L(e,t,n,o,r){return new Promise(s=>{const i=new XMLHttpRequest;let a;i.open(e,t,!0),Object.keys(o||{}).forEach(e=>{const t=o[e];"undefined"!==typeof t&&i.setRequestHeader((e||"").toLowerCase(),t)}),i.onload=()=>{clearTimeout(a),s(function(e){const t=e.statusText||"",n="response"in e?e.response:e.responseText,o=e.getAllResponseHeaders();let{status:r}=e;return 0===r&&(r=n?200:0),v(r,n,o,t)}(i))},i.onabort=()=>{clearTimeout(a),s(v(-1,null,null,"","onabort"))},i.onerror=()=>{clearTimeout(a),s(v(-1,null,null,"","onerror"))},i.send("undefined"!==n?n:null),"number"===typeof r&&r>0&&(a=setTimeout(()=>{s(v(-1,null,null,"","setTimeout"))},r))})}function b(e){const t=e||{},{responseData:n,headers:o,status:r}=function(e){let t;try{t={...JSON.parse(e.response)}}catch(e){t={}}return{responseData:t,headers:e.headers||{},status:e.status||-1}}(e),s=n.data||n||null,i=n.error||null,a=-1===r,c=!a&&!!i,u=a||c,{debug:l}=t,d={status:r,data:s,error:i,headers:o,isError:u,isNetworkError:a,isAppError:c,debug:l};if(a)throw d;return d}function k(e){let{url:t}=e.request;const{method:n,body:o,headers:r,query:s,timeoutMs:i}=e.request,a=function(e={}){const t=[];return Object.keys(e).forEach(n=>{Array.isArray(e[n])?e[n].forEach(e=>{t.push([n,e])}):t.push([n,e[n]])}),t.map(([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`).join("&")}(s);return a&&(t+=`?${a}`),L(n,t,JSON.stringify(o),r,i).then(t=>Object.assign(e,{response:b(t)}))}function P(e,t){const n=this[e];if("function"!==typeof t)throw new Error("Mutator must be a function");-1===n.indexOf(t)&&n.push(t)}function D(e){return async t=>{const n=await e(t);return void 0===n?t:n}}function U(e,...t){const n=e(...t),o=this.request,r=this.response;let s=Promise.resolve({request:n,response:null});o.forEach(e=>{s=s.then(D(e))});let i=s.then(k);return r.forEach(e=>{i=i.then(D(e))}),i.then(e=>e.response)}function G(e){const t={request:[],response:[]},n={};return Object.keys(e).forEach(o=>{n[o]=U.bind(t,e[o])}),n.addRequestMutator=P.bind(t,"request"),n.addResponseMutator=P.bind(t,"response"),n}let M;const x={langPref:"en-US",cssOverride:""};function F(){return M}const V="ac",$="api",j="idn",B="mtx",K="obo",W="s2",H="SWID",q="swid",Y="SWID_NT",z="token",Q="ts";function X(e,t=!1){if(!e)return;const n=new Date(Date.now());n.setFullYear(n.getFullYear()+1),O(H,e,T.getCookieDomain(),"/",n),t&&O(Y,1,T.getCookieDomain(),"/",n)}function Z(){return y(H)}const J="|",ee="=",te="#",ne="$",oe="-",re="string",se="date",ie="int",ae="boolean",ce="uuid",ue="json",le="string_raw",de={currentVersion:"5",versions:{4:[{key:"token.access_token",type:re},{key:"token.swid",type:ce},{key:"token.refresh_token",type:re},{key:"token.ttl",type:ie},{key:"token.refresh_ttl",type:ie},{key:"token.sso",type:ce},{key:"token.created",type:re},{key:"token.lastChecked",type:re},{key:"token.expires",type:re},{key:"token.refresh_expires",type:re},{key:"token.authenticator",type:re},{key:"token.blue_cookie",type:re},{key:"token.high_trust_expires_in",type:ie},{key:"token.initial_grant_in_chain_time",type:ie},{key:"token.id_token",type:re},{key:"token.sessionTransferKey",type:re}],5:[{key:"token",type:ue},{key:"id_token",type:le}]},vals:{4:" !\"'()+./?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{}~",5:" !\"'()+./?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{}~"}};function pe(e,t=de.currentVersion){const n=de.versions[t];if(!n)return;const o={token:(0,u.d9)(e.token),id_token:e.token.id_token};return delete o.token.id_token,delete o.token.scope,t+ee+function(e,t){return t.map(t=>function(e,t){let n;const o=de.vals[de.currentVersion];if(!e||!t||!t.key||!t.type)return;if(n=(0,u.U2)(e,t.key),"undefined"===typeof n||null===n)return;switch(t.type){case re:n=a(n);break;case se:n=c(n);break;case ie:n=s(n);break;case ae:n=d(n);break;case ce:n=l(n);break;case le:break;case ue:n=r(n);break;default:n=a(n)}return n;function r(e){return"object"!==typeof e?e:(0,u.h$)(JSON.stringify(e))}function s(e){let t="";if(e=parseInt(e,10),!Number.isNaN(e)){if(0===e)return o.charAt(0);for(e<0&&(t=oe,e*=-1);e>0;){const n=Math.floor(e/o.length),r=e-n*o.length;t+=o.charAt(r),e=n}return t}}function i(e,t){for(let n=0;n<t;n++)e+=o.charAt(0);return e}function a(e){let t,n="";if("undefined"!==typeof e&&null!==e)return`${e}`.split("").forEach(e=>{t=s(e.charCodeAt()-32),2===t.length?t=te+t:3===t.length&&(t=ne+t),n+=t}),n}function c(e){return"[object Date]"!==Object.prototype.toString.call(e)&&(e=new Date(e)),s(e.getTime())}function l(e){let t="",n="";const r=8;if("[object String]"!==Object.prototype.toString.call(e)||!E.test(e))return a(e);n+=/^{[^}]*}$/.test(e)?"1":"0",n+=/[A-F]/.test(e)?"1":"0",e=e.replace(/[{\-}]/g,"");const c=Math.floor(e.length/r);for(let n=0;n<c;n++){const o=e.substr(n*r,r),a=s(parseInt(o,16));t+=i(a,6-a.length)}return`${o.charAt(parseInt(n,2))}${t}`}function d(e){if("true"===e||"1"===e||!0===e||1===e)e=1;else{if("false"!==e&&"0"!==e&&!1!==e&&0!==e)return;e=0}return s(e)}}(e,t)).join(J)}(o,n)}function fe(e){if(!e)return;const t=e.substring(e.indexOf(ee)+1),n=e.substring(0,e.indexOf(ee)),o=de.versions[n];if(!o)return;const r=function(e,t,n){const o={};return e.split("|").forEach((e,r)=>{(0,u.t8)(o,t[r].key,function(e,t,n){if(""===e)return null;const o=de.vals[n]||de.vals[de.currentVersion];switch(t.type){case re:e=i(e);break;case se:e=a(e);break;case ie:e=s(e);break;case ae:e=l(e);break;case ce:e=c(e);break;case le:break;case ue:e=r(e)}return e;function r(e){let t;try{const n=(0,u.tV)(e);t=JSON.parse(n)}catch(t){return e}return t}function s(e){let t=0,n=1,r=1;if(0!==(e=(e||"").split("")).length)return e[0]===oe&&(n=-1,e.splice(0,1)),e.forEach(e=>{t+=o.indexOf(e)*r,r*=o.length}),t*n}function i(e){let t=0;const n=e.length;let o,r="";if(0!==n){for(;t<n;){switch(e[t]){case te:o=2,t+=1;break;case ne:o=3,t+=1;break;default:o=1}r+=String.fromCharCode(s(e.substr(t,o))+32),t+=o}return r}}function a(e){if(e=s(e))return new Date(e)}function c(e){let t=parseInt(o.indexOf(e[0]),10),n=!1,r=!1,a="";const c=6,u=e;Number.isNaN(t)||(t=t.toString(2),t.length<2&&(t=`0${t}`),n="1"===t[0],r="1"===t[1],e=e.substring(1));const l=Math.floor(e.length/c);for(let t=0;t<l;t++){let n=s(e.substr(t*c,c)).toString(16);for(;n.length<8;)n=`0${n}`;a+=n}a=r?a.toUpperCase():a.toLowerCase();const d=`${(n?"{":"")+a.substring(0,8)}-${a.substring(8,12)}-${a.substring(12,16)}-${a.substring(16,20)}-${a.substring(20)}${n?"}":""}`;return E.test(d)?d:i(u)}function l(e){return 1===s(e)}}(e,t[r],n))}),o}(t,o,n),{token:s}=r;return s.id_token=r.id_token,s.isExpired=_e(s),s}function _e(e){return!(he(e)&&Date.now()<e.exp)}function he(e){if(!e)return!1;return"string"===typeof e.swid&&"number"===typeof e.iat&&"string"===typeof e.access_token&&"number"===typeof e.exp&&(!e.refresh_token||"number"===typeof e.refresh_exp)}function Ee(e){const{exp:t,iat:n}=e,o=n+.8*(t-n);return Date.now()>o}function ge(e){return new Promise(t=>{const n={};window.addEventListener("message",function o(r){r.data&&r.data.targetName===e&&("comm-bootstrap-start"===r.data.event&&r.source.postMessage({event:"comm-bootstrap-ack",targetName:e},"*"),"comm-bootstrap-data"===r.data.event&&(n[r.data.port]=r.ports[0],Object.keys(n).length>=r.data.ports.length&&(window.removeEventListener("message",o),t(n))))})})}function me(e,t=3e4){const n=Object.keys(e.frames).reduce((t,n)=>({...t,[n]:{name:n,window:e.frames[n].window,ports:{},origin:e.frames[n].origin}}),{}),o=[];return Object.keys(e.frames).forEach(t=>{const o=n[t];e.frames[t].channels.forEach(e=>{const r=n[e];if(!o.ports[e]){const n=new MessageChannel;o.ports[e]=n.port1,r.ports[t]=n.port2}})}),Object.keys(n).forEach(e=>{var r;o.push(function(e,t){return new Promise((n,o)=>{const r=Date.now(),s=setInterval(i,100);function i(){if(Date.now()-r>t)return c(),void o(new Error("Bootstrap timed out"));e.window.postMessage({event:"comm-bootstrap-start",targetName:e.name},e.origin)}function a(t){const o=t.data&&t.data.targetName;t.source===e.window&&o&&o===e.name&&t.data&&"comm-bootstrap-ack"===t.data.event&&(c(),n())}function c(){clearInterval(s),window.removeEventListener("message",a)}window.addEventListener("message",a),i()})}(n[e],t).then((r=n[e],()=>{const e=Object.keys(r.ports);for(const t of e)r.window.postMessage({event:"comm-bootstrap-data",targetName:r.name,ports:e,port:t},r.origin,[r.ports[t]])})))}),Promise.all(o)}const ye=["CALL","CALL_DONE","EVENT"];function Ie(){const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-_=+";let t="";for(let n=0;n<24;n+=1){t+=e[Math.floor(66*Math.random())]}return t}function Oe(e,t="DEFAULT"){const n=`PatchBay[${t}]`,o={},r={},i={};return Object.keys(e).forEach(t=>{e[t].onmessage=function(e){return t=>{if(!t||!t.data||"object"!==typeof t.data)return;const{data:n}=t;-1!==ye.indexOf(n.type)&&(a(n.name,e,n),setTimeout(c.bind(null,n.name)))}}(t)}),{addHandler:function(e,t){if("function"!==typeof t)return;o[e]=t,c(e)},message:l,broadcast:function(t,n){const o={id:Ie(),type:"EVENT",data:n,name:t};a(t,null,o),setTimeout(c.bind(null,t)),Object.keys(e).forEach(e=>{l(e,t,n)})},call:function(e,t,o){return new Promise((r,a)=>{const c=Ie();s.debug(`${n}: call() invoked, target=${e}, name=${t}, id=${c}`),i[c]={resolve:r,reject:a},d(e,t,"CALL",o,c)})}};function a(e,t,o){s.debug(`${n}: queueMessage(name=${e}, source=${t})`),r[e]||(r[e]=[]),r[e].push({source:t,data:o})}function c(e){if(s.debug(`${n}: flushQueue(name=${e})`),!Array.isArray(r[e])||r[e].length<1)return void s.debug(`${n}: Nothing in queue for '${e}', exit early`);const t=[];for(;r[e].length;){const{source:a,data:c}=r[e].pop(),l=c&&c.type||void 0,d=c&&c.id||void 0,p=`${n} - ${d||"NO_ID"}`;if(s.debug(`${p}: flushQueue loop, source=${a}, type=${l}`),"CALL"===l||"EVENT"===l){let n;if(!o[e]){s.debug(`${p}: flushQueue loop, NO HANDLER FOR name=${e}, deferring`),t.push({source:a,data:c});continue}s.debug(`${p}: flushQueue loop, about to call handler for name=${e}`),n=o[e](c&&c.data),s.debug(`${p}: flushQueue loop, obtained return value from name=${e}`),"CALL"===l&&(n&&n.then||(s.debug(`${p}: flushQueue loop, handler for name=${e} returned plain value`),n=Promise.resolve(n)),n.then(t=>{s.debug(`${p}: flushQueue, promise resolved for name=${e}, messaging back`),u(a,e,t,d,"resolved")}).catch(t=>{s.debug(`${p}: flushQueue, promise caught error for name=${e}, messaging back`),u(a,e,t,d,"rejected")}))}if("CALL_DONE"===l){const{status:e}=c;if(!i[d]){s.debug(`${p}: flushQueue loop, pendingCalls EMPTY FOR id=${d}!!!`);continue}"resolved"===e?(s.debug(`${p}: flushQueue loop, resolving promise for id=${d}`),i[d].resolve(c.data)):(s.debug(`${p}: flushQueue loop, rejecting promise for id=${d}`),i[d].reject(c.data)),delete i[d]}}for(const o of t)s.debug(`${n}: flushQueue, pushing deferred item back into queue, name=${e}`),r[e].push(o)}function u(e,t,n,o,r){d(e,t,"CALL_DONE",n,o,r)}function l(e,t,n){d(e,t,"EVENT",n)}function d(o,r,i,u,l,d){if(l=l||Ie(),o===t)return s.debug(`${n}: Target is self...`),a(r,o,{id:l,type:i,name:r,data:u,status:d}),void setTimeout(c.bind(null,r));e[o]?e[o].postMessage({id:l,type:i,name:r,data:u,status:d}):s.debug(`${n}: Target '${o}' has not been registered!!!`)}}const Te=ge("outer").then(e=>new Oe(e,"outer")),Re=/^stg-|-stg\.|^stg\.cdn/,Ae=/^qa-|-qa\.|:3001$|^qa\.cdn|^edna\.cdn/,we=/^val-|-val\.|^val\.cdn/,Se="QA",Ce="STAGE",Ne="VALID";let ve="PROD",Le="";function be(e="outer"){const t="outer"===e?(document.querySelector('script[src*="/OneID.js"]')||document.querySelector('script[src*="/OneIDMigrate.js"]')||document.querySelector('script[src*="/DisneyID.js"]')||{}).src:window.location.href,n=!!document.querySelector('script[src*="/DisneyID.js"]'),{href:o,host:r}=new URL(t);return Le=n?"outer"===e?o.replace(/^(.*)\/v2\/outer\/DisneyID\.js(?:.+)?/,"$1/v4"):o.split("/bundle")[0]:"outer"===e?o.replace(/^(.*)\/OneID(?:Migrate)?\.js/,"$1"):o.split("/bundle")[0],Re.test(r.toLowerCase())?ve=Ce:Ae.test(r.toLowerCase())?ve=Se:we.test(r.toLowerCase())?ve=Ne:void 0}function ke(){return ve}const Pe=216e5,De=3e4,Ue=33,Ge=5,Me=5e3,xe=2e4,Fe=1e4,Ve=18e5;function $e(){const e=F(),t=ke();return Te.then(n=>n.call("responder","get.cookie",`${e&&e.clientId}-${t}.${z}`).then(e=>fe(e)).catch(e=>{const t=(0,u.U2)(e,"message");s.error(`Error in PatchBay call: ${t}`)}))}var je=n(961);const Be=[];function Ke(){if(!Be.length)return"";let e=Be.join("|");return e.length>600&&(e=e.slice(-600)),`0|${(0,je.compressToBase64)(e)}`}function We(e,t,n,o){let r;const i=`WorkflowManager[${e}]: `;return{runWorkflow:function(){s.debug(`${i}WorkflowManager.runWorkflow`),s.debug(`${i}name :`,e),r=n||Object.keys(t[0])[0],s.debug(`${i}step :`,r),c()}};function a(){const e=t.find(e=>Object.keys(e)[0]===r);return e&&e[r]}function c(){var t;s.debug(`${i}Executing step ${r}`),t=`${e.toUpperCase()}>${r}`,Be.push(t);const n=a(),o=Object.keys(n.results);try{n.stepExecution(u,o)}catch(e){throw s.error(e),e}}function u(t){s.debug(`${i}Step complete, result ${t}`);const{results:n}=a()||{};if(r=n&&n[t],r)return c();s.debug(`${i}Workflow complete:`,e),o&&o(t)}}const He={ACTION_NAME:"action_name",ERROR_CATEGORY:"error_category",ERROR_CODES:"error_codes",FLOW:"flow",SUBFLOW:"subflow",INFO:"info",NEW_RELIC:"newRelic",PAGE_VIEW:"pageView",PROBLEM:"problem",STACK_TRACE:"stack_trace",TRANSACTION_ID:"transaction_id",API_FORCE_TOKEN_REFRESH:"api:force:tokenrefresh",API_GET_ACTIVITY_STATUS:"api:get:activitystatus",API_GET_GUEST_DATA:"api:get:guest",API_GET_GUEST_NEWSLETTERS:"api:get:guestnewsletters",API_GET_INLINE_NEWSLETTERS:"api:get:inlinenewsletters",API_GET_LICENSE_PLATE_DATA_BAG:"api:get:licenseplate:databag",API_GET_LOGGED_IN_STATUS:"api:get:loggedinstatus",API_GET_TRUST_STATE_STATUS:"api:get:truststatestatus",API_INIT:"api:init",API_LAUNCH_EMAILVERIFICATION:"api:launch:emailverification",API_LAUNCH_GUESTFLOW:"api:launch:guestflow",API_LAUNCH_IDENTITYFLOW:"api:launch:identityflow",API_LAUNCH_LICENSE_PLATE:"api:launch:licenseplate",API_LAUNCH_LOGIN:"api:launch:login",API_LAUNCH_OTP_ONDEMAND:"api:launch:otp:ondemand",API_LAUNCH_LOGIN_BY_SWID:"api:launch:loginbyswid",API_LAUNCH_NEWSLETTERS:"api:launch:newsletters",API_LAUNCH_PROFILE:"api:launch:profile",API_LAUNCH_REAUTH:"api:launch:reauth",API_LAUNCH_REGISTRATION:"api:launch:registration",API_LAUNCH_SOCIAL_REGISTRATION:"api:launch:socialregistration",API_LOGOUT:"api:logout",API_REDEEM_LICENSE_PLATE_CODE:"api:redeem:licenseplate:code",API_REDEEM_SESSION_TRANSFER:"api:redeem:sessiontransfer",API_REDEEM_MAGIC_LINK_TOKEN:"api:redeem:magiclinktoken",API_SET_DO_NOT_DISTURB:"api:set:donotdisturb",API_SET_INLINE_NEWSLETTERS:"api:set:inlinenewsletters",API_GET_PPC:"api:get:ppc",API_SET_PPC:"api:set:ppc",EVENT_CLOSE:"event:ui:close",EVENT_LOGOUT:"event:logout",EVENT_AGE_GATED:"event:agegated",EVENT_CREATE:"event:create",EVENT_ERROR:"event:error",EVENT_EXPIRED_SESSION:"event:expiredsession",EVENT_EXTERNAL_LINK_EPC:"event:externallink:epc",EVENT_EXTERNAL_LINK_MYACCOUNT:"event:externallink:myaccount",EVENT_INIT:"event:init",EVENT_LOGIN:"event:login",EVENT_LOGIN_OBO:"event:login:obo",EVENT_LOW_TRUST:"event:lowtrust",EVENT_OPT_IN:"event:optin",EVENT_REAUTH:"event:reauth",EVENT_REGISTRATION_OTP_CLOSE:"event:registration:otp:close",EVENT_REFRESH:"event:refresh",EVENT_UPDATE:"event:update",BU_EVENT_TO_ACTION_NAME:{"age-gated":"EVENT_AGE_GATED",close:"EVENT_CLOSE",create:"EVENT_CREATE",error:"EVENT_ERROR",init:"EVENT_INIT",login:"EVENT_LOGIN",logout:"EVENT_LOGOUT","low-trust":"EVENT_LOW_TRUST","opt-in":"EVENT_OPT_IN",reauth:"EVENT_REAUTH",refresh:"EVENT_REFRESH",update:"EVENT_UPDATE"},CLICK_PASSWORD_CHECK_RESET_PASSWORD:"click:passwordcheck:resetpassword",CLICK_PASSWORD_CHECK_SKIP_RESET:"click:passwordcheck:skipreset",CLICK_REGISTER_BUTTON_ON_LOGIN:"click:button:login:createaccount",CLICK_LOGIN_LINK_ON_REGISTER:"click:link:register:signin",LOG_APPLICATION_ERROR:"log:application:error",LOG_ARKOSE_ERROR:"log:arkose:error",LOG_INVALID_DISPLAY_OPTION:"log:invalid:displayoption",LOG_INVALID_LEGAL_CONFIG:"log:invalid:legalconfig",LOG_INVALID_MARKETING_CONFIG:"log:invalid:marketingconfig",LOG_INVALID_OID_CONFIG:"log:invalid:oidconfig",LOG_MISSING_GUEST_DATA_ON_LOGOUT:"log:missing:guestdata:on:logout",LOG_MISSING_L10N:"log:missing:l10n",LOG_PATCHBAY_ERROR:"log:patchbay:error",LOG_PPU:"log:ppu",LOG_RECAPTCHA_ERROR:"log:recaptcha:error",LOG_UNEXPECTED_ERROR:"log:unexpected:error",LOG_VERSION_MISMATCH:"log:version:mismatch",LOG_MOBILE_DATA_MISMATCH:"log:mobile:data:mismatch",LOG_PHONE_FORMATTING_ERROR:"log:application:phone:formatting:error",SERVICE_DCF:"service:dcf",SERVICE_CHECK_AUTHORIZATION:"service:checkauthorization",SERVICE_CREATE:"service:register",SERVICE_DATE_OF_BIRTH_VALIDATE:"service:dob:validate",SERVICE_DISPLAY_NAME_VALIDATE:"service:displayname:validate",SERVICE_DOWNLOAD_CONFIG:"service:download:config",SERVICE_EMAIL_VALIDATE:"service:email:validate",SERVICE_GUEST_FLOW:"service:guestflow",SERVICE_LICENSE_PLATE_PEEK:"service:licenseplate:peek",SERVICE_LICENSE_PLATE_REDEEM:"service:licenseplate:redeem",SERVICE_LOGIN:"service:login",SERVICE_LOGIN_RECOVERY:"service:login:recovery",SERVICE_LOGOUT:"service:logout",SERVICE_NEWSLETTERS_GALC:"service:newsletters:galc",SERVICE_NEWSLETTERS_GEOGATED:"service:newsletters:geogated",SERVICE_OTP_EMAIL_VERIFICATION:"service:otprequest:emailverification",SERVICE_OTP_EMAIL_VERIFICATION_REDEEM:"service:otpredeem:emailverification",SERVICE_OTP_EMAIL_VERIFICATION_RESEND:"service:otprequest:emailverification:resend",SERVICE_OTP_EMAIL_UPDATE:"service:otprequest:update:email",SERVICE_OTP_EMAIL_UPDATE_REDEEM:"service:otpredeem:update:email",SERVICE_OTP_EMAIL_UPDATE_RESEND:"service:otprequest:update:email:resend",SERVICE_OTP_LOGIN_RECOVERY_METHODS:"service:otplogin:recovery:methods",SERVICE_OTP_LOGIN_BY_SWID_REQUEST:"service:otp:loginbyswid:request",SERVICE_OTP_LOGIN_BY_SWID_REDEEM:"service:otp:loginbyswid:redeem",SERVICE_OTP_LOGIN_RECOVERY_METHODS_SWID:"service:otplogin:recovery:methods:swid",SERVICE_OTP_LOGIN_REDEEM:"service:otpredeem",SERVICE_OTP_LOGIN_REQUEST_OTP:"service:otprecovery",SERVICE_OTP_LOGIN_RESEND_EMAIL:"service:otplogin:resend:email",SERVICE_OTP_LOGIN_RESEND_SMS:"service:otplogin:resend:sms",SERVICE_OTP_LOGIN_RESET_PASSWORD:"service:otplogin:resetpassword",SERVICE_OTP_LOGIN_UPGRADE_NRT:"service:otplogin:upgradenrt",SERVICE_OTP_ONDEMAND_REQUEST:"service:otp:ondemand:request",SERVICE_OTP_ONDEMAND_REDEEM:"service:otp:ondemand:redeem",SERVICE_OTP_ONDEMAND_RECOVERY_METHODS:"service:otp.ondemand:recovery:methods",SERVICE_OTP_SECURITY_FLAG_LOGIN_REQUEST:"service:otprequest:securityflag:login",SERVICE_OTP_SECURITY_FLAG_LOGIN_REDEEM:"service:otpredeem:securityflag:login",SERVICE_OTP_SECURITY_FLAG_RECOVERY_REQUEST:"service:otprequest:securityflag:recovery",SERVICE_OTP_SECURITY_FLAG_RECOVERY_REDEEM:"service:otpredeem:securityflag:recovery",SERVICE_OTP_PASSWORD_UPDATE:"service:otprequest:update:password",SERVICE_OTP_PASSWORD_UPDATE_EMAIL:"service:otprequest:update:password:email",SERVICE_OTP_PASSWORD_UPDATE_SMS:"service:otprequest:update:password:sms",SERVICE_OTP_PASSWORD_UPDATE_RESEND:"service:otprequest:update:password:resend",SERVICE_OTP_PASSWORD_UPDATE_RESEND_EMAIL:"service:otprequest:update:password:resend:email",SERVICE_OTP_PASSWORD_UPDATE_RESEND_SMS:"service:otprequest:update:password:resend:sms",SERVICE_OTP_PASSWORD_UPDATE_REDEEM:"service:otpredeem:update:password",SERVICE_OTP_PHONE_VERIFICATION:"service:otprequest:phoneverification",SERVICE_OTP_PHONE_VERIFICATION_REDEEM:"service:otpredeem:phoneverification",SERVICE_OTP_PHONE_VERIFICATION_RESEND:"service:otprequest:phoneverification:resend",SERVICE_PASSWORD_VALIDATE:"service:password:validate",SERVICE_PPU_PROFILE:"service:update:ppu:profile",SERVICE_PPU_PASSWORD:"service:update:ppu:password",SERVICE_REAUTH:"service:reauth",SERVICE_RECAPTCHA_CHECKBOX:"service:recaptchacheckbox",SERVICE_REFRESH_GUEST:"service:refresh:guest",SERVICE_REFRESH_TOKEN:"service:refresh:token",SERVICE_REGISTRATION_AGEGATED:"service:registration:agegated",SERVICE_REGISTRATION_GALC:"service:registration:galc",SERVICE_REGISTRATION_PIL2_NOTIFY:"service:registration:pil2:notify",SERVICE_SESSION_TRANSFER_ACTIVATE:"service:sessiontransfer:activate",SERVICE_REGISTRATION_OTP_SENT:"service:registration:otp:sent",SERVICE_REGISTRATION_OTP_RESEND:"service:registration:otp:resend",SERVICE_UPDATE_GUEST:"service:update:guest",SERVICE_UPDATE_GUEST_CREDENTIALS:"service:update:guestcredentials",SERVICE_UPDATE_MARKETING:"service:update:marketing",SERVICE_UPDATE_PASSWORD_RECOVERY_METHODS:"service:update:password:otp:recovery:methods",SERVICE_USERNAME_VALIDATE:"service:username:validate",ID_TOKEN_MASK_LENGTH:6},qe={action_name:"string",alternateConfig:"string",anon:"string",appid:"string",browser:"string - added by Log.go service",client_id:"string",connection_type:"string",context:"string",conversation_id:"string",error_category:"string",error_codes:"string",experience:"string",flow:"string",id_token:"string",info:"string",lightbox_version:"string",os:"string - added by Log.go service",platform:"string - added by Log.go service",problem:"string",process_time:"string",referrer_host:"string - added by Log.go service",reporting:"string",sdk_version:"string",source:"string",stack_trace:"string",subflow:"string",swid:"string",timestamp:"string",trace:"string",transaction_id:"string",user_agent:"string - added by Log.go service"};const Ye={appid:"DTCI-ONEID-UI"};let ze;let Qe=!1,Xe={},Ze={},Je=!0;function et(){const{clientId:e,langPref:t,debug:n}=F()||{};Ye.client_id=`${e}-${ke()}`,Ye.locale=t,Ye.sdk_version=`web ${window.ONEID_WEB_SDK_VERSION}`,function(){const e="https://feet-qa.segds.engsvc.go.com/",t="https://feet-stg.segds.engsvc.go.com/",n="https://log.go.com/",o=ke();ze=o!==Se?o!==Ce?n:t:e}(),n&&n.experimentalFeatures&&(window.newRelicRequests=[],Je=!1),Qe=!0}function tt(e={}){let t=(0,u.U2)(e,"optionalConfigs.reporting"),n=(0,u.U2)(e,"optionalConfigs.experience");t&&!it(t)&&(t=null),n&&!at(n)&&(s.warn("optionalConfigs.experience does not pass validation, values will be ignored"),n=null),Ze=t||n?{reporting:t,...n&&{experience:n}}:{},Ze.conversationId=(0,u.Vj)()}function nt(){let e={...Xe.reporting,...Ze.reporting};return it(e)||(s.warn("Combined reporting config does not pass validation, values will be ignored"),e={...Xe.reporting}),e.experience=Ze.experience||Xe.experience,e.conversationId=Ze.conversationId,{optionalConfigs:{reporting:e}}}function ot(e){Qe||et();const t=Date.now(),n={action_name:e};return{send:(e={})=>st({...n,...e,process_time:Date.now()-t||1})}}const rt={[He.API_GET_ACTIVITY_STATUS]:2,[He.API_GET_GUEST_DATA]:2,[He.API_GET_GUEST_NEWSLETTERS]:2,[He.API_GET_LOGGED_IN_STATUS]:2,[He.API_GET_TRUST_STATE_STATUS]:2,[He.API_INIT]:2,[He.API_SET_DO_NOT_DISTURB]:2,[He.EVENT_CLOSE]:2,[He.EVENT_INIT]:2,[He.EVENT_LOW_TRUST]:2};function st(e){s.debug("metricsNewRelic.sendNewRelicLog"),Qe||et(),e={...Ye,timestamp:Date.now(),...e};const{context:t,source:n,experience:o,conversationId:r,mid:i,...a}=(e.hasOwnProperty("reporting")?e.reporting:(0,u.U2)(nt(),"optionalConfigs.reporting"))||{};t&&(e.context=t),n&&(e.source=n),e.conversation_id=r||(0,u.Vj)(),o&&(e.experience=o),e.reporting=function(e,t){const n=[];Object.keys(t).forEach(e=>{n.push(`${e}(${t[e]})`)}),e&&n.push(`m-id(${e})`);return n.join(",")}(i,a),e.reporting||delete e.reporting,window.ONEID_WEB_SDK_MIGRATION&&(e[He.INFO]=e[He.INFO]?`${e[He.INFO]},isV4Migration(true)`:"isV4Migration(true)");const c=("string"===typeof e.action_name?e.action_name:"").toLowerCase(),l=rt[c];if(Je&&"number"===typeof l&&Math.random()>l/100)return void s.debug("not sending log - coin toss was tails.");const d=Ke();var p;!e.trace&&d.length&&(e.trace=d),p=e,Object.keys(p).forEach(e=>{qe[e]&&(p[e]||!1===p[e])||(s.debug(`analyticsUtils.removeInvalidNewRelicField: Removing key/value pair ${e}/${p[e]}`),delete p[e])});const f=Z();e.swid=f,e.anon=/{.+}/.test(f)?"false":"true";const _=$e().then(t=>{const n=(0,u.U2)(t,"id_token");n&&(e.id_token=(0,u.Cd)(n,He.ID_TOKEN_MASK_LENGTH));const o=new G({sendLog:e=>({method:"GET",url:`${ze}log`,body:{},headers:{},query:e})});return o.sendLog(e)});if(window.newRelicRequests){const e=new Promise(e=>{_.finally(e)}).then(()=>{window.newRelicRequests=window.newRelicRequests.filter(t=>t!==e),s.debug(`Removed resolved promise from 'newRelicRequests', ${window.newRelicRequests.length} remain`)});window.newRelicRequests=[...window.newRelicRequests,e],s.debug(`Added promise to 'newRelicRequests', ${window.newRelicRequests.length} are now currently outstanding`)}return _}function it(e){let t=0;for(const n in e){if(!/^[a-zA-Z0-9_]{1,30}$/.test(n))return!1;if(e[n].length>100)return!1;if(t+=1,t>10)return!1}return!0}function at(e){return!(!e||"string"!==typeof e)&&!!/^[A-Z0-9\.\-\_]+\.EXP$/g.test(e)}function ct(e,t,n){let o=`payload-included(${!!t})`;(e&&"error"===e.toLowerCase()||!1)&&t&&(o=`${o},event-payload(${t})`),n&&(o=`${o},${n}`),st({[He.ACTION_NAME]:He[He.BU_EVENT_TO_ACTION_NAME[e]]||e,[He.INFO]:o}),N(e,t)}function ut(){return Te.then(e=>e.call("inner","config.getSiteConfig")).then(u._A)}const lt={getGuest:"getGuest",guestLogin:"guestLogin",guestMarketingOptIn:"guestMarketingOptIn",guestRecoveryMethods:"guestRecoveryMethods",guestRegister:"guestRegister",guestUpdateBySWID:"guestUpdateBySWID",loginWithRecoveryToken:"loginWithRecoveryToken",requestOTPCodePhoneVerification:"requestOTPCodePhoneVerification",notificationOTPRecovery:"notificationOTPRecovery",notificationOTPUpdateCredentials:"notificationOTPUpdateCredentials",loginWithRecoveryTokenForSecurityFlagResolutionUpdateCredentialsBySWID:"loginWithRecoveryToken",otpRedeem:"otpRedeem",otpRedeemEmailVerification:"otpRedeemEmailVerification",otpRedeemUpdateCredentials:"otpRedeemUpdateCredentials",otpChangePassword:"otpChangePassword",otpUpgradeNRT:"otpUpgradeNRT",parentNotification:"parentNotification",validateDateOfBirth:"validateDateOfBirth",validateEmail:"validateEmail",validatePassword:"validatePassword",validateDisplayName:"validateDisplayName",activateSessionTransfer:"activateSessionTransfer"},dt={checkAuthorization:function({accessToken:e,swid:t}){const n={method:"",url:"",body:{},headers:{},query:{}},o=`/guest/check-authorization/${t}`;return n.headers.authorization=`BEARER ${e}`,{...n,method:"GET",url:o,eventName:He.SERVICE_CHECK_AUTHORIZATION}},getGuest:function({accessToken:e,swid:t}){const n={method:"",url:"",body:{},headers:{},query:{}},o=`/guest/${t}`;return n.query.feature="always-get-entitlements",n.query.expand=["profile","displayname","linkedaccounts","marketing","entitlements","s2"],n.headers.authorization=`BEARER ${e}`,{...n,method:"GET",url:o,eventName:He.SERVICE_REFRESH_GUEST,storeResponseKey:lt.getGuest}},guestFlow:function(e,t=He.SERVICE_GUEST_FLOW){return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:"/guest-flow",body:{email:e},eventName:t}},guestLogin:function({deviceId:e,loginValue:t,password:n,recaptchaToken:o,arkoseToken:r}){const s={method:"",url:"",body:{},headers:{},query:{}};e&&(s.headers["device-id"]=e);o&&(s.headers["g-recaptcha-token"]=o);r&&(s.headers["g-arkose-token"]=r);return{...s,method:"POST",url:"/guest/login",body:{loginValue:t,password:n},eventName:He.SERVICE_LOGIN,storeResponseKey:lt.guestLogin}},guestReauth:function({deviceId:e,loginValue:t,password:n,recaptchaToken:o,accessToken:r}){const s={method:"",url:"",body:{},headers:{},query:{}};s.headers.authorization=`BEARER ${r}`,e&&(s.headers["device-id"]=e);o&&(s.headers["g-recaptcha-token"]=o);return{...s,method:"POST",url:"/guest/reauth",body:{loginValue:t,password:n},eventName:He.SERVICE_REAUTH,storeResponseKey:lt.guestLogin}},guestMarketingOptIn:function(e={}){return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:"/marketing",body:e,eventName:He.SERVICE_UPDATE_MARKETING,storeResponseKey:lt.guestMarketingOptIn}},guestRecoveryMethods:function({loginValue:e,eventName:t=He.SERVICE_OTP_LOGIN_RECOVERY_METHODS}){return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:"/guest/recovery-methods",body:{loginValue:e},eventName:t,storeResponseKey:lt.guestRecoveryMethods}},guestRecoveryMethodsBySWID:function({swid:e,eventName:t=He.SERVICE_OTP_LOGIN_RECOVERY_METHODS_SWID}){return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:"/guest/recovery-methods-swid",body:{swid:e},eventName:t,storeResponseKey:lt.guestRecoveryMethods}},guestRegister:function(e={}){const{password:t,profile:{username:n}={}}=e,o={autogeneratePassword:!t,autogenerateUsername:!n},r={method:"",url:"",body:{},headers:{},query:{}};e.recaptchaToken&&(r.headers["g-recaptcha-token"]=e.recaptchaToken);e.arkoseToken&&(r.headers["g-arkose-token"]=e.arkoseToken);return{...r,method:"POST",url:"/guest/register",body:e,query:o,eventName:He.SERVICE_CREATE,storeResponseKey:lt.guestRegister}},guestUpdateBySWID:function({guest:e,swid:t,accessToken:n,eventName:o,deviceId:r}){const s={method:"",url:"",body:{},headers:{},query:{}};s.headers.authorization=`BEARER ${n}`,r&&(s.headers["device-id"]=r);return{...s,query:{feature:"no-password-reuse"},method:"POST",url:`/guest/${t}`,body:(0,u.d9)(e),eventName:o,storeResponseKey:lt.guestUpdateBySWID}},guestValidate:function({body:e,eventName:t,storeResponseKey:n}){return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:"/validate",body:e,eventName:t,storeResponseKey:n}},licensePlatePeek:function(e){return{method:"",url:"",body:{},headers:{},query:{},method:"GET",url:`/license-plate/code/${e}`,eventName:He.SERVICE_LICENSE_PLATE_PEEK}},licensePlateRedeem:function(e,t){return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:`/license-plate/code/${e}/activate`,body:{refreshToken:t},eventName:He.SERVICE_LICENSE_PLATE_REDEEM}},loginWithRecoveryToken:function({swid:e,recoveryToken:t,deviceId:n}){const o={method:"",url:"",body:{},headers:{},query:{}};n&&(o.headers["device-id"]=n);return o.query.expand=["profile","displayname","linkedaccounts","marketing","entitlements","s2"],{...o,method:"POST",url:"/guest/login/recoveryToken",body:{swid:e,recoveryToken:t},eventName:He.SERVICE_LOGIN_RECOVERY,storeResponseKey:lt.loginWithRecoveryToken}},logout:function({swid:e,tokenAndClientIds:t=[]}){return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:`/guest/${e}/logout`,body:{tokenAndClientIds:t},eventName:He.SERVICE_LOGOUT}},notificationOTPEmailVerification:function({accessToken:e,eventName:t}){return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:"/notification/otp/email-verification",headers:{authorization:`BEARER ${e}`},eventName:t}},notificationOTPRecovery:function({recoveryPayload:e,eventName:t,intent:n}){return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:"/notification/otp/recovery",body:e,query:{intent:n},eventName:t,storeResponseKey:lt.notificationOTPRecovery}},notificationOTPUpdateCredentials:function({accessToken:e,eventName:t,body:n=null}){return{method:"",url:"",body:{},headers:{},query:{},headers:{authorization:`BEARER ${e}`},method:"POST",url:"/notification/otp/update-credentials",eventName:t,body:n,storeResponseKey:lt.notificationOTPUpdateCredentials}},notificationOTPRegistration:function({email:e,accessToken:t,assessmentId:n,arkoseSessionId:o,eventName:r=He.SERVICE_REGISTRATION_OTP_SENT}){return{method:"",url:"",body:{},headers:{},query:{},headers:{authorization:`BEARER ${t}`},method:"POST",url:"/notification/otp/registration",body:{email:e,assessmentId:n,arkoseSessionId:o},eventName:r}},oboLogin:function({oboToken:e,swid:t}){return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:"/guest/login/on-behalf-of",body:{swid:t},headers:{Authorization:`BEARER ${e}`}}},otpRedeem:function({otpCode:e,sessionIds:t,eventName:n,assessmentId:o,arkoseSessionId:r}){const s={passcode:e,sessionIds:t};o&&(s.assessmentId=o);r&&(s.arkoseSessionId=r);return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:"/otp/redeem",body:s,eventName:n,storeResponseKey:lt.otpRedeem}},otpRedeemEmailVerification:function({accessToken:e,otpCode:t,sessionIds:n}){return{method:"",url:"",body:{},headers:{},query:{},headers:{authorization:`BEARER ${e}`},method:"POST",url:"/otp/verify-email",body:{passcode:t,sessionIds:n},eventName:He.SERVICE_OTP_EMAIL_VERIFICATION_REDEEM,storeResponseKey:lt.otpRedeemEmailVerification}},otpRedeemUpdateCredentials:function({accessToken:e,otpCode:t,sessionIds:n,eventName:o,deviceId:r}){const s={passcode:t,sessionIds:n},i={method:"",url:"",body:{},headers:{},query:{}};i.headers.authorization=`BEARER ${e}`,r&&(i.headers["device-id"]=r);return{...i,method:"POST",url:"/otp/redeem-update-credentials",body:s,eventName:o,storeResponseKey:lt.otpRedeemUpdateCredentials}},otpChangeEmail:function({recoveryToken:e,swid:t,newEmail:n,deviceId:o}){const r=`/guest/${t}/update-credentials`,s={method:"",url:"",body:{},headers:{},query:{}};s.headers.authorization=`BEARER ${e}`,o&&(s.headers["device-id"]=o);return{...s,method:"POST",url:r,body:{email:n},eventName:He.SERVICE_UPDATE_GUEST_CREDENTIALS}},otpChangePassword:function({recaptchaToken:e,recoveryToken:t,swid:n,newPassword:o,loginValue:r,deviceId:s}){const i=`/clickback-token/change-password/${n}`,a={method:"",url:"",body:{},headers:{},query:{}};a.headers.authorization=`BEARER ${t}`,s&&(a.headers["device-id"]=s);e&&(a.headers["g-recaptcha-token"]=e);return{...a,method:"POST",url:i,body:{newPassword:o,loginValue:r},eventName:He.SERVICE_OTP_LOGIN_RESET_PASSWORD,storeResponseKey:lt.otpChangePassword}},updateCredentialsBySWID:function({recoveryToken:e,swid:t,newPassword:n,eventName:o,deviceId:r}){const s=`/guest/${t}/update-credentials`,i={method:"",url:"",body:{},headers:{},query:{}};i.headers.authorization=`BEARER ${e}`,r&&(i.headers["device-id"]=r);return{...i,method:"POST",url:s,storeResponseKey:lt.loginWithRecoveryTokenForSecurityFlagResolutionUpdateCredentialsBySWID,body:{password:n},eventName:o}},otpUpgradeNRT:function({recaptchaToken:e,recoveryToken:t,swid:n,password:o,username:r}){const s=`/clickback-token/upgrade-nrt/${n}`;return{method:"",url:"",body:{},headers:{},query:{},method:"PUT",url:s,headers:{"g-recaptcha-token":e,authorization:`BEARER ${t}`},body:{password:o,username:r},eventName:He.SERVICE_OTP_LOGIN_UPGRADE_NRT,storeResponseKey:lt.otpUpgradeNRT}},refreshAuthorization:function({refreshToken:e,deviceId:t}){const n={method:"",url:"",body:{},headers:{},query:{}};t&&(n.headers["device-id"]=t);return{...n,method:"POST",url:"/guest/refresh-auth",body:{refreshToken:e},eventName:He.SERVICE_REFRESH_TOKEN}},redeemOTPCodePhoneVerification:function({otpCode:e,sessionIds:t,swid:n,accessToken:o,eventName:r}){return{method:"",url:"",body:{},headers:{},query:{},headers:{authorization:`BEARER ${o}`},method:"POST",url:`/guest/${n}/verify/otp`,body:{passcode:e,sessionIds:t},eventName:r,storeResponseKey:lt.redeemOTPCodePhoneVerification}},requestOTPCodePhoneVerification:function({phoneGuid:e,accessToken:t,eventName:n}){return{method:"",url:"",body:{},headers:{},query:{},headers:{authorization:`BEARER ${t}`},method:"POST",url:"/notification/otp/verification",body:{phoneGuid:e},eventName:n,storeResponseKey:lt.requestOTPCodePhoneVerification}},sendParentNotification:function({swid:e,accessToken:t}){return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:`/notification/parental-approval/${e}`,headers:{authorization:`BEARER ${t}`},eventName:He.EVENT_REGISTRATION_PIL2_NOTIFY,storeResponseKey:lt.parentNotification}},deleteAccount:function({guest:e,swid:t,accessToken:n,eventName:o}){return{method:"",url:"",body:{},headers:{},query:{},headers:{authorization:`BEARER ${n}`},method:"DELETE",url:`/guest/${t}`,body:{},eventName:o,storeResponseKey:lt.deleteAccount}},activateSessionTransfer:function({accessToken:e,refreshToken:t,sessionTransferKey:n}){return{method:"",url:"",body:{},headers:{},query:{},headers:{authorization:`BEARER ${e}`,"Content-Type":"application/json"},method:"POST",url:"/session/transfer/activate",body:{refreshToken:t,sessionTransferKey:n},storeResponseKey:lt.activateSessionTransfer,eventName:He.SERVICE_SESSION_TRANSFER_ACTIVATE}},authenticateViaSessionTransferKey:function({sessionTransferKey:e,eventName:t=He.API_REDEEM_SESSION_TRANSFER}){return{method:"",url:"",body:{},headers:{},query:{},method:"POST",url:"/session/transfer/redeem",body:{sessionTransferKey:e},eventName:t}}};const pt="ACCOUNT_MAPPING_NOT_MAPPED_PROFILE_DELETE_REQUESTED",ft="AUTHORIZATION_ACCOUNT_LOCKED_OUT",_t="AUTHORIZATION_CREDENTIALS",ht="DISALLOWED_VALUE",Et="GUEST_GATED_AGEBAND",gt="GUEST_GATED_BOTH_EMAIL_VERIFICATION",mt="GUEST_GATED_EMAIL_VERIFICATION",yt="GUEST_GATED_LOCATION",It="GUEST_GATED_PARENT_EMAIL_VERIFICATION",Ot="INVALID_VALUE",Tt="MISSING_VALUE",Rt="PPU_LEGAL",At="PPU_MARKETING",wt="PROFILE_DISABLED",St="PROFILE_USER_BANNED",Ct="SYSTEM_UNAVAILABLE",Nt="UNKNOWN_ERROR",vt={isPPU:[At,Rt],isMarketingPPU:[At],isGating:[Et,"GUEST_GATED_UNKNOWN","GUEST_GATED_EMBARGOED","GUEST_GATED_EMAIL",yt,gt,mt,It,ft,pt,wt,"ACCOUNT_IS_CHILDED",St],isGeoGated:[yt],isVerifyEmailGated:[gt,mt,It],isAgebandGated:[Et],isBanned:[St],isDisabled:[wt,pt],isSecurityFlagged:["AUTHORIZATION_ACCOUNT_SECURITY_LOCKED_OUT"],isPil2:["AUTHORIZATION_PARENTAL_CONSENT_REQUIRED"],isAccountMappingError:["ACCOUNT_MAPPING_NOT_FOUND_BUT_EMAIL_FOUND","NRT_ACCOUNT",ht,"UNKNOWN_ACCOUNT_STATUS"],isActionableInputError:[Tt,Ot,"INUSE_VALUE",ht],isAccountMappingNotFoundError:["ACCOUNT_MAPPING_NOT_FOUND","ACCOUNT_MAPPING_NOT_FOUND_AND_EMAIL_NOT_FOUND"],isAuthorizationError:[_t,"AUTHORIZATION_BAD_EXTERNAL_TOKEN","AUTHORIZATION_EXTERNAL_ID_MISMATCH"],isMarketingLongform:["MARKETING_LONG_FORM_ENABLED"],isEtagMismatch:["VALID_ETAG_REQUIRED"],isServiceError:["SERVICE_ERROR",Nt,Ct],isLockedOut:[ft],isMase:["AUTHORIZATION_MASE_ERROR"],isOtpAuthError:["PHONE_NOT_FOUND","PHONE_NOT_VERIFIED","PHONE_VERIFICATION_NOT_ALLOWED"],isOtpCodeLockedOut:["DEVICE_LINK_LOCKOUT_REACHED"],isOtpRequired:["AUTHORIZATION_INVALID_NETWORK","ACCOUNT_INACTIVE_VERIFICATION_REQUIRED","AUTHORIZATION_OTP_VERIFICATION_REQUIRED"],isInvalidLoginValue:["LOGIN_VALUE_INVALID","PROFILE_NOT_FOUND"],isInvalidOtpCode:["DEVICE_LINK_INVALID_OTP_CODE"],isInvalidAccessToken:["AUTHORIZATION_INVALID_OR_EXPIRED_TOKEN"],isInvalidRefreshToken:["AUTHORIZATION_INVALID_REFRESH_TOKEN"],isInvalidRecaptchaToken:["TOKEN_TOO_SHORT"],isInvalidSessionTransferKeyError:["INVALID_SESSION_TRANSFER_KEY"],isRateLimited:["RATE_LIMITED","RATE_LIMITED_API"]},Lt="ACTIONABLE_INPUT",bt="ADVISORY",kt="FAILURE_BY_DESIGN",Pt="PPU_ACTIONABLE_INPUT",Dt="CHILD",Ut="reduced",Gt="MACHINE_GENERATED";function Mt(e){const t=(0,u.U2)(e,"error.errors"),n=(0,u.U2)(e,"error.keyCategory");return!t||!n||!(0,u.U2)(t,"length")?[]:t.filter(function(e){return e.category===n})}function xt(e){const t={[Tt]:e=>e.inputName,[Rt]:e=>{var t;return((null===(t=e.data)||void 0===t?void 0:t.disclosures)||[]).map(e=>e.disclosureCode).join()},[At]:e=>{var t;return((null===(t=e.data)||void 0===t?void 0:t.entities)||[]).map(e=>e.code).join()}};return e.map(e=>{const n=t[e.code]&&t[e.code](e);return n?`${e.code}:${n}`:e.code}).join(";")}function Ft(e,t){return function(e,t,n=null){if(!Array.isArray(e))return[];Array.isArray(t)||(t=[t]);n&&!Array.isArray(n)&&(n=[n]);return(e||[]).filter(e=>-1!==t.indexOf(e.code)&&(!n||-1!==n.indexOf(e.inputName)))}(e,t)[0]}const Vt={};function $t(e,t){Vt[e]=t}function jt(e){return Vt[e]}function Bt(e){delete Vt[e]}function Kt(){for(const e in Vt)delete Vt[e]}function Wt(e){if(e)return Ht().then(t=>{const{s2CookieName:n,s2Domain:o}=t,r=T.getCookieDomain(),s=new Date(Date.now());s.setFullYear(s.getFullYear()+Ue),O(n,e,o,"/",s),y(n)!==e&&r&&O(n,e,r,"/",s)})}function Ht(){return ut().then(e=>{const{clientInfo:t={}}=e,n=t["s2-domain"]||window.location.hostname,o=t["s2-namespace"];return{s2CookieName:o?`${o}_${W}`:W,s2Domain:n,s2Namespace:o}})}let qt={language:null,featureFlags:["no-password-reuse"],endpoint:null,clientId:null};const Yt=new G(dt),zt=Yt;function Qt(e){e.response.parsedErrors=function(e){if(!e)return null;const t=Mt(e),n=(0,u.U2)(e,"error.keyCategory");let o={};switch(Object.keys(vt).forEach(e=>{Ft(t,vt[e])&&(o[e]=!0)}),n){case Pt:o.isPPU=!0;break;case bt:o.isAdvisoryError=!0;break;case Lt:o.isActionableInputError=!0;const e=t.reduce((e,t)=>{if(!t||!t.inputName)return e;const n=`${t.inputName}`,o=n.startsWith("profile.addresses"),r=(0,u.U2)(t,"data.type");if(o&&r){const o=`addresses.${r}.${n.replace(/.*\./,"")}`;return Object.assign(e,{[o]:t.code})}if(!o){const o=n.replace(/.*\./,"");return Object.assign(e,{[o]:t.code})}return e},{});o.clientErrors=Object.keys(e).length?e:null,o.clientErrorsRawInputNames=t.filter(e=>e.inputName).map(e=>e.inputName)}const r=(0,u.U2)(Ft(t,_t),"data")||{};o.isAuthorizationError&&r.passwordOrigin===Gt&&(o.isLoginSetPassword=!0);const s=e.isValid&&!e.isValid(),i=500===e.status;return(s||i||n===Ct)&&(o.isServiceError=!0),t.forEach(e=>{e.code===Ot&&"profile.region"===e.inputName&&(o.isInvalidRegionError=!0)}),0===Object.keys(o).length&&(o=null),o&&!o.clientErrors&&(o.clientErrors=null,o.clientErrorsRawInputNames=null),o}(e.response),(0,u.U2)(e.response.parsedErrors,"isPPU")&&$t("ppuErrors",(0,u.U2)(e.response,"error.errors"))}let Xt;zt.addRequestMutator(e=>{e.request.headers={...e.request.headers,"Content-Type":"application/json","Cache-Control":"no-cache",Pragma:"no-cache",Expires:"-1"};const t=(0,u.U2)(F(),"debug.geoIP");t&&(e.request.headers["x-forwarded-for"]=t)}),zt.addRequestMutator(e=>{e.request.query.langPref=qt.language}),zt.addRequestMutator(e=>{e.request.query.feature=qt.featureFlags}),zt.addRequestMutator(e=>{e.request.url=`${qt.endpoint}/client/${qt.clientId}${e.request.url}`}),zt.addRequestMutator(e=>{Xt=(0,u.Vj)();const t=jt("workflowOptions"),n=(0,u.U2)(t,"options.optionalConfigs.reporting.conversationId")||(0,u.Vj)();e.request.headers={...e.request.headers,"conversation-id":n,"correlation-id":Xt}}),zt.addRequestMutator(e=>{if(!e.request.headers.authorization)return new Promise(t=>{Te.then(n=>{n.call("responder","get.cookie",`${qt.clientId}.${$}`).then(n=>{n&&(e.request.headers.authorization=`APIKEY ${n}`),t()}).catch(()=>t())})})}),zt.addRequestMutator(e=>{const t=jt("workflowOptions");if(t){const n=(0,u.U2)(t,"options.optionalConfigs.reporting");e.request.headers={...e.request.headers,"oneid-reporting":(0,u.uP)(n)}}}),zt.addRequestMutator(e=>{e.newRelicLog=ot(e.request.eventName||"missing_action_name")}),zt.addResponseMutator(e=>{const{errorCodes:t,keyCategory:n,statusCode:o}=function(e){const t=(0,u.U2)(e,"error.keyCategory")||"";return{errorCodes:((0,u.U2)(e,"error.errors")||[]).map(e=>{let t=e.code;e.inputName&&(t+=`:${e.inputName}`);const n=(0,u.U2)(e,"data.disclosures");return n&&n.forEach(e=>{t+=`:${e.disclosureCode}`}),t})||[],keyCategory:t,statusCode:(0,u.U2)(e,"status")||null}}(e.response),r=jt("logoutType"),i={[He.ERROR_CATEGORY]:n,[He.ERROR_CODES]:t.join(","),[He.TRANSACTION_ID]:Xt};r&&(i[He.INFO]=`logoutType(${r})`,Bt("logoutType")),!o||o>=400&&o<500||o>=200&&o<300||(i[He.PROBLEM]=!0),s.debug("sending log : ",JSON.stringify(i,null,2)),e.newRelicLog.send(i),e.request.storeResponseKey&&$t(e.request.storeResponseKey,e.response)}),zt.addResponseMutator(e=>{const t=e.response&&e.response.headers["api-key"];if(t){const e=new Date;e.setDate(e.getDate()+1),Te.then(n=>n.message("responder","set.cookie",{key:`${qt.clientId}.${$}`,value:t,expires:e}))}}),zt.addResponseMutator(e=>{const t=(0,u.U2)(e.response,"data.s2");t&&Wt(t)}),zt.addResponseMutator(e=>{Qt(e)});const Zt="Already initialized",Jt="Configuration options have already been set",en="Could not initialize cross frame communication",tn="`DisneyID` global object is soon to be deprecated. Use `OneID` instead.",nn="OneID app timed out",on="Invalid argument",rn="INVALID_PAIRING_CODE",sn="MISSING_PAIRING_CODE",an="MISSING_SWID",cn="clientId not provided",un="No configuration options provided",ln="NO_DATA",dn="Could not read guest profile data",pn="responderPage not provided",fn="Could not get site config",_n="NO_VALID_CAMPAIGN",hn="Not initialized",En="PROFILE_UPDATE_INVALID",gn="Session already established",mn="Session not established",yn="FAILURE_BY_DESIGN",In="UNKNOWN_ERROR";function On(e){return new Promise((t,n)=>{Yt.licensePlatePeek(e).then(e=>{if((0,u.U2)(e,"parsedErrors.isActionableInputError"))return n({errorCodes:rn});t(e)}).catch(()=>n({errorCodes:In}))})}function Tn(){const{clientId:e,langPref:t,cssOverride:n,debug:o={}}=F(),{country:r,disableSetFocus:s,dynamicConfigOverride:i,siteConfigOverride:a,geoIP:c,iOSAutomation:u,testProfileFlag:l,disableFocusLock:d,showL10nKeys:p,gcEndpoint:f}=o,_=window.ONEID_WEB_SDK_MIGRATION?"bundleMigration":"bundle",h=y(g)||"INFO",E=y(m),I=Le.replace("https://ui-qa.registerdisney","https://uiv4-qa.registerdisney"),O=new URL(I);return O.pathname=`${O.pathname}/${_}/web/${e}/${t}`,n&&O.searchParams.append("cssOverride",n),r&&O.searchParams.append("countryCode",r),i&&O.searchParams.append("dynamicConfigOverride",JSON.stringify(i)),a&&O.searchParams.append("siteConfigOverride",JSON.stringify(a)),h&&O.searchParams.append("logLevel",h),u&&O.searchParams.append("iOSAutomation","true"),l&&O.searchParams.append("testProfileFlag","Y"),c&&O.searchParams.append("geoIP",c),E&&O.searchParams.append("featureFlags",E),s&&O.searchParams.append("disableSetFocus","true"),d&&O.searchParams.append("disableFocusLock","true"),p&&O.searchParams.append("showL10nKeys","true"),f&&O.searchParams.append("gcEndpoint",f),O.href}function Rn(){const{clientId:e,responderPage:t}=F(),n=ke(),o=new URL(t);return o.searchParams.append("clientId",e),o.searchParams.append("environment",n),o.href}function An(){return/(ipad|iphone|ipod)/gi.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2}const wn=function(){const e=document.querySelector("html"),t=document.createElement("style");let n;const o=An();var r;o&&(null===(r=document.querySelector("[name=viewport]"))||void 0===r||r.setAttribute("content","width=device-width, initial-scale=1, maximum-scale=1"));return{showLightbox:function(){e&&e.classList.add("oneid-lightbox-open"),n.style.display="block",n.style.width="100%",n.style.height="100%",n.classList.add("state-active");const t=n.querySelector("#oneid-iframe");t&&(t.setAttribute("tabindex","0"),t.focus())},hideLightbox:function(){e&&e.classList.remove("oneid-lightbox-open"),n.style.display="none",n.classList.remove("state-active");const t=document.getElementById("oneid-iframe");t&&(t.setAttribute("tabindex","-1"),t.blur())},createInner:function(){t.setAttribute("id","oneid-style"),t.setAttribute("type","text/css"),t.innerHTML=`\n    div#oneid-wrapper {\n      position: fixed;\n      top: 0;\n      left: 0;\n      /* This is here to render the images before showing the iframe */\n      width: 1px;\n      height: 1px;\n    }\n    div#oneid-wrapper.state-active {\n      z-index: 9999999;\n      opacity: 1;\n      transition: opacity 300ms;\n      -webkit-transition: opacity 300ms;\n    }\n    iframe#oneid-iframe {\n      width: 100%;\n      height: 100%;\n    }\n\n    ${o?"body {min-height: 100% !important;}":""}\n\n    html.oneid-lightbox-open {\n      overflow: hidden;\n      ${o?"height: 100%;":""}\n    }\n\n    html.oneid-lightbox-open body {\n      overflow: hidden;\n      ${o?"height: 100%;":""}\n    }\n    `;const e=s({name:"oneid-iframe",documentURL:Tn()});return n=document.createElement("div"),n.setAttribute("id","oneid-wrapper"),n.appendChild(e),Sn().then(()=>{document.head.appendChild(t),document.body.appendChild(n),document.body.focus(),n.style.display="none",null===e||void 0===e||e.blur()}),e},createResponder:function(){const e=s({name:"oneid-secure-responder",documentURL:Rn()});return e.style.display="none",Sn().then(()=>{document.body.appendChild(e)}),e}};function s({name:e,title:t="",documentURL:n}){const o=document.createElement("iframe");return o.setAttribute("id",e),o.setAttribute("name",e),o.setAttribute("frameborder","0"),t&&o.setAttribute("title",t),o.setAttribute("src",n),o&&(o.setAttribute("tabindex","-1"),o.blur()),o}}();function Sn(){return new Promise(e=>{const{readyState:t}=document;if("complete"===t||"loaded"===t||"interactive"===t)return e();document.addEventListener("DOMContentLoaded",()=>e(),{once:!0})})}function Cn(){return Ln(De)}function Nn(e,t){if(!t)return!1;const n=e.newsletters;s.debug("newslettersConfig :",n);for(const e of Object.values(n))if(Object.keys(e||{}).includes(t))return!0;return!1}function vn(){return ut().then(e=>e?Promise.resolve():Promise.reject({errorCodes:fn}))}function Ln(e=3e4,t=nn){let n;const o=Object.assign(new Promise((r,s)=>{n=setTimeout(()=>{s({errorCodes:t}),o.wasRejected=!0},e)}),{cancel:()=>(clearTimeout(n),this)});return o}function bn(e,t={}){var n,o;const r=F(),s=(0,u.U2)(e,"optionalConfigs.displayOptions.cssContext"),i=null!==(n=null!==(o=(0,u.U2)(e,"optionalConfigs.displayOptions.darkMode"))&&void 0!==o?o:(0,u.U2)(r,"optionalConfigs.displayOptions.darkMode"))&&void 0!==n?n:(0,u.U2)(window.BrandingConfig,"branding.brand.darkMode"),a=(0,u.U2)(e,"optionalConfigs.displayOptions.suppressCreateAccountOpt"),c=(0,u.U2)(e,"optionalConfigs.displayOptions.hideCloseButtonEverywhere");if(void 0!==s)if((0,u.kH)(s))t.displayOptions={...t.displayOptions,cssContext:s};else{ot(He.LOG_INVALID_DISPLAY_OPTION).send({[He.ERROR_CATEGORY]:yn,[He.ERROR_CODES]:"cssContext",[He.INFO]:`cssContext(${s})`})}if(void 0!==i)if("boolean"===typeof i)t.displayOptions={...t.displayOptions,darkMode:i};else{ot(He.LOG_INVALID_DISPLAY_OPTION).send({[He.ERROR_CATEGORY]:yn,[He.ERROR_CODES]:"darkMode",[He.INFO]:`darkMode(${i})`})}return void 0!==c&&"boolean"===typeof c&&(t.displayOptions={...t.displayOptions,hideCloseButtonEverywhere:c}),void 0!==a&&"boolean"===typeof a&&(t.displayOptions={...t.displayOptions,suppressCreateAccountOpt:a}),t.options=nt(),t.allowSkip=!!(0,u.U2)(e,"allowSkip"),t}function kn(){return y(K)}function Pn(){return s.debug("[OBO Cookie] - delete obo cookie",K,R()),I(K,R(),"/")}var Dn=n(0),Un=n.n(Dn);const Gn={ADULT:"X",TEEN:"Y",CHILD:"Z"};function Mn(e){if(!e)return Promise.resolve();const{clientId:t}=F(),n=`${t}-${ke()}.${j}`;return Te.then(t=>t.call("responder","set.cookie",{key:n,value:e,expires:0,secure:!0}).catch(e=>{const t=(0,u.U2)(e,"message");s.error(`Error in PatchBay call: ${t}`),st({[He.ACTION_NAME]:He.LOG_PATCHBAY_ERROR,[He.INFO]:"location(outer-lib-cookies-identity)",[He.STACK_TRACE]:t})}))}const xn="00";function Fn(){const{clientId:e}=F(),t=ke();try{localStorage.removeItem(`${e}-${t}.guest`)}catch(e){}}function Vn(){return jt("tokenData")?$n():$e().then(e=>{if(e&&!_e(e))return $t("tokenData",e),$n()})}function $n(){const{clientId:e}=F(),t=ke();return function(){const{clientId:e}=F(),t=`${e}-${ke()}.${j}`;return Te.then(e=>e.call("responder","get.cookie",t).catch(e=>{const t=(0,u.U2)(e,"message");s.error(`Error in PatchBay call: ${t}`),st({[He.ACTION_NAME]:He.LOG_PATCHBAY_ERROR,[He.INFO]:"location(outer-lib-cookies-identity)",[He.STACK_TRACE]:t})}))}().then(n=>{const o=jt("tokenData"),r=(0,u.U2)(o,"access_token");if(!r||!n)return;const s=function(e,t,n,o){let r=null;try{r=localStorage.getItem(`${n}-${o}.guest`)}catch(e){}return function(e,t,n){let o=null;try{o=JSON.parse(Un().decrypt(e.substring(2)+t,n))}catch(e){}return o}(`${e}`,t,r)}(n,r,e,t);if(!s)return jn();return(0,u.t8)(s,"guest.token",o)})}function jn(){const{clientId:e}=F(),t=ke(),n=jt("tokenData"),o=(0,u.U2)(n,"access_token"),r=(0,u.U2)(n,"swid");return Yt.getGuest({accessToken:o,swid:r}).then(r=>{if(200!==r.status)return null;const s=(0,u.U2)(r.data,"token")||n,i={...r.data,token:s};$t("getGuestResponse",r),$t("guest",i);return Mn(Kn({guest:i,token:s},o,e,t)),i})}function Bn(e,t){return new Promise(n=>{const o=(0,u.U2)(e,"guest");if(!o)return;let r;r=t?function(e){if(!e)return Promise.resolve();const{clientId:t}=F(),n=ke(),o=new Date(Date.now());o.setFullYear(o.getFullYear()+Ue);const r=pe({token:e});return Te.then(e=>e.call("responder","set.cookie",{key:`${t}-${n}.${z}`,value:r,expires:o,secure:!0}).catch(e=>{const t=(0,u.U2)(e,"message");s.error(`Error in PatchBay call: ${t}`)}))}(e.token):Promise.resolve();const{clientId:i}=F(),a=ke();let c;c=(0,u.U2)(e,"token.access_token")?Promise.resolve(e):$e();const l=function(e){const t=Gn[(0,u.U2)(e,"profile.ageBand")||""],n=(0,u.U2)(e,"profile.region")||(0,u.U2)(e,"profile.countryCodeDetected"),o=t+n,{clientId:r}=F(),i=ke();if(!t||!n||!e)return Promise.resolve();const a=new Date(Date.now());return a.setFullYear(a.getFullYear()+Ue),Te.then(e=>e.call("responder","set.cookie",{key:`${r}-${i}-${V}`,value:o,expires:a}).catch(e=>{const t=(0,u.U2)(e,"message");s.error(`Error in PatchBay call: ${t}`),st({[He.ACTION_NAME]:He.LOG_PATCHBAY_ERROR,[He.INFO]:"location(outer-lib-cookies-ageBandCountry)",[He.STACK_TRACE]:t})}))}(o);Promise.all([c,r,l]).then(t=>{Mn(Kn(e,(0,u.U2)(t[0],"token.access_token"),i,a)).then(n),$t("wasLoggedIn",!0),$t("guest",o)})})}function Kn(e,t,n,o){const r=function(e,t){const n=(0,u.d9)(e),o=JSON.stringify(n),r=(0,u.kn)(JSON.stringify({guest:e.guest})).toString(16);return{data:Un().encrypt(r+t,o),checksum:xn+r}}({guest:e.guest,created:(new Date).toISOString()},t);try{localStorage.setItem(`${n}-${o}.guest`,r.data)}catch(e){}return r.checksum}const Wn="api",Hn="invalid_refresh",qn="logged_out_in_other_tab",Yn="obo_logout",zn="get_guest_gc_error",Qn="get_guest_session_error",Xn="get_guest_missing_session_data",Zn="unknown";function Jn(e,t={}){const{clientId:n}=F(),o=ke(),r=t.refresh_token,s=[];return r&&s.push({clientId:`${n}-${o}`,token:r}),e&&s.length?Yt.logout({swid:e,tokenAndClientIds:s}):Promise.resolve()}const eo="error",to="init",no="login",oo="logout",ro="low-trust",so="refresh";function io(e){const t=e||Zn;ct(oo,t,`reason(${t})`)}function ao(e){const{clientId:t}=F(),n=ke(),o=jt("logoutReason");return $t("loggedIn",!1),Vn().then(r=>(Fn(),Jn((0,u.U2)(r,"profile.swid"),(0,u.U2)(r,"token")).then(()=>Te.then(r=>(r.message("inner","guest.logout"),X((0,u.Vj)()),r.call("responder","guest.logout",`${t}-${n}`).finally(()=>(io(o),e("done"))))))))}const co=[{readToken:{stepExecution:function(e){return $e().then(t=>t?($t("tokenData",t),(0,u.U2)(t,"access_token")&&!_e(t)?e("readGuestFromLocalStorage"):($t("logoutType","norefresh"),$t("logoutReason",Qn),void e("forceLogout"))):e()).catch(()=>e())},results:{readGuestFromLocalStorage:"readGuestFromLocalStorage",forceLogout:"forceLogout"}}},{readGuestFromLocalStorage:{stepExecution:function(e){const t=jt("workflowOptions"),n=(0,u.U2)(t,"forceRefresh"),o=(0,u.U2)(t,"fullPayloadRequested");$n().then(t=>{if(!t)return e("getGuestFromGuestController");t&&$t("guest",t);const r=(0,u.U2)(t,"token.created"),s=!!r&&new Date(r).getTime()+Pe<Date.now(),i=(0,u.U2)(t,"payload")===Ut;if(s||n||i&&o)return e("getGuestFromGuestController");e()})},results:{getGuestFromGuestController:"getGuestFromGuestController"}}},{getGuestFromGuestController:{stepExecution:function(e){const t=jt("tokenData"),n=jt("guest")||{token:t},o=(0,u.U2)(n,"token.access_token"),r=(0,u.U2)(n,"token.swid")||(0,u.U2)(n,"profile.swid");return o&&r?Yt.getGuest({accessToken:o,swid:r}).then(t=>{$t("getGuestResponse",t);const o=(0,u.U2)(t.data,"token")||n.token;if(200===t.status)return $t("guest",{...t.data,token:o}),e("saveSession");const r=(0,u.U2)(t,"parsedErrors")||{};return r.isSecurityFlagged||r.isDisabled||r.isInvalidAccessToken?($t("logoutType","getGuest"),$t("logoutReason",zn),e("forceLogout")):e()}):($t("logoutType","getGuest"),$t("logoutReason",Xn),e("forceLogout"))},results:{forceLogout:"forceLogout",saveSession:"saveSession"}}},{forceLogout:{stepExecution:ao,results:{}}},{saveSession:{stepExecution:function(e){const t=jt("guest")||{};return t&&t.token?Bn({guest:t,token:t.token}).then(e):e()},results:{}}}];function uo(){const{clientId:e}=F(),t=`${e}-${ke()}`;return`${B}${(0,u.kn)(t).toString(16)}`}function lo(){return y(uo())}function po(){return new Promise(e=>{if(lo())return s.debug("Mutex#cookie already present"),e(!1);setTimeout(()=>{if(lo())return s.debug("Mutex#cookie already present"),e(!1);s.debug("Mutex#setting cookie");const t=new Date(Date.now()+xe);return O(uo(),"0",T.getCookieDomain(),"/",t),e(!0)},Math.floor(1e3*Math.random()+1e3))})}let fo=!1;function _o(){return fo}function ho(e){fo=!!e}var Eo=n(281);const go="CLEAR_API_CALLBACK",mo="CLEAR_APP_LOADING",yo="CLEAR_CLIENT_ERRORS",Io="CLEAR_GC_RESPONSES",Oo="CLEAR_HIDE_LOADING_SPINNER_ONCE",To="CLEAR_PROMPT_RESULT",Ro="CLEAR_WORKFLOW_DATA",Ao="CLEAR_WORKFLOW_OPTIONS",wo="SET_APP_LOADING",So="SET_APP_SUCCESS",Co="SET_BUNDLER_STATUS",No="SET_BUNDLER_URL",vo="SET_CLIENT_ERROR",Lo="SET_CLIENT_ERRORS",bo="SET_COUNTRY",ko="SET_DEBUG_OPTIONS",Po="SET_DYNAMIC_CONFIG",Do="SET_GC_RESPONSE",Uo="SET_GLOBAL_CONFIG",Go="SET_GUEST_ADDRESS_FIELD",Mo="SET_GUEST_CHANGES",xo="SET_GUEST_DISPLAY_NAME",Fo="SET_GUEST_LEGAL_ASSERTIONS",Vo="SET_GUEST_MARKETING",$o="SET_GUEST_PROFILE",jo="SET_GUEST",Bo="SET_HIDE_LOADING_SPINNER_ONCE",Ko="SET_IS_MOBILE_SDK",Wo="SET_L10N",Ho="SET_LANGUAGE",qo="SET_LOCALE",Yo="SET_MOBILE_CONFIG",zo="SET_PROMPT_RESULT",Qo="SET_SERVICE",Xo="SET_SITE_CONFIG",Zo="SET_UI_FOCUS",Jo="SET_VIEW_RENDERED",er="SET_VIEW_SCHEMA",tr="SET_VIEW_TO_BUILD",nr="SET_WORKFLOW_DATA",or="SET_WORKFLOW_OPTIONS",rr="UNSET_CLIENT_ERROR",sr="UNSET_GUEST_ADDRESS_FIELD",ir="UNSET_GUEST_CHANGES",ar="UNSET_GUEST_EMAIL_CHANGE",cr="UNSET_GUEST",ur="UPDATE_API_CALLBACK",lr="UPDATE_GUEST_LEGAL_ASSERTIONS",dr="UPDATE_GUEST_MARKETING_LIST",pr="UPDATE_GUEST_PHONE_LIST",fr=function(e=_r,t){switch(t.type){case ur:return{...e,...t.payload};case go:return _r;default:return e}},_r=null;const hr=function(e=Er,t){let n=e;switch(t.type){case wo:n={globalOverlayClass:"active",loadingIndicatorClass:"state-loading",...t.payload};break;case So:n={globalOverlayClass:"active",loadingIndicatorClass:"state-success",...t.payload};break;case mo:n={...Er};break;default:return e}return n},Er={globalOverlayClass:"",loadingIndicatorClass:""};const gr=function(e={},t){let n;if(t.type!==Co)return e;n=t.payload;return n};const mr=function(e={},t){let n;if(t.type!==No)return e;n=t.payload;return n};const yr=function(e=Ir,t){switch(t.type){case Lo:return{...t.payload};case vo:return{...e,...t.payload};case rr:const n=Object.keys(t.payload);if(1!==n.length||null===e)return e;if(t.payload.legal){const{[t.payload.legal]:n,...o}=e.legal;if(0===Object.keys(o).length){const{legal:t,...n}=e;return n}return{...e,legal:o}}const{[n[0]]:o,...r}=e;return r;case yo:return Ir;default:return e}},Ir=null;const Or=function(e="US",t){let n;if(t.type!==bo)return e;n=t.payload;return n};const Tr=function(e=Rr,t){let n;if(t.type!==ko)return e;n=t.payload;return n},Rr={};const Ar=function(e=wr,t){let n;if(t.type!==Po)return e;n=t.payload;return n},wr={};const Sr=function(e=Cr,t){let n;if(t.type!==Uo)return e;n=t.payload;return n},Cr={};const Nr=function(e={},t){let n=e;switch(t.type){case jo:for(const n in t.payload)null===t.payload[n]&&e[n]&&delete t.payload[n];n=(0,u.RH)(e,t.payload);break;case cr:n={};break;default:return e}return n};const vr=function(e=Lr,t){let n=e;const{payload:o}=t;switch(t.type){case Mo:n={...e,...t.payload};break;case xo:n={...e,displayName:{...e.displayName,...t.payload}};break;case $o:n={...e,profile:{...e.profile,...t.payload}};break;case Go:let r;if(e.profile.addresses){const n=e.profile.addresses.findIndex(e=>e.type===t.payload.type);r=n>=0?[...e.profile.addresses.slice(0,n),{...e.profile.addresses[n],...t.payload},...e.profile.addresses.slice(n+1)]:[...e.profile.addresses,t.payload]}else r=[{...t.payload}];n={...e,profile:{...e.profile,addresses:r}};break;case sr:const s=e.profile.addresses.findIndex(e=>e.type===t.payload.type);if(s>=0){let o=e.profile.addresses.map(e=>({...e}));delete o[s][t.payload.field],o=o.filter(e=>Object.keys(e).length>1),n={...e,profile:{...e.profile,addresses:o}}}break;case Vo:const i=t.payload.map(e=>({code:e.name||e.code,subscribed:e.checked,textId:e.textId}));n={...e,marketing:i};break;case Fo:const a=(t,n)=>{const{disclosureCode:o}=n,r=(0,u.U2)(e,`legalAssertions.${o}.accepted`)?e.legalAssertions[o].accepted:!n.requiresActiveConsent;return{...t,[n.disclosureCode]:{accepted:r}}},c=t.payload.reduce(a,{});n={...e,legalAssertions:c};break;case lr:const l={...e.legalAssertions,...t.payload};n={...e,legalAssertions:l};break;case dr:const d=e.marketing.map(e=>e.textId===o.textId?{...e,subscribed:o.subscribed}:e);n={...e,marketing:d};break;case pr:{const{type:o,number:r,internationalPrefix:s,countryCode:i,phoneGuid:a}=t.payload,c=e.profile.phones||[],u=c.findIndex(e=>e.type===o);let l;const d=r?[{type:o,number:r,internationalPrefix:s,countryCode:i,phoneGuid:a}]:[];l=u>=0?[...c.slice(0,u),...d,...c.slice(u+1)]:[...c,...d],n={...e,profile:{...e.profile,phones:l}};break}case ar:delete e.profile.email,n={...e};break;case ir:n={...Lr};break;default:return e}return n},Lr={displayName:{},email:void 0,marketing:[],profile:{},legalAssertions:{}};const br=function(e={},t){switch(t.type){case Do:return{...e,[t.payload.key]:t.payload.response};case Io:return{};default:return e}};const kr=function(e=Pr,t){let n;switch(t.type){case Bo:return n=!0,n;case Oo:return n=!1,n;default:return e}},Pr=!1;const Dr=function(e=Ur,t={type:"none"}){if(t.type===Wo)return function(e){function t(n){const o=e[n]||"";return o&&"string"===typeof o&&0===o.indexOf("@:")?t(o.replace("@:","")):o}return Object.keys(e).map(n=>{e[n]=t(n)}),e}(Gr(t.payload));return e},Ur={};function Gr(e){const t={};for(const n in e)if(e.hasOwnProperty(n))if("object"===typeof e[n]){const o=Gr(e[n]);for(const e in o)o.hasOwnProperty(e)&&(t[`${n}.${e}`]=o[e])}else t[n]=e[n];return t}const Mr=function(e="en",t){let n;if(t.type!==Ho)return e;n=t.payload;return n};const xr=function(e="en-US",t){let n;if(t.type!==qo)return e;n=t.payload;return n};const Fr=function(e={},t){if(t.type===Yo)return{...e,...t.payload};return e};const Vr=function(e=!1,t){if(t.type===Ko)return t.payload;return e};const $r=function(e=jr,t){switch(t.type){case zo:return{...e,...t.payload};case To:return{...jr};default:return e}},jr={prompt:"",stepName:""};const Br=function(e="Disney",t){let n;if(t.type!==Qo)return e;n=t.payload;return n};const Kr=function(e=Wr,t=null){let n;switch(!0){case null===t:n=Wr;break;case t.type===Xo:n=function(e){const t=["accountMapping"],n=(0,u.d9)(e);return t.forEach(e=>{delete n[e]}),n}(t.payload);break;default:return e}return n},Wr={};const Hr=function(e=null,t){if(t.type===Zo)return t.payload;return e};const qr=function(e={viewID:"",timestamp:0},t){let n;if(t.type!==Jo)return e;n=t.payload;return n};const Yr=function(e=null,t){let n;if(t.type!==er)return e;n=t.payload;return n};const zr=function(e={viewID:"",timestamp:0},t){let n;if(t.type===tr)return n={...t.payload,timestamp:Date.now()},n;return e};const Qr=function(e=Xr,t){switch(t.type){case nr:return(0,u.RH)(e,t.payload);case Ro:return{...Xr};default:return e}},Xr={};const Zr=function(e=Jr,t){let n;switch(t.type){case Ao:return Jr;case or:return n={...e,...t.payload},n;default:return e}},Jr={};const es=(0,Eo.UY)({apiCallback:fr,appState:hr,bundlerStatus:gr,bundlerURL:mr,clientErrors:yr,country:Or,debugOptions:Tr,dynamicConfig:Ar,globalConfig:Sr,guest:Nr,guestChanges:vr,guestControllerResponses:br,hideLoadingSpinnerOnce:kr,l10n:Dr,language:Mr,locale:xr,mobileConfig:Fr,mobileSDK:Vr,promptResult:$r,service:Br,siteConfig:Kr,uiElementFocus:Hr,viewRendered:qr,viewSchema:Yr,viewToBuild:zr,workflowData:Qr,workflowOptions:Zr});function ts(e){const t="stateChangeListener",n={},o=e;let r=null,i=o.getState(),a=null,c=-1;return{add:function(e,t,o=!0){c+=1;const r=c;return n[r]={getNode:e,callback:t,ignoreNull:o},r},remove:function(e){delete n[e]},start:function(){s.debug(`${t}.start`),a=o.subscribe(()=>{!function(){r=i,i=o.getState();const e=Object.keys(n);if(!e.length)return;e.sort(),e.forEach(e=>{const t=n[e];if(!t)return;const o=t.getNode(r),s=t.getNode(i);if(o!==s){if(null===s&&t.ignoreNull)return;t.callback(s,o,i,r)}})}()})},stop:function(){s.debug(`${t}.stop`),a&&a(),a=null}}}let ns,os;!function(){be("inner");const e=ke()===Se;let t=null;t=e?(0,Eo.MT)(es,{},window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()):(0,Eo.MT)(es,{});ns=ts(t),ns.start(),os=t}();const rs=ge("inner").then(e=>new Oe(e,"inner")),ss=(window.location.host,{client_id:null,language_code:null,server_name:null});let is,as={};let cs=!1;function us(e,t){window.__dataLayer.pageViewed||(window.__dataLayer.pageViewed=!0);let n=e;return"view"!==e||t.page_name||(n="link"),new Promise(e=>{rs.then(o=>{const r=o.call("outer","get.cookie",H);Promise.all([r,is]).then(o=>{const r=o[0]||"",s={...ls(),...ss,...as,...t,authenticated_user:/{.+}/.test(r)?"Authenticated":"Not Authenticated",swid:r};return"view"!==n||s.page_name?"string"===typeof s.page_name&&s.page_name.includes("/v4/bundle/")?e():s.client_id?(cs&&(window.utag_events||(window.utag_events=[]),window.utag_events.push(s)),window.utag&&window.utag[n]&&window.utag[n](s),window.__dataLayer&&window.__dataLayer.publish(n,s),void e()):(console.error(new Error("Tealium called without clientId")),e()):e()})})})}function ls(){const{workflowOptions:e}=os.getState(),t=(0,u.U2)(e,"options.optionalConfigs.reporting"),n={};if(!t)return n;t.source&&(n.bu_name=t.source),t.context&&(n.client_context=t.context),t.experience&&(n.experience=t.experience),t.mid&&(n.mid=t.mid),t.conversationId&&(n.conversation_id=t.conversationId);for(let e=1;e<9;e++)(0,u.U2)(t,`custom${e}`)&&(n[`custom_attribute${e}`]=t[`custom${e}`]);return n}function ds(e={}){var t;if(s.debug(JSON.stringify(e,null,2)),e.tealium===ps.TEALIUM_VIEW&&(t=e,us("view",{...t})),e.tealium===ps.TEALIUM_LINK&&function(e){us("link",{...e})}(e),e.newRelic){const t=(0,u.U2)(os.getState(),"workflowOptions.rootWorkflow"),n=(0,u.U2)(os.getState(),"workflowOptions.newRelicSubflowName");e.trace=Ke(),e.reporting=function(){const{workflowOptions:e}=os.getState();return(0,u.U2)(e,"options.optionalConfigs.reporting")}()||null,e.flow=(0,u.hK)(t),e.subflow=(0,u.hK)(n),Te.then(t=>null===t||void 0===t?void 0:t.message("outer","newRelic.send",e))}}const ps={ACCOUNT_TYPE:"account_type",AGE_GATED_EVENT:"age_gated_event",AUTHENTICATED_USER:"authenticated_user",BACK_BUTTON:"back_button",BU_NAME:"bu_name",CLIENT_CONTEXT:"client_context",CLOSE_EVENT:"close_event",CONTINUE_SUCCESS:"continue_success",CONTINUE_MISSING_CREDENTIALS_FAILURE:"continue_missing_credentials_failure",CONTINUE_INVALID_CREDENTIALS_FAILURE:"continue_invalid_credentials_failure",CONTINUE_ANONYMIZATION_PENDING:"continue_anonymization_pending",CREATE_GALC:"create-galc",CREATE_GALC_ACTIVATE:"create_galc",CREATE_GUEST:"create_guest",CREATE_NRT_GALC:"create-nrt-galc",CREATE_NRT_GALC_ACTIVATE:"create_nrt_galc",CREATE_NRT_SUCCESS:"create-nrt-success",CREATE_AUTHENTICATED_NRT:"create-authenticated-nrt",DETECTED_COUNTRY:"detected_country",DELETE_ACCOUNT:"account_delete_start",EDIT_ID_FLOW_EMAIL:"edit_id_flow_email",EXPERIENCE:"experience",EXTERNAL_DOMAIN:"external_url",EVENT_NAME:"event_name",FLOW_NAME_LICENSE_PLATE:"License Plate",FLOW_NAME_LOGIN:"login",FLOW_NAME_MARKETING_OPT_IN:"marketing opt in",FLOW_NAME_REGISTRATION:"registration",FLOW_NAME_MOBILE_VERIFICATION:"phone verify",FLOW_NAME_LOGIN_RECOVERY_OTP:"Login Recovery - OTP",FLOW_NAME_PPU_LEGAL:"PPU Legal",FLOW_NAME_PPU_PROFILE:"PPU Profile",FLOW_NAME_PPU_MARKETING:"PPU Marketing",FLOW_NAME_PPU_DOB:"PPU DOB",FLOW_NAME_PPU_EMAIL:"PPU Email",FLOW_NAME_PPU_ADDRESS:"PPU Address",FLOW_NAME:"flow_name",FORGOT_PASSWORD:"forgot_password",FORM_NAME_DOB:"dob",FORM_NAME_ADDRESS:"address",FORM_NAME_RECAPTCHA:"Google-reCAPTCHA",FORM_NAME:"form_name",FORM_VIEW:"form_view",IDENTITY_FLOW_START:"identity_flow_start",LEARN_MORE_EXPAND:"learn_more_expand",LEGACY_ENTRY_LINK:"legacy_entry_link",LEGAL_ASSERTIONS_ACCEPTED:"legal_assertions_accepted",LEGAL_CHECK_FAIL:"legal_check_fail",LICENSE_PLATE_ACTIVATION:"license-plate-activation",LIGHTBOX_DISMISS:"lightbox_dismiss",LIVE_USERNAME:"email_taken_notify",LOGIN_GUEST:"login_guest",LOGIN_START:"login_start",LOGIN_ATTEMPT_EXCEEDED_FAILURE:"login_attempt_exceeded_failure",LOGIN_INVALID_CREDENTIALS_FAILURE:"login_invalid_credentials_failure",LOGIN_MISSING_EMAIL_OR_USERNAME_FAILURE:"login_missing_email_or_username_failure",LOGIN_MISSING_PASSWORD_FAILURE:"login_missing_password_failure",LOGOUT_GUEST:"logout_guest",LPLATE_AUTHENTICATION:"lplate_authentication",LPLATE_START:"lplate_start",LPLATE_SUCCESS_SCREEN:"lplate_success_screen",MARKETING_CONTEXT:"marketing_context",MARKETING_DOB_OK:"marketing_dob_ok",MARKETING_LIST:"marketing_list",MARKETING_OPT_IN:"marketing_opt_in",MARKETING_OPT_OUT:"marketing_opt_out",MOBILE_NUMBER_CONFIRM_SUCCESS:"mobile_number_confirm_success",MASE_ENCOUNTER:"mase_encounter",NEW:"New",NEWSLETTERS:"newsletters",OPT_IN:"opt_in",OTP_CANCEL:"otp_cancel",OTP_CONTINUE_LOGIN:"otp_continue_login",OTP_CODE_ERROR:"otp_code_error",OTP_LOGIN_ERROR:"otp_login_error",OTP_LOGIN_RECOVERY:"otp_login_recovery",OTP_LOGIN_START:"one_time_code_start",OTP_NRT_UPGRADE:"otp_nrt_upgrade",OTP_REASON:"otp_reason",OTP_REDEEM_SUCCESS:"otp_redeem_success",OTP_RESEND_CODE:"otp_resend_code",OTP_RESET_PASSWORD_SUCCESS:"otp_reset_password_success",OTP_RESET_PASSWORD:"otp_reset_password",OTP_SUBMIT:"otp_submit",PAGE_NAME:"page_name",PARENT_FLOW:"parent_flow",PASSWORD_CHECK_FAILURE:"password_check_failure",PASSWORD_CHECK_NEW_PASSWORD:"password_check_new_password",PASSWORD_CHECK_SET_PASSWORD_SUCCESSFUL:"password_check_set_password_successful",PASSWORD_RESET_START:"password_reset_start",PASSWORD_MISSING_EXPECTED_CHARS_FAILURE:"password_missing_expected_chars_failure",PASSWORD_TOO_COMMON_FAILURE:"password_too_common_failure",PASSWORD_TOO_LONG_FAILURE:"password_too_long_failure",PASSWORD_TOO_SHORT_FAILURE:"password_too_short_failure",PPU:"ppu",PPU_LOGOUT_POINT:"ppu_logout_point",PPU_SUCCESSFUL_UPDATE:"ppu_successful_update",PPU_VIEW:"ppu_view",PRIVACY_LINK_CLICKED:"privacy_link_clicked",PRIVACY_SOURCE:"privacy_source",PROGRESSIVE_MOBILE_COLLECTION:"progressive_mobile_collection",PROFILE_UPDATE:"profile_update",PROFILE_NOTE_FOUND:"profile_not_found",RECAPTCHA_FAILURE:"recaptcha_failure",RECOVERY_METHOD_EMAIL:"email_otp",RECOVERY_METHOD_SMS:"sms_otp",RECOVERY_METHOD:"recovery_method",REG_CANCEL_NO_INTERACT:"reg_cancel_no_interact",REG_FIELDS_LEFT_BLANK:"fields_left_blank_list",REGISTRATION_ATTEMPT_FAIL:"registration_attempt_fail",REGISTRATION_START:"registration_start",REGISTRATION:"registration",REAUTH:"reauth",REQUIRED_FIELDS_EMPTY_LIST:"required_fields_empty_list",REQUIRED_FIELDS_NON_EMPTY_LIST:"required_fields_non_empty_error",SHOW_PASSWORD_CLICK:"show_password_click",SMS_TOU_LINK_CLICKED:"sms_tou_link_clicked",SMS_TOU_SOURCE:"sms_tou_source",SOCIAL_LINK_COMPLETE:"social_link_complete",SOCIAL_PARTIAL_DATA_MISSING_LIST:"social_partial_data_missing_list",SOCIAL_PARTIAL_DATA_MISSING:"social_partial_data_missing",SWID:"swid",T_LOGIN_TYPE:"t_login_type",T_REGISTRATION_TYPE:"t_registration_type",TEALIUM_LINK:"link",TEALIUM_VIEW:"view",TEALIUM:"tealium",TOKEN_REFRESH:"token_refresh",TOTAL_LOGINS:"total_logins",TOU_LINK_CLICKED:"tou_link_clicked",TOU_SOURCE:"tou_source",TRACKED_LINKS:{AND_MORE_LINK:"and_more_link",VISIT_OUR_SUPPORT_CENTER_LINK:"visit_our_support_center_link"},VERIFY_CODE_ERROR:"verify_code_error",VERIFY_PHONE_START:"verify_phone_start"};function fs(e){return Te.then(t=>t.call("responder","deviceID.read",e).catch(e=>{const t=(0,u.U2)(e,"message");s.error(`Error in PatchBay call: ${t}`),function(e={}){ds({...e,[He.NEW_RELIC]:!0})}({[He.ACTION_NAME]:He.LOG_PATCHBAY_ERROR,[He.INFO]:"location(inner-lib-cookies-deviceId)",[He.STACK_TRACE]:t})}))}function _s(e,t){const n=new Date(Date.now());return e.token=t,e.token.created=n.toISOString(),e.token.lastChecked=e.token.created,e.token.expires=new Date(e.token.exp).toISOString(),e.token.refresh_expires=new Date(e.token.refresh_exp).toISOString(),Bn({guest:e,token:e.token},!0)}const hs=[{readToken:{stepExecution:function(e){return $e().then(n=>n?($t("tokenData",n),Ee(n)?(0,u.U2)(n,"refresh_token")?e("acquireMutex"):($t("logoutType","norefresh"),t(),void e("ensureLoggedOut")):(t(),e("emitRefreshEvent"))):e()).catch(()=>e());function t(){$t("mutexAttempt",0)}},results:{ensureLoggedOut:"ensureLoggedOut",acquireMutex:"acquireMutex",emitRefreshEvent:"emitRefreshEvent"}}},{ensureLoggedOut:{stepExecution:ao,results:{done:"releaseMutex"}}},{acquireMutex:{stepExecution:function(e){const t=jt("mutexAttempts")+1||1;return $t("mutexAttempts",t),t>Ge?(s.debug("acquireMutex#max attempts reached"),n(),e("ensureGuestLoggedOut")):po().then(t=>{if(!t)return s.debug("acquireMutex#could not acquire"),setTimeout(()=>{e("readToken")},Me);n(),e("refreshToken")});function n(){$t("mutexAttempts",0)}},results:{readToken:"readToken",ensureGuestLoggedOut:"ensureLoggedOut",refreshToken:"refreshToken"}}},{refreshToken:{stepExecution:function(e){var t;const n=jt("tokenData")||{},o=jt("guest"),r=(null===o||void 0===o||null===(t=o.profile)||void 0===t?void 0:t.email)||"",s=_o();return fs(r).then(e=>Yt.refreshAuthorization({refreshToken:n.refresh_token,deviceId:e})).then(t=>{$t("tokenRefreshResponse",t);const n=(0,u.U2)(t,"data.token")||{},o=(0,u.U2)(t,"parsedErrors")||{},r=200===t.status&&n.access_token&&n.refresh_token,i=s&&n.access_token&&n.refresh_token;return r||i?$n().then(t=>($t("tokenData",n),t?_s(t,n).then(()=>e("emitRefreshEvent")):jn().then(e=>_s(e,n)).then(()=>e("emitRefreshEvent")))):o.isInvalidRefreshToken?($t("logoutType","norefresh"),$t("logoutReason",Hn),e("ensureGuestLoggedOut")):o.isSecurityFlagged?($t("logoutType","securityFlagged"),e("ensureGuestLoggedOut")):o.isGating?s?e("ensureGuestLoggedOut"):Te.then(t=>t.call("inner","runWorkflow",{name:"GATING",workflowData:{parsedErrors:o}}).then(()=>(wn.showLightbox(),e("ensureGuestLoggedOut")))):o.isPPU?s?e("ensureGuestLoggedOut"):Promise.all([Vn(),Te]).then(([n,r])=>r.call("inner","runWorkflow",{guest:n,name:"LOGIN",step:"ppuSubflow",workflowData:{parsedErrors:o,ppu:{errors:t.error.errors}}}).then(()=>{wn.showLightbox(),e()})):void 0}).catch(()=>e("releaseMutex"))},results:{ensureGuestLoggedOut:"ensureLoggedOut",releaseMutex:"releaseMutex",emitRefreshEvent:"emitRefreshEvent"}}},{forceRefresh:{stepExecution:function(e){return $e().then(t=>{if(!t)return e();$t("tokenData",t),e("refreshToken")})},results:{refreshToken:"refreshToken"}}},{emitRefreshEvent:{stepExecution:function(e){const t=jt("tokenData");return ct(so,t),Te.then(n=>{n.message("inner","setGuest",{token:t}),e()}).catch(e)},results:{releaseMutex:"releaseMutex"}}},{releaseMutex:{stepExecution:function(e){I(uo(),T.getCookieDomain(),"/"),Bt("tokenData"),e()},results:{}}}];function Es(e){new We("tokenRefresh",hs,void 0,()=>e()).runWorkflow()}const gs=0,ms=1;function ys(){return new Promise(e=>{const{clientId:t}=F(),n=ke();Te.then(o=>o.call("responder","get.cookie",`${t}-${n}.${Q}`).then(t=>{if(null===t)return e({state:!1});const n=Date.parse(t)-Date.now();e({state:n<1?gs:ms,timeLeft:n})}).catch(e=>{const{message:t}=e||{};s.error(`Error in PatchBay call: ${t}`),st({[He.ACTION_NAME]:He.LOG_PATCHBAY_ERROR,[He.INFO]:"location(outer-lib-cookies-trustState)",[He.STACK_TRACE]:t})}))})}function Is(e=Ve){const{clientId:t}=F(),n=ke(),o=new Date(Date.now()+e);return Te.then(e=>e.call("responder","set.cookie",{key:`${t}-${n}.${Q}`,value:o.toISOString(),expires:o}).catch(e=>{const{message:t}=e||{};s.error(`Error in PatchBay call: ${t}`),st({[He.ACTION_NAME]:He.LOG_PATCHBAY_ERROR,[He.INFO]:"location(outer-lib-cookies-trustState)",[He.STACK_TRACE]:t})}))}function Os(){const{clientId:e}=F(),t=ke();return Te.then(n=>n.call("responder","delete.cookie",{key:`${e}-${t}.${Q}`}).catch(e=>{const{message:t}=e||{};s.error(`Error in PatchBay call: ${t}`),st({[He.ACTION_NAME]:He.LOG_PATCHBAY_ERROR,[He.INFO]:"location(outer-lib-cookies-trustState)",[He.STACK_TRACE]:t})}))}const Ts=e=>Bn({guest:e,token:e.token},!0);function Rs(e){return function({guest:e,writeSWIDCookie:t,writeGuest:n,writeTrustStateCookie:o}){const r=new Date(Date.now()),s={...e,token:{...e.token,created:r.toISOString(),lastChecked:r.toISOString(),expires:new Date(e.token.exp).toISOString(),refresh_expires:new Date(e.token.refresh_exp).toISOString()}},i=(0,u.U2)(s,"profile.swid"),a=(0,u.U2)(s,"profile.ageBand")===Dt;return Promise.all([t(i,a),n(s),o(1e3*s.token.high_trust_expires_in||void 0)])}({guest:e,writeSWIDCookie:X,writeGuest:Ts,writeTrustStateCookie:Is})}function As(e,t){s.error(e),st({[He.ACTION_NAME]:He.EVENT_LOGIN_OBO,[He.ERROR_CATEGORY]:"Unknown",[He.INFO]:`substep(${t}),message(${(null===e||void 0===e?void 0:e.message)||""})`})}const ws="EMAIL_VERIFICATION",Ss="GATING",Cs="IDENTITY_FLOW",Ns="LICENSE_PLATE",vs="LOGIN",Ls="NEWSLETTERS",bs="OTP_LOGIN_RECOVERY",ks="REAUTH",Ps="REGISTRATION",Ds="UPDATE_PROFILE",Us="REDEEM_SESSION_TRANSFER",Gs="REDEEM_MAGIC_LINK_TOKEN",Ms="LAUNCH_OTP",xs="LAUNCH_LOGIN_BY_SWID";const Fs=[{cleanUpSession:{stepExecution:function(e){$e().then(t=>{t&&(!function(){s.debug("[SESSION TOKEN] - Cookie deletion");const e=F(),t=ke();I(`${e&&e.clientId}-${t}.${z}`,R(),"/")}(),st({[He.ACTION_NAME]:He.EVENT_LOGOUT,[He.INFO]:`reason(${Yn})`})),e("done")})},results:{done:"attemptOBOLogin"}}},{attemptOBOLogin:{stepExecution:function(e){const t=y(q),n=kn();s.debug("[OBO Login Attempt]: started obo: ",n," swid: ",t);const o=ot(He.EVENT_LOGIN_OBO);return Yt.oboLogin({swid:t,oboToken:n}).then(t=>(s.debug("[OBO Login Attempt]: response ",t),Pn(),t.status>=400&&t.status<500||(e=>{var t;return((null===(t=e.error)||void 0===t?void 0:t.errors)||[]).some(e=>e.code===At)})(t)?($t("oboResponse",t),function(e){var t;st({[He.ACTION_NAME]:He.EVENT_LOGIN_OBO,[He.ERROR_CATEGORY]:(null===(t=e.error)||void 0===t?void 0:t.keyCategory)||"Unknown",[He.ERROR_CODES]:xt(Mt(e))})}(t),void e("failed")):Rs(t.data).then(()=>{s.debug("[OBO Attempt] - Success create session"),o.send({[He.INFO]:"login_obo_success"}),e("success")}).catch(t=>{As(t,"createSession"),e("failed")}))).catch(t=>{As(t,"oboLogin"),Pn(),e("failed")})},results:{failed:"parseErrors"}}},{parseErrors:{stepExecution:function(e){var t,n;const o=jt("oboResponse")||{};return(null===o||void 0===o||null===(t=o.parsedErrors)||void 0===t?void 0:t.isPPU)?e("ppu"):(null===o||void 0===o||null===(n=o.parsedErrors)||void 0===n?void 0:n.isGating)?e("gating"):void e()},results:{ppu:"launchPPU",gating:"launchGating"}}},{launchPPU:{stepExecution:function(e){const t=jt("oboResponse")||{};return Te.then(n=>n.call("inner","runWorkflow",{guest:t.data,name:vs,step:"ppuSubflow",workflowData:{parsedErrors:t.parsedErrors,ppu:{errors:t.error.errors}}}).then(()=>{wn.showLightbox(),e()}))},results:{}}},{launchGating:{stepExecution:function(e){const t=jt("oboResponse")||{};return Te.then(n=>n.call("inner","runWorkflow",{name:Ss,workflowData:{parsedErrors:t.parsedErrors}}).then(()=>{wn.showLightbox(),e()}))},results:{}}},{windowReload:{stepExecution:function(e){s.debug("[OBO Reload] - this app will be reloaded in 2 seconds...");const t=window.location.reload.bind(window.location);setTimeout(t,2e3)},results:{}}}];const Vs=[{anonymize:{stepExecution:function(e){Z()||X((0,u.Vj)()),e("done")},results:{done:"checkForOBOToken"}}},{checkForOBOToken:{stepExecution:function(e){s.debug("[checkForOBOToken]: init");const t=kn();if(!t)return s.debug("[checkForOBOToken]: no OBO Token"),e("notFound");s.debug("[checkForOBOToken]: OBO Token Found: ",t,t.isExpired),e("found")},results:{found:"oboSubflow",notFound:"readSession"}}},{readSession:{stepExecution:function(e){return $e().then(t=>t?($t("tokenData",t),_e(t)?(s.info("Starting token refresh"),e("tokenRefresh")):void e("getGuestSubflow")):e())},results:{getGuestSubflow:"getGuestSubflow",tokenRefresh:"tokenRefreshSubflow"}}},{getGuestSubflow:{stepExecution:function(e){const t=new We("getGuest",co,"readGuestFromLocalStorage",()=>{const t=jt("guest");if(t)return Te.then(e=>e.message("inner","setGuest",t)).finally(e);e()});t.runWorkflow()},results:{}}},{tokenRefreshSubflow:{stepExecution:Es,results:{}}},{oboSubflow:{stepExecution:function(e){new We("oboSubflow",Fs,void 0,()=>e("done")).runWorkflow()},results:{done:"readSession"}}}];function $s(e){$t("guestFlowName","LOGIN_FLOW");const t=jt("workflowOptions"),n=jt("guestFlowCode");return Te.then(o=>o.call("inner","runWorkflow",{name:"LOGIN",workflowData:{loginValue:jt("guestFlowEmail")},workflowOptions:t,persistentTealiumData:{flow_name:"Guest Flow Login",guest_flow:n}}).then(()=>{wn.showLightbox(),e()}).catch(t=>{const n=(0,u.U2)(t,"message");s.error(`Error in PatchBay call: ${n}`),st({[He.ACTION_NAME]:He.LOG_PATCHBAY_ERROR,[He.INFO]:"location(outer-workflows-guestFlow-launchLogin)",[He.STACK_TRACE]:n}),e()}))}const js=[{validate:{stepExecution:function(e){const t=jt("workflowOptions");let n=(0,u.U2)(t,"guestFlowEmail"),o=!1;if("string"===typeof n&&(n=n.trim().replace(/<|>/gim,""),o=p.test(n)),o)return $t("guestFlowEmail",n),e("checkForAccount");Bt("guestFlowEmail"),e("launchRegistration")},results:{checkForAccount:"checkForAccount",launchRegistration:"launchRegistration"}}},{checkForAccount:{stepExecution:function(e){const t=jt("guestFlowEmail");return t?Yt.guestFlow(t).then(t=>{const n=(0,u.U2)(t,"data.guestFlow")||"",o=n.match(_)?"launchLogin":"launchRegistration";$t("guestFlowCode",n),e(o)}).catch(()=>e("launchRegistration")):e("launchRegistration")},results:{launchLogin:"launchLogin",launchRegistration:"launchRegistration"}}},{launchRegistration:{stepExecution:function(e){$t("guestFlowName","REGISTRATION_FLOW");const t=jt("workflowOptions"),n=jt("guestFlowEmail")||"",o=jt("guestFlowCode"),r={profile:{email:n}};return Te.then(n=>n.call("inner","runWorkflow",{name:"REGISTRATION",workflowOptions:t,guestChanges:r,persistentTealiumData:{flow_name:"Guest Flow Registration",guest_flow:o}}).then(()=>{wn.showLightbox(),e()}).catch(t=>{const n=(0,u.U2)(t,"message");s.error(`Error in PatchBay call: ${n}`),st({[He.ACTION_NAME]:He.LOG_PATCHBAY_ERROR,[He.INFO]:"location(outer-workflows-guestFlow-launchRegistration)",[He.STACK_TRACE]:n}),e()}))},results:{}}},{launchLogin:{stepExecution:$s,results:{}}}];function Bs(e){const t={data:{email:null,legal:[]},error_codes:null},n=jt("workflowOptions")||{};t.data.campaignId=jt("promotionID"),$t("workflowOptions",{...n,fullPayloadRequested:!0});const o=new We("getGuest",co,null,()=>{const n=jt("guest");return n?(t.data.email=n.profile.email,$t("responsePayload",t),e("guestIsLoggedIn")):($t("responsePayload",t),e("guestIsNotLoggedIn"))});o.runWorkflow()}const Ks="AGE_GATED",Ws="ALREADY_OPT_IN",Hs="INVALID_EMAIL",qs="INVALID_LOCATION",Ys="NO_DATA",zs="NO_VALID_CAMPAIGN",Qs="SERVICE_ERROR";function Xs(e){const t=e.errors[0];if("MISSING_VALUE"===t.code){const e=t.inputName.toUpperCase();return`${t.code}_${e}`}return t.code}function Zs(e){const t=jt("responsePayload");ut().then(n=>{const o=(0,u.U2)(n,"compliance.ageBands.ADULT.country");if("US"!==o)return t.data={},t.error_codes=qs,$t("responsePayload",t),e();$t("defaultLegalCountry",o),e("getLegalData")})}const Js=(e,t=!1)=>({code:e.name,content:e.text,subscribed:t,preselected:e.checked});function ei(e){ut().then(t=>{const n=jt("guest"),o=(0,u.U2)(n,"profile.region"),r=(0,u.U2)(n,"profile.countryCodeDetected"),s=(0,u.U2)(t,"compliance.defaultCountryCode");$t("guestLocation",o||r||s||"US"),e("checkProfile")})}function ti(e){const t=jt("responsePayload"),n=jt("guest"),o=jt("workflowOptions"),r=function(e,t){if("CHILD"===(0,u.U2)(e,"profile.ageBand"))return Ks;if("US"!==jt("guestLocation"))return qs;if(null!==t&&t!==(0,u.U2)(e,"profile.email"))return Hs;return!1}(n,(0,u.U2)(o,"buData.email")||null)||!1;if(r)return t.error_codes=r,t.data={},$t("responsePayload",t),e();e("hasOptedIntoAnything")}const ni=[{runGetGuestWorkflow:{stepExecution:Bs,results:{guestIsLoggedIn:"getGuestLegalCountry",guestIsNotLoggedIn:"getDefaultLegalCountry"}}},{getDefaultLegalCountry:{stepExecution:Zs,results:{getLegalData:"getLegalData"}}},{getLegalData:{stepExecution:function(e){const t=jt("responsePayload");return Promise.all([ut(),Te.then(e=>e.call("inner","config.getL10n")).then(u._A)]).then(([n,o])=>{const r=(0,u.U2)(n,"legal.ADULT.disclosures"),s=[];r.forEach(e=>{s.push({code:e.disclosureCode,requiresActiveConsent:e.requiresActiveConsent,accepted:!e.requiresActiveConsent,content:o[`legal.${e.disclosureCode}_create`]})}),t.data.legal=s,$t("responsePayload",t),e("getMarketingData")})},results:{getMarketingData:"getMarketingData"}}},{getMarketingData:{stepExecution:function(e){const t=jt("responsePayload"),n=jt("promotionID");return ut().then(o=>{const r=(0,u.U2)(jt("guest"),"profile.ageBand")||"ADULT",s=(0,u.U2)(o,`newsletters.${r}.${n}`),i=new Set,a=[];s.forEach(e=>{i.has(e.name)||(i.add(e.name),a.push(Js(e)))}),t.data.marketing=a,$t("responsePayload",t),e()})},results:{}}},{getGuestLegalCountry:{stepExecution:ei,results:{checkProfile:"checkProfile"}}},{checkProfile:{stepExecution:ti,results:{hasOptedIntoAnything:"hasOptedIntoAnything"}}},{hasOptedIntoAnything:{stepExecution:function(e){const t=jt("guest");e((0,u.U2)(t,"marketing")?"filterOptedInMarketingLists":"getMarketingData")},results:{getMarketingData:"getMarketingData",filterOptedInMarketingLists:"filterOptedInMarketingLists"}}},{filterOptedInMarketingLists:{stepExecution:function(e){ut().then(t=>{const n=jt("guest"),o=(0,u.U2)(n,"marketing"),r=(0,u.U2)(n,"profile.ageBand"),s=jt("promotionID"),i=(0,u.U2)(t,`newsletters.${r}.${s}`),a=[];for(const e of i)a.push(...e.lists);const c=new Set(o.filter(e=>e.subscribed).map(e=>e.code)),l=a.filter(e=>!c.has(e.name)),d=jt("responsePayload");l.length?d.data.marketing=l.map(e=>Js(e)):(d.error_codes=Ws,d.data={}),$t("responsePayload",d),e()})},results:{}}}];const oi=[{runGetGuestWorkflow:{stepExecution:Bs,results:{guestIsLoggedIn:"getGuestLegalCountry",guestIsNotLoggedIn:"getDefaultLegalCountry"}}},{getDefaultLegalCountry:{stepExecution:Zs,results:{getLegalData:"prepareRequest"}}},{getGuestLegalCountry:{stepExecution:ei,results:{checkProfile:"checkProfile"}}},{checkProfile:{stepExecution:ti,results:{hasOptedIntoAnything:"prepareRequest"}}},{prepareRequest:{stepExecution:function(e){const t=(0,u.U2)(jt("workflowOptions"),"buData"),n=(0,u.U2)(t,"legal"),o=(0,u.U2)(t,"marketing");if(!n||!o)return e();$t("marketingParams",o);const r=(0,u.U2)(t,"campaignId"),s=jt("guestLocation")||jt("defaultLegalCountry");$t("requestPayload",{profile:{email:t.email,countryCodeDetected:s,region:s},legalAssertions:n.filter(e=>e.accepted).map(e=>e.code),campaign:r}),e("prepareMarketingPayload")},results:{prepareMarketingPayload:"prepareMarketingPayload"}}},{prepareMarketingPayload:{stepExecution:function(e){const t=jt("requestPayload"),{campaign:n}=t,o=jt("marketingParams"),r=jt("guest"),s=r&&r.marketing;s&&o.push(...r.marketing);const i=function(e){const t=e.filter(e=>e.subscribed),n=new Set,o=[];return t.forEach(e=>{n.has(e.code)||(o.push(e),n.add(e.code))}),o}(o);ut().then(o=>{const a=(0,u.U2)(o,"newsletters.ADULT",n);let c=!1;const l=[];if(s){const e=[];a.forEach(t=>e.push(...t.lists));const t={};e.forEach(e=>t[e.name]=e);for(const e of i){const n=t[e.code];if(!n){c=!0;break}l.push({code:n.name,subscribed:!0,textId:n.textId})}}else{const t={};a.forEach(e=>t[e.name]=e);for(const e of i){const n=t[e.code];if(!n){c=!0;break}{const e=n.lists.map(e=>({code:e.name,subscribed:!0,textId:n.textId}));l.push(...e)}}if(c)return $t("responsePayload",{data:{},error_codes:"NO_VALID_CAMPAIGN"}),e()}t.marketing=l,$t("requestPayload",t),e(r?"executeUpdate":"executeRequest")})},results:{executeUpdate:"executeUpdate",executeRequest:"executeRequest"}}},{executeRequest:{stepExecution:function(e){const t=jt("requestPayload");return Yt.guestMarketingOptIn(t).then(t=>{const n=(0,u.U2)(t,"error.keyCategory");!t.data||null!==t.error&&"ADVISORY"!==n?$t("responsePayload",{data:{},error_codes:Xs(t.error)}):$t("responsePayload",{data:"SUCCESS",error_codes:null}),e()}).catch(()=>{$t("responsePayload",{data:{},error_codes:Qs}),e()})},results:{}}},{executeUpdate:{stepExecution:function(e){const t=jt("requestPayload"),{marketing:n}=t,o=jt("guest"),r=(0,u.U2)(o,"profile.swid"),s=(0,u.U2)(o,"profile.email"),i=(0,u.U2)(o,"token.access_token"),a=He.SERVICE_UPDATE_GUEST,c={marketing:n};return fs(s).then(e=>Yt.guestUpdateBySWID({guest:c,swid:r,accessToken:i,eventName:a,deviceId:e})).then(t=>{const n=(0,u.U2)(t,"error.keyCategory");!t.data||null!==t.error&&"ADVISORY"!==n?($t("responsePayload",{data:{},error_codes:Xs(t.error)}),e()):($t("responsePayload",{data:"SUCCESS",error_codes:null}),e("reloadGuest"))}).catch(()=>{$t("responsePayload",{data:{},error_codes:Qs}),e()})},results:{reloadGuest:"reloadGuest"}}},{reloadGuest:{stepExecution:function(e){const t=jt("workflowOptions")||{};t.fullPayloadRequested=!0,t.forceRefresh=!0,$t("workflowOptions",t),new We("getGuest",co,null,()=>e()).runWorkflow()},results:{}}}],ri=["firstName","gender","lastName","middleName","prefix","suffix","languagePreference","pronunciationName","address.billing","address.home","address.school","address.shipping","address.work","phone.day","phone.mobile","phone.night","proposedDisplayName"],si=["email","username","address.other","phone.fax","dateOfBirth","password","displayName","region"],ii=["line1","line2","line3","city","stateProvince","postalCode","country","preferred"],ai=["number","internationalPrefix","countryCode","extension","preferred"];function ci(e,t){const n=Object.keys(e).filter(function(e){return 0===e.indexOf(`${t}.`)}).map(function(t){const n=t.split(".");return{type:n[1].toUpperCase(),field:n[2],value:e[t]}}).reduce(function(e,t){return(0,u.t8)(e,[t.type,t.field].join("."),t.value),e},{});return Object.keys(n).map(function(e){return Object.assign(n[e],{type:e})},[])}function ui(e){e.forEach(e=>{Object.keys(e).forEach(function(t){null===e[t]&&delete e[t]})})}function li(e,t,n){t.map(function(t){const o=(r=e,s=t.type,r.filter(e=>e.type===s));var r,s;return o.length&&(t[n]=o[0][n]),t})}function di(e){let t=!1;for(const n in e)"addressGuid"!==n&&"type"!==n&&"preferred"!==n&&(t=!0);return t}function pi(e){if("string"===typeof e)return e.trim();if("object"===typeof e)for(const t in e)e[t]=pi(e[t]);return e}function fi(e,t){const n={};for(const o in t)if(t.hasOwnProperty(o)){null!==e&&"object"===typeof e&&e.hasOwnProperty(o)||(n[o]=t[o]);if(null!==t[o]&&null!==e[o]&&!Array.isArray(t[o])&&!Array.isArray(e[o])&&"object"===typeof t[o]&&"object"===typeof e[o]){const r=fi(e[o],t[o]);Object.keys(r).length>0&&(n[o]=r)}else(e[o]!==t[o]||Array.isArray(t[o]))&&(n[o]=t[o]);null===e[o]&&""===t[o]&&delete n[o]}return n}function _i(e,t){return t=(0,u.d9)(t),Object.keys(t||{}).forEach(function(n){null===(0,u.U2)(t,n)&&(0,u.U2)(e,n)&&(0,u.t8)(t,n,e[n])}),(0,u.t8)(e,"etag",(0,u.U2)(t,"etag")),e.profile=hi(e.profile,t.profile),e.displayName=hi(e.displayName,t.displayName),e.marketing=hi(e.marketing,t.marketing),e}function hi(e,t){if(null===t||"object"!==typeof t||Array.isArray(t))return t;for(const n in t)t.hasOwnProperty(n)&&((e=e||{})[n]=hi(e[n],t[n]));return e}const Ei=[{runGetGuestWorkflow:{stepExecution:Bs,results:{guestIsLoggedIn:"parseInput",guestIsNotLoggedIn:{}}}},{parseInput:{stepExecution:function(e){const t=jt("workflowData"),n=function(e){return Object.keys(e).filter(function(t){return!("string"!==typeof e[t]||!e[t].trim())}).filter(function(e){for(let t=0;t<si.length;t++)if(e.startsWith(si[t]))return;return!0}).reduce(function(t,n){return t[n]=e[n].trim(),t},{})}((0,u.U2)(t,"guestData")||{}),o=function(e){return Object.keys(e).filter(function(e){return!e.includes("address.")&&!e.includes("phone.")&&"proposedDisplayName"!==e}).reduce(function(t,n){return t.profile[n]=e[n],t},{profile:{}})}(n);o.profile.addresses=ci(n,"address"),o.profile.phones=ci(n,"phone"),n.proposedDisplayName&&(o.displayName={proposedDisplayName:n.proposedDisplayName}),(0,u.t8)(t,"parsedGuest",o),$t("workflowData",t),e("success")},results:{success:"prepareUpdate",error:"close"}}},{prepareUpdate:{stepExecution:function(e){const t=jt("workflowData"),n=(0,u.U2)(t,"parsedGuest"),o=(0,u.d9)(n),r=(0,u.U2)(t,"guest"),s=(0,u.U2)(r,"profile.addresses"),i=(0,u.U2)(r,"profile.phones"),a=(0,u.U2)(o,"profile.addresses"),c=(0,u.U2)(o,"profile.phones");Array.isArray(s)&&Array.isArray(a)&&li(s,a,"addressGuid"),Array.isArray(i)&&Array.isArray(c)&&li(i,c,"phoneGuid");const l=function(e,t){if("undefined"===typeof e||"undefined"===typeof t)return{};const n=pi((0,u.d9)({profile:fi(e.profile||{},t.profile||{})||{},displayName:fi(e.displayName||{},t.displayName||{})||{}}));Object.keys(n.profile).forEach(function(e){""===n.profile[e]&&(n.profile[e]=null)}),Object.keys(n.displayName).forEach(function(e){""===n.displayName[e]&&(n.displayName[e]=null)}),(0,u.U2)(n.profile,"dateLastModified")&&delete n.profile.dateLastModified;(0,u.U2)(n.profile,"segmentDeletes")&&delete n.profile.segmentDeletes;return function(e,t,n){const o=["line1","line2","line3","postalCode","stateProvince","country","city","type"],r=(0,u.d9)((0,u.U2)(t,"profile.addresses")||[]),s=[],i={};((0,u.U2)(e,"profile.addresses")||[]).forEach(function(e){i[e.addressGuid]=e}),(0,u.U2)(n,"profile.addresses")&&delete n.profile.addresses;Array.isArray(r)&&r.length&&(r.forEach(function(e){const t=e.addressGuid,n={};o.forEach(function(t){n[t]=e[t]?e[t]:null}),"undefined"!==typeof(0,u.U2)(i,[t,"addressGuid"].join("."))&&(n.addressGuid=t,a(n).forEach(function(o){i[t][o]===e[o]&&delete n[o]})),a(n).length&&s.push(n)}),s.length&&(0,u.t8)(n,"profile.addresses",s));function a(e){return Object.keys(e).filter(function(e){return-1===["preferred","addressGuid","type"].indexOf(e)})}}(e,t,n),function(e,t,n){if(!(0,u.U2)(n,"profile"))return;"undefined"!==typeof(0,u.U2)(n,"profile.phones")&&delete n.profile.phones;if(Array.isArray((0,u.U2)(t,"profile.phones"))){const s=[];t.profile.phones.forEach(function(t){let n,i;t.phoneGuid&&!t.number?s.push({phoneGuid:t.phoneGuid}):t.number&&t.type&&(n=r(e,t),n?(i=fi(n,t),Object.keys(i).length>0&&(i.phoneGuid=t.phoneGuid,i.type=t.type,s.push(i))):s.push(o({number:t.number,type:t.type,internationalPrefix:t.internationalPrefix,countryCode:t.countryCode})))}),s.length&&(n.profile.phones=s)}function o(e){const t={};return Object.keys(e).forEach(function(n){let r;"object"===typeof e[n]?(r=o(e[n]),Object.keys(r).length>0&&(t[n]=r)):null!=e[n]&&(t[n]=e[n])}),t}function r(e,t){let n;const o=(0,u.U2)(e,"profile.phones");return t.phoneGuid&&o&&(n=o.filter(function(e){return e.phoneGuid===t.phoneGuid})[0]),n}}(e,t,n),function(e,t,n){const o=(0,u.U2)(e,"marketing");let r=(0,u.U2)(t,"marketing");const s={};if((o||[]).forEach(function(e){s[e.code]=e}),Array.isArray(r)&&r.length&&(r=r.filter(function(e){return e.subscribed!==(0,u.U2)(s,[e.code,"subscribed"].join("."))}),r.length))return n.marketing=r,n.marketing}(e,t,n),function(e,t,n){const o=e.legalAssertions||[],r=[];(t.legalAssertions||[]).forEach(function(e){-1===o.indexOf(e)&&r.push(e)}),r.length>0&&(n.legalAssertions=r)}(e,t,n),Object.keys(n).forEach(function(e){"object"!==typeof n[e]||n[e]&&0!==Object.keys(n[e]).length||delete n[e]}),n}(r,o);if(Array.isArray((0,u.U2)(l,"profile.addresses"))){ui(l.profile.addresses);const e=l.profile.addresses.filter(di);e.length>0?l.profile.addresses=e:delete l.profile.addresses}Array.isArray((0,u.U2)(l,"profile.phones"))&&ui(l.profile.phones),(0,u.t8)(t,"modifiedGuest",l),$t("workflowData",t),e("success")},results:{success:"execute"}}},{execute:{stepExecution:function(e){const t=jt("workflowData"),n=(0,u.U2)(t,"guest"),o=(0,u.U2)(n,"profile.email"),r=(0,u.U2)(n,"etag"),s={...(0,u.U2)(t,"modifiedGuest"),etag:r},i=(0,u.U2)(n,"profile.swid"),a=(0,u.U2)(n,"token.access_token");return fs(o).then(e=>Yt.guestUpdateBySWID({guest:s,swid:i,accessToken:a,etag:r,deviceId:e,eventName:He.API_SET_PPC})).then(t=>{const o=(0,u.U2)(t,"error.keyCategory");!t.data||null!==t.error&&"ADVISORY"!==o||$t("workflowData",{...jt("workflowData"),guest:_i(n,t.data)}),$t("workflowErrors",(0,u.U2)(t,"error.errors")),e()},t=>{$t("workflowErrors",(0,u.U2)(t,"error.errors")),e()})},results:{}}}];function gi(e,t){return(e=e||[]).reduce((e,n)=>("undefined"===typeof e[n[t]]&&(e[n[t]]=n),e),{})}function mi(e){if((e=e||{})&&"EDITABLE"===e.editable){const t=e.type||{};return Object.keys(t).reduce((e,n)=>{const o=t[n]||{};return e[n]=Object.keys(o).reduce((e,t)=>("EDITABLE"===o[t].editable&&"type"!==t&&(e[t]=null),e),{}),e},{})}return null}function yi(e){const t=e.existingProfile[e.type]||e.template[e.type]||e.template.DEFAULT||null,n=e.config[e.type]||e.config.DEFAULT||null;return t&&n&&Object.keys(t).forEach(o=>{if(e.allowedFields.indexOf(o)>-1){const r=e.fieldName.split(".");r.push(o);const s=r.join(".");e.editableProfile.data[s]=t[o]||null,e.editableProfile.required[s]=(n[o]||{}).required||!1}}),e.editableProfile}const Ii=[{runGetGuestWorkflow:{stepExecution:Bs,results:{guestIsLoggedIn:"getEditableAndRequiredFields",guestIsNotLoggedIn:{}}}},{getEditableAndRequiredFields:{stepExecution:function(e){const t=jt("guest");let n={data:{},required:{}};try{ut().then(o=>{const r=ri,s=`compliance.ageBands.${t.profile.ageBand}.UPDATE`,i=(0,u.U2)(o,s),a=gi(t.profile.addresses,"type"),c=gi(t.profile.phones,"type"),l=mi((0,u.U2)(o,`${s}.addresses`)),d=mi((0,u.U2)(o,`${s}.phones`)),p=(0,u.U2)(o,"displayName"),f=(0,u.U2)(p,"enabled");for(const e of r){const o=(e.split(".")[1]||"").toUpperCase();e.includes("address")&&i.addresses?n=yi({existingProfile:a,template:l,config:i.addresses.type,allowedFields:ii,fieldName:e,editableProfile:n,type:o}):e.includes("phone")&&i.phones?n=yi({existingProfile:c,template:d,config:i.phones.type,allowedFields:ai,fieldName:e,editableProfile:n,type:o}):e.toLowerCase().includes("displayname")&&f?n.data[e]=(0,u.U2)(t,`displayName.${e}`):i[e]&&(n.data[e]=(0,u.U2)(t,`profile.${e}`),n.required[e]=(0,u.U2)(i,e).required||!1)}return $t("editableFields",n),Promise.resolve(e())})}catch(e){$t("editableFields",{error_codes:Nt,data:{}})}},results:{}}}];let Oi;function Ti(){return s.log("TrustState#watch"),ys().then(e=>{if(Ri(),(0,u.U2)(e,"state")===gs)return s.info("In low trust"),Ai(),void Os();!function(e=Ve){Oi=setTimeout(()=>{Ai(),Os()},e)}((0,u.U2)(e,"timeLeft"))}).catch(()=>{Ai(),Ri()})}function Ri(){clearTimeout(Oi),Oi=void 0}function Ai(){ct(ro)}const wi=[{checkState:{stepExecution:function(e){const t=()=>{if(!0===jt("wasLoggedIn"))return e("syncLoggedOut");e()};return $e().then(n=>n?($t("loggedIn",!0),!1===jt("wasLoggedIn")?e("syncLoggedIn"):!he(n)||Ee(n)?e("tokenRefresh"):void e()):t()).catch(t)},results:{syncLoggedIn:"syncLoggedIn",syncLoggedOut:"syncLoggedOut",tokenRefresh:"tokenRefreshSubflow"}}},{tokenRefreshSubflow:{stepExecution:Es,results:{}}},{syncLoggedIn:{stepExecution:function(e){return Promise.all([Vn(),Te]).then(([t,n])=>n.call("inner","setGuest",t).then(()=>{n.call("inner","reloadConfigFromBundlerIfChanged");const o=(0,u.U2)(t,"profile.ageBand")===Dt;X((0,u.U2)(t,"profile.swid"),o),ct(no,t),Ti(),$t("loggedIn",!0),e()})).catch(e)},results:{}}},{syncLoggedOut:{stepExecution:function(e){const t=Z();return Te.then(n=>n.call("inner","guest.logout").then(()=>{Ri(),t&&t.startsWith("{")&&X((0,u.Vj)()),io(qn),Kt(),$t("loggedIn",!1),e()}).catch(e))},results:{}}}];const Si={CANCEL_BY_USER:"CANCEL_BY_USER",CODE_LOCKOUT:"CODE_LOCKOUT",EMAIL_VERIFICATION_CALLBACK:"EMAIL_VERIFICATION_CALLBACK",GUEST_LOGOUT:"GUEST_LOGOUT",LAUNCH_OTP_CALLBACK:"LAUNCH_OTP_CALLBACK",LICENSE_PLATE_CALLBACK:"LICENSE_PLATE_CALLBACK",PAGE_VIEW:"PAGE_VIEW",REAUTH_CALLBACK:"REAUTH_CALLBACK",REDEEM_SESSION_TRANSFER_CALLBACK:"REDEEM_SESSION_TRANSFER_CALLBACK",RUN_WORKFLOW:"runWorkflow"};const Ci=[{redeemSessionTransfer:{stepExecution:function(e){const t=jt("workflowData"),n=(0,u.U2)(t,"sessionTransferKey")||"";return Yt.authenticateViaSessionTransferKey({sessionTransferKey:n}).then(t=>{t&&$t("redeemResponse",{...t});if(((0,u.U2)(t,"error.errors")||[]).length)return e("parseErrors");e("createSession")}).catch(e)},results:{createSession:"createSession",parseErrors:"parseErrors"}}},{parseErrors:{stepExecution:function(e){const t=jt("redeemResponse")||{},n=t.parsedErrors||{};return n.isInvalidSessionTransferKeyError?e():n.isPPU&&200===t.status||200===t.status||n.isAdvisoryError?e("createSession"):n.isPPU&&400===t.status?e("ppu"):n.isGating?e("gatingSubflow"):n.isInvalidRefreshToken?e("reauth"):void e()},results:{ppu:"ppuSubflow",createSession:"createSession",gatingSubflow:"gatingSubflow"}}},{ppuSubflow:{stepExecution:function(e){const t=jt("redeemResponse")||{};return S(Si.REDEEM_SESSION_TRANSFER_CALLBACK,()=>{C(Si.REDEEM_SESSION_TRANSFER_CALLBACK),e()}),Te.then(e=>{e.call("inner","runWorkflow",{apiCallback:{name:Si.REDEEM_SESSION_TRANSFER_CALLBACK},name:vs,step:"ppuSubflow",guest:t.data,workflowData:{parsedErrors:t.parsedErrors,ppu:{errors:t.error.errors}}}).then(()=>{wn.showLightbox()})})},results:{}}},{createSession:{stepExecution:function(e){const t=jt("redeemResponse").data;if(t)return Rs(t).then(()=>{$t("redeemSuccess",!0),e()}).catch(t=>{const n=(0,u.U2)(t,"message")||"";s.error(`Error in session-transfer create session call: ${n}`),e("error")})},results:{error:"parseErrors"}}},{gatingSubflow:{stepExecution:function(e){const t=jt("redeemResponse")||{};return S(Si.REDEEM_SESSION_TRANSFER_CALLBACK,()=>{C(Si.REDEEM_SESSION_TRANSFER_CALLBACK),e()}),Te.then(e=>{e.call("inner","runWorkflow",{apiCallback:{name:Si.REDEEM_SESSION_TRANSFER_CALLBACK},name:vs,step:"gatingSubflow",guest:t.data,workflowData:{parsedErrors:t.parsedErrors,ppu:{errors:t.error.errors}}}).then(()=>{wn.showLightbox()})})},results:{}}}];const Ni=[{redeemMagicLinkToken:{stepExecution:function(e){const t=jt("workflowData"),n=(0,u.U2)(t,"magicLinkToken")||"";return async function(e){const t=ke().toLocaleLowerCase(),n="prod"===t?"":"-qa",o=(await F()).clientId,r={prod:"PROD",stage:"STAGE"}[t]||"QA",i=`https://login${n}.disney.com/orchestration-adapter/v1/client`;try{const t=await fetch(`${i}/${o}-${r}/login/magic-link`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(e){s.error("Error:",e)}}(n).then(t=>t.data?(t=>($t("redeemResponse",(e=>{const{data:{oneIdGuest:t={},oneIdToken:n={}}={}}=e;return{data:{...t,token:{...n}}}})(t)),e("createSession")))(t):(t=>{const n=(0,u.U2)(t,"error.errors")||[];return s.error("Error: Fallback to login due to error:",n),e("launchLogin")})(t)).catch(()=>e("launchLogin"))},results:{createSession:"createSession",launchLogin:"launchLogin"}}},{launchLogin:{stepExecution:$s,results:{}}},{createSession:{stepExecution:function(e){const t=jt("redeemResponse").data;if(t)return Rs(t).then(()=>{$t("redeemSuccess",!0),e()}).catch(t=>{const n=(0,u.U2)(t,"message")||"";s.error(`Error in magic-link create session call: ${n}`),e("error")})},results:{}}}],vi={INITIALIZATION:Vs,GET_GUEST:co,GUEST_FLOW:js,GET_INLINE_NEWSLETTERS:ni,SET_INLINE_NEWSLETTERS:oi,GET_EDITABLE_AND_REQUIRED_FIELDS:Ii,SESSION_STATE_TASKS:wi,SET_PPC:Ei,TOKEN_REFRESH:hs,REDEEM_SESSION_TRANSFER:Ci,REDEEM_MAGIC_LINK_TOKEN:Ni};function Li({name:e,step:t=null,workflowOptions:n=null,onComplete:o=null,persistWorkflowOptions:r=!1}){n&&$t("workflowOptions",n);new We(e,vi[e],t,()=>{r||Bt("workflowOptions"),o&&o()}).runWorkflow()}const bi={LOCAL:"https://qa.registerdisney.go.com/jgc/v8",DEV:"https://qa.registerdisney.go.com/jgc/v8",QA:"https://qa.registerdisney.go.com/jgc/v8",STAGE:"https://stg.registerdisney.go.com/jgc/v8",VALID:"https://val.registerdisney.go.com/jgc/v8",PROD:"https://registerdisney.go.com/jgc/v8"};let ki;function Pi(){$t("sessionTimerPaused",!0),clearTimeout(ki)}function Di(e){$t("sessionTimerPaused",!1),$t("loggedIn",e),Ui()}function Ui(){clearTimeout(ki),$t("wasLoggedIn",jt("loggedIn")||!1),Li({name:"SESSION_STATE_TASKS",onComplete:()=>{ki=setTimeout(Ui,Fe)},persistWorkflowOptions:!0})}var Gi=n(486),Mi=n.n(Gi);let xi,Fi,Vi;function $i(e=""){s.debug(`api/init: innerVersion "${e}"`),s.debug(`api/init: window.ONEID_WEB_SDK_VERSION "${window.ONEID_WEB_SDK_VERSION}"`),Ye.lightbox_version=e,e!==window.ONEID_WEB_SDK_VERSION&&st({[He.ACTION_NAME]:He.LOG_VERSION_MISMATCH,[He.INFO]:`outer(${window.ONEID_WEB_SDK_VERSION}),inner(${e})`}),Vi=!0,Fi()}function ji(){return Vi}function Bi(){if(Vi){if(ct(eo,Zt),window.ONEID_WEB_SDK_MIGRATION){const e=Mi().defer();return e.reject(Zt),e.promise}return Promise.reject(Zt)}tt({conversationId:(0,u.Vj)()});const e=ot(He.API_INIT),t=Ln(9e4),n=function(){const e=new Promise(e=>{const t=wn.createInner();t.onload=()=>{e(t)}}),t=new Promise(e=>{const t=wn.createResponder();t.onload=()=>{e(t)}});return Promise.all([e,t])}().then(Ki).then(Wi),o=Promise.race([n,t]).then(()=>new Promise(n=>{((0,u.U2)(F(),"debug")||{}).tealiumDebug&&Te.then(e=>e.message("inner","turnOnDebugTealiumTracking"));const o=ke()||"PROD",r=F()||{},{clientId:i}=r,a=r.langPref;var c;c={clientId:`${i}-${o}`,endpoint:bi[o],language:a},qt={...qt,...c},Li({name:"INITIALIZATION",onComplete:function(){t.cancel(),s.debug("OneID initialization complete"),e.send();const o=jt("guest"),r={loggedIn:!!(o||{}).token,guest:o||null};var i;ct(to,r),Kt(),i=r.loggedIn,s.log("SessionTimer#startTimer"),$t("loggedIn",i),Ui(),r.loggedIn&&Ti(),n(r)}.bind(this)});const l=document.activeElement,d=document.getElementById("oneid-iframe");if(l===d){const e=document.getElementById("oneid-wrapper");e.style.setProperty("display","block"),d.setAttribute("tabindex","0"),setTimeout(()=>{l.blur(),e.style.setProperty("display","none")},200)}})).catch(({errorCodes:t,errorCategory:n})=>(e.send({[He.ERROR_CATEGORY]:n||yn,[He.ERROR_CODES]:t||hn}),ct(eo,`${hn}: ${t}`),Promise.reject(`${hn}: ${t}`)));if(window.ONEID_WEB_SDK_MIGRATION){const e=Mi().defer();return o.then(t=>e.resolve(t)).catch(t=>e.reject(t)),e.promise}return o}function Ki([e,t]=frames){return new Promise((n,o)=>{const r={frames:{outer:{window,origin:window.origin||window.location&&window.location.origin,channels:["inner","responder"]},inner:{window:e.contentWindow,origin:new URL(e.src).origin,channels:["outer","responder"]},responder:{window:t.contentWindow,origin:new URL(t.src).origin,channels:["inner","outer"]}}};Promise.all([me(r),Te]).then(()=>{s.debug("Cross frame communication initialized"),n()}).catch(()=>o({errorCodes:en}))})}function Wi(){return xi}xi=new Promise(e=>Fi=e),Vi=!1;const Hi={doNotDisturb:ca({preConditions:[ea],method:function([e]){if("boolean"!==typeof e)return Promise.reject({errorCodes:on});return ho(e),Promise.resolve()},actionName:He.API_SET_DO_NOT_DISTURB,logInfoKey:"flag"}),forceTokenRefresh:ca({preConditions:[ea,Zi],method:function([e]){Bt("tokenRefreshResponse"),tt(e);const t=Cn(),n=new Promise(e=>{Li({name:"TOKEN_REFRESH",step:"forceRefresh",onComplete:()=>{const t=jt("tokenRefreshResponse"),n=(0,u.U2)(t,"data.token"),o=(0,u.U2)(t,"error.keyCategory")||"",r=[];((0,u.U2)(t,"error.errors")||[]).forEach(e=>{r.includes(e.code)||r.push(e.code)}),Bt("tokenRefreshResponse"),e({errorCategory:o,errorCodes:r,newTokens:n})}})});return Promise.race([n,t]).then(({errorCategory:e,errorCodes:n,newTokens:o})=>(t.cancel(),o?Promise.resolve(o):e||n.length?Promise.reject({errorCategory:e,errorCodes:n.join(",")}):(st({[He.ACTION_NAME]:He.LOG_APPLICATION_ERROR,[He.ERROR_CATEGORY]:yn,[He.INFO]:"api(forceTokenRefresh),data(missing_tokens,no_errors)"}),Promise.reject({errorCategory:yn,errorCodes:In}))))},actionName:He.API_FORCE_TOKEN_REFRESH}),getEditableProfileFields:ca({preConditions:[ea,Zi],method:function([e]){tt(e);const t=Cn(),n=vn().then(Vn).then(t=>t.profile&&0===Object.keys(t.profile).length?Promise.reject({errorCodes:dn}):new Promise(n=>{Li({name:"GET_EDITABLE_AND_REQUIRED_FIELDS",workflowOptions:bn(e,t),onComplete:n})})).then(()=>{const e=jt("editableFields");return e.error_codes&&e.error_codes.length>0?Promise.reject({errorCodes:e.error_codes}):Promise.resolve()});return Promise.race([n,t]).then(()=>{t.cancel();const e=jt("editableFields");return Promise.resolve(e)})},actionName:He.API_GET_PPC}),getGuest:ca({preConditions:[ea,Zi],method:function(e){const[t=!1,n={}]=e,o=!0===t;tt(n);const r=Cn(),s=vn().then(()=>new Promise((e,t)=>{const r={forceRefresh:(0,u.U2)(n,"forceRefresh")||!1,fullPayloadRequested:!!o};Li({name:"GET_GUEST",workflowOptions:bn(n,r),onComplete:()=>{const n=jt("getGuestResponse");if(Bt("getGuestResponse"),n){const o=(0,u.U2)(n,"error.keyCategory")||"FAILURE_BY_DESIGN";let s=[];return(0,u.U2)(n,"error.errors")&&(0,u.U2)(n,"error.errors").forEach(function(e){-1===s.indexOf(e.code)&&s.push(e.code)}),s=s.length?s.join(","):"UNABLE_TO_RETRIEVE_GUEST_DATA",r.localCopyReturned=!1,jt("logoutType")?t({errorCodes:s,errorCategory:o,[He.INFO]:r}):(0,u.U2)(n,"data.profile")?e(jt("guest")||null):t({errorCodes:s,errorCategory:o,[He.INFO]:r})}e(jt("guest")||null)}})}));return Promise.race([s,r]).then(e=>(r.cancel(),Promise.resolve(e)))},actionName:He.API_GET_GUEST_DATA,logInfoKey:"fullPayload"}),getGuestNewsletters:ca({preConditions:[ea,Zi],method:function([e]){tt(e);const t=Cn(),n=Vn().then(e=>(0,u.U2)(e,"marketing")||null);return Promise.race([n,t]).then(e=>(t.cancel(),Promise.resolve(e)))},actionName:He.API_GET_GUEST_NEWSLETTERS}),getInlineNewsletters:ca({preConditions:[ea],method:function(e){const[t,n]=e;tt(n);const o=Cn(),r=ut().then(e=>e?Nn(e,t)?Promise.resolve():Promise.reject({errorCodes:_n}):Promise.reject({errorCodes:fn})).then(()=>new Promise(e=>{$t("promotionID",t),Li({name:"GET_INLINE_NEWSLETTERS",workflowOptions:bn(n),onComplete:e})})).then(()=>{const e=jt("responsePayload");return e.error_codes&&e.error_codes.length>0?Promise.reject({errorCodes:e.error_codes}):Promise.resolve()}).finally(()=>{Bt("promotionID")});return Promise.race([r,o]).then(()=>{o.cancel();const e=jt("responsePayload");return Promise.resolve(e)})},actionName:He.API_GET_INLINE_NEWSLETTERS,logInfoKey:"promotionId"}),getTrustStateStatus:ca({preConditions:[ea,Zi],method:function([e]){tt(e);const t=Cn();let n;const o=ys().then(({state:e})=>n=e);return Promise.race([o,t]).then(()=>(t.cancel(),Promise.resolve(n)))},actionName:He.API_GET_TRUST_STATE_STATUS}),init:Bi,getConfig:function(){return qi},getLicensePlateDataBag:ca({preConditions:[ea],method:function([e={},t]){tt(t);const{pairingCode:n=""}=e;if(!n||0===n.length)return Promise.reject({errorCodes:sn});const o=bn(t);return $t("workflowOptions",o),On(n)},actionName:He.API_GET_LICENSE_PLATE_DATA_BAG}),getLoggedInStatus:ca({preConditions:[()=>xi],method:ta,actionName:He.API_GET_LOGGED_IN_STATUS}),launchEmailVerification:ca({preConditions:[ea,Zi],method:function([e]){return tt(e),new Promise((t,n)=>{const o="EMAIL_ALREADY_VERIFIED";vn().then(Vn).then(t=>{if(t.profile.emailVerified)throw new Error(o);return Te.then(n=>n.call("inner","runWorkflow",{apiCallback:{name:Si.EMAIL_VERIFICATION_CALLBACK},guest:t,name:ws,workflowOptions:bn(e)}))}).then(()=>{S(Si.EMAIL_VERIFICATION_CALLBACK,({errorCategory:e,errorCodes:o,wasSuccess:r})=>{C(Si.EMAIL_VERIFICATION_CALLBACK),r?t():n({errorCategory:e,errorCodes:o})}),wn.showLightbox()}).catch(e=>{C(Si.EMAIL_VERIFICATION_CALLBACK),e.message!==o?n(new Error(In)):t()})})},actionName:He.API_LAUNCH_EMAILVERIFICATION,newRelicFlowName:(0,u.hK)(ws)}),launchGuestFlow:ca({preConditions:[ea,Ji],method:function([e,t]){tt(t);const n=Cn(),o=new Promise(n=>{Li({name:"GUEST_FLOW",workflowOptions:bn(t,{guestFlowEmail:e}),onComplete:n})});return Promise.race([o,n]).then(()=>{const e=`SUCCESS_LAUNCH_${jt("guestFlowName")}_${jt("guestFlowEmail")?"WITH":"WITH_OUT"}_EMAIL`;return n.cancel(),Bt("guestFlowCode"),Bt("guestFlowName"),Bt("guestFlowEmail"),Promise.resolve(e)})},actionName:He.API_LAUNCH_GUESTFLOW}),launchIdentityFlow:ca({preConditions:[ea,Ji],method:function([e,t]){tt(t);const n=Cn(),o=vn().then(()=>{const n=bn(t),o={name:Cs,workflowOptions:n},r=(0,u.U2)(t,"optionalConfigs.providedProfile");return r&&(o.guestChanges={profile:r}),o.workflowData={isIdentityFlow:!0},e&&(o.workflowData.loginValue=e,o.workflowData.skipPrompt=!0),Te.then(e=>e.call("inner","runWorkflow",o))});return Promise.race([o,n]).then(()=>(n.cancel(),wn.showLightbox(),Promise.resolve()))},actionName:He.API_LAUNCH_IDENTITYFLOW,newRelicFlowName:(0,u.hK)(Cs)}),launchLicensePlate:ca({preConditions:[ea],method:function([e={}]){tt(e);const{pairingCode:t="",authenticationFlow:n,deviceName:o,isLicensePlateLaunched:r=!0,showSuccessScreen:s}=e;if(!t||0===t.length)return Promise.reject({errorCodes:sn});return new Promise((i,a)=>{Pi(),vn().then(Vn).then(i=>Te.then(a=>a.call("inner","runWorkflow",{apiCallback:{name:Si.LICENSE_PLATE_CALLBACK},guest:i,name:Ns,workflowData:{authenticationFlow:n,deviceName:o,isLicensePlateLaunched:r,pairingCode:t,showSuccessScreen:s},workflowOptions:bn(e)}))).then(()=>{S(Si.LICENSE_PLATE_CALLBACK,({errorCodes:e=Nt,wasSuccess:t=!1})=>{if(C(Si.LICENSE_PLATE_CALLBACK),ta().then(e=>Di(e)),t)return i();a({errorCategory:kt,errorCodes:e})}),wn.showLightbox()}).catch(()=>{ta().then(e=>Di(e)),a(new Error(In))})})},actionName:He.API_LAUNCH_LICENSE_PLATE,sendAfterPreconditions:!0,newRelicFlowName:(0,u.hK)(Ns)}),launchLogin:ca({preConditions:[ea,Ji],method:function([e]){tt(e);const t=Cn(),n=vn().then(()=>{const t=bn(e),n={name:vs,workflowOptions:t},o=(0,u.U2)(e,"optionalConfigs.email");return o&&(n.workflowData={loginValue:o}),Te.then(e=>e.call("inner","runWorkflow",n))});return Promise.race([n,t]).then(()=>(t.cancel(),wn.showLightbox(),Promise.resolve()))},actionName:He.API_LAUNCH_LOGIN,newRelicFlowName:(0,u.hK)(vs)}),launchNewsletters:ca({preConditions:[ea],method:function(e){const[t,n]=e;tt(n);const o=Cn();let r;const s=Vn().then(e=>(r=e,ut())).then(e=>e?Nn(e,t)?Promise.resolve(t):Promise.reject({errorCodes:on}):Promise.reject({errorCodes:fn})).then(e=>Te.then(t=>{const o=bn(n,{promotionId:e});t.call("inner","runWorkflow",{guest:r,name:Ls,workflowOptions:o})}));return Promise.race([s,o]).then(()=>(o.cancel(),wn.showLightbox(),Promise.resolve()))},actionName:He.API_LAUNCH_NEWSLETTERS,logInfoKey:"promotionId",newRelicFlowName:(0,u.hK)(Ls)}),launchProfile:ca({preConditions:[ea,Zi],method:function([e]){tt(e);const t=Cn(),n=bn(e),o=vn().then(Vn).then(e=>Te.then(t=>t.call("inner","runWorkflow",{guest:e,name:Ds,workflowOptions:n})));return Promise.race([o,t]).then(()=>(t.cancel(),wn.showLightbox(),Promise.resolve()))},actionName:He.API_LAUNCH_PROFILE,newRelicFlowName:(0,u.hK)(Ds)}),launchReauth:ca({preConditions:[ea,Zi],method:function([e]){return tt(e),new Promise((t,n)=>{vn().then(Vn).then(t=>Te.then(n=>n.call("inner","runWorkflow",{apiCallback:{name:Si.REAUTH_CALLBACK},guest:t,name:ks,workflowOptions:bn(e)}))).then(()=>{S(Si.REAUTH_CALLBACK,({errorCodes:e=Nt,wasSuccess:o=!1})=>{if(C(Si.REAUTH_CALLBACK),o)return Bt("tokenData"),Vn().then(e=>t(e));n({errorCategory:kt,errorCodes:e})}),wn.showLightbox()}).catch(()=>n(new Error(In)))})},actionName:He.API_LAUNCH_REAUTH,sendAfterPreconditions:!0,newRelicFlowName:(0,u.hK)(ks)}),launchRegistration:ca({preConditions:[ea,Ji],method:ia,actionName:He.API_LAUNCH_REGISTRATION,newRelicFlowName:(0,u.hK)(Ps)}),logout:ca({preConditions:[ea,ta],method:function(){const{clientId:e}=F(),t=ke(),n=Cn();Ri(),Pi();const o=Vn().then(n=>{Kt();const o=(0,u.U2)(n,"profile.swid"),r=(0,u.U2)(n,"token");return Fn(),o&&r?(Ht().then(e=>{const{s2CookieName:t,s2Domain:n}=e,o=T.getCookieDomain();I(t,n,"/"),o&&I(t,o,"/")}),Jn(o,r).then(()=>Te.then(n=>(n.message("inner","guest.logout"),X((0,u.Vj)()),n.call("responder","guest.logout",`${e}-${t}`))))):(st({[He.ACTION_NAME]:He.LOG_MISSING_GUEST_DATA_ON_LOGOUT,[He.INFO]:`swid(${o?"present":"missing"}),tokens(${r?"present":"missing"})`}),Te.then(n=>(n.message("inner","guest.logout"),X((0,u.Vj)()),n.call("responder","guest.logout",`${e}-${t}`))))});return Promise.race([o,n]).then(()=>(Di(!1),n.cancel(),io(Wn),Promise.resolve()))},actionName:He.API_LOGOUT}),on:S,off:C,setEditableProfileFields:ca({preConditions:[ea,Zi],method:function(e){const[t,n]=e;if(tt(n),0===e.length||t&&0===Object.keys(t).length)return Promise.reject({errorCodes:ln});const o=/^phone\.mobile/;if(Object.keys(t).find(e=>o.test(e)))return Promise.reject({errorCodes:En});const r=Cn(),s=vn().then(Vn).then(e=>e.profile&&0===Object.keys(e.profile).length?Promise.reject({errorCodes:dn}):($t("workflowData",{guestData:t,guest:e}),new Promise(e=>{Li({name:"SET_PPC",onComplete:e})}))).then(()=>{const e=jt("workflowErrors")||[];return e.length?Promise.reject({errorCodes:e[0].code}):Promise.resolve()});return Promise.race([s,r]).then(()=>{r.cancel();const{guest:e}=jt("workflowData");return Bn({guest:e,token:e.token},!0),{data:e}}).finally(()=>{Bt("workflowErrors")})},actionName:He.API_SET_PPC}),setInlineNewsletters:ca({preConditions:[ea],method:function(e){const[t,n]=e;if(tt(n),!e||!t)return Promise.reject({errorCodes:ln});const o=Cn(),r=ut().then(e=>e?Nn(e,t.campaignId)?new Promise(e=>{Li({name:"SET_INLINE_NEWSLETTERS",workflowOptions:bn(n,{buData:t}),onComplete:e})}):Promise.reject({errorCodes:zs}):Promise.reject({errorCodes:fn})).then(()=>{const e=jt("responsePayload");return e.error_codes&&e.error_codes.length>0?Promise.reject({errorCodes:e.error_codes}):Promise.resolve(e)});return Promise.race([r,o]).then(()=>(o.cancel(),Promise.resolve()))},actionName:He.API_SET_INLINE_NEWSLETTERS}),redeemSessionTransferKey:ca({preConditions:[ea,Ji],method:function([e,t]){if(tt(t),!e)return Promise.reject({errorCodes:on});return new Promise((n,o)=>{vn().then(()=>{$t("workflowData",{sessionTransferKey:e});Li({name:"REDEEM_SESSION_TRANSFER",workflowOptions:bn(t),onComplete:()=>{const e=jt("redeemSuccess")||!1,t=jt("redeemResponse");if(!(0,u.U2)(t,"data.profile")){const e=(0,u.U2)(t,"error.keyCategory")||yn;let n=[];return(0,u.U2)(t,"error.errors")&&(0,u.U2)(t,"error.errors").forEach(function(e){n.includes(e.code)||n.push(e.code)}),n=n.length?n.join(","):Nt,o({errorCategory:e,errorCodes:n})}if(e)return n({data:t.data});o({errorCategory:yn,errorCodes:Nt})}})}).catch(()=>{o(new Error(In))})})},actionName:He.API_REDEEM_SESSION_TRANSFER,newRelicFlowName:(0,u.hK)(Us)}),redeemMagicLinkToken:ca({preConditions:[ea,Ji],method:function([e,t]){if(tt(t),!e)return Promise.reject({errorCodes:on});return new Promise((n,o)=>{vn().then(()=>{$t("workflowData",{magicLinkToken:e});Li({name:"REDEEM_MAGIC_LINK_TOKEN",workflowOptions:bn(t),onComplete:()=>{const e=jt("redeemSuccess")||!1,t=jt("redeemResponse");if(!(0,u.U2)(t,"data.profile")){const e=(0,u.U2)(t,"error.keyCategory")||yn;let n=[];return(0,u.U2)(t,"error.errors")&&(0,u.U2)(t,"error.errors").forEach(function(e){n.includes(e.code)||n.push(e.code)}),n=n.length?n.join(","):Nt,o({errorCategory:e,errorCodes:n})}if(e)return n({data:t.data});o({errorCategory:yn,errorCodes:Nt})}})}).catch(()=>{o(new Error(In))})})},actionName:He.API_REDEEM_MAGIC_LINK_TOKEN,newRelicFlowName:(0,u.hK)(Gs)}),launchOTP:ca({preConditions:[ea,Zi],method:function([e,t,n=!0]){return tt(t),new Promise((o,r)=>{vn().then(()=>Te.then(o=>o.call("inner","runWorkflow",{apiCallback:{name:Si.LAUNCH_OTP_CALLBACK},name:Ms,step:"isGuestEmailLoaded",workflowData:{onDemandOTP:{reason:e,forceOTP:n}},workflowOptions:bn(t)}))).then(()=>{S(Si.LAUNCH_OTP_CALLBACK,({errorCodes:e=Nt,wasSuccess:t=!1,recoveryToken:n})=>{if(C(Si.LAUNCH_OTP_CALLBACK),t&&n)return o(n);r({errorCategory:kt,errorCodes:e})}),wn.showLightbox()}).catch(()=>{r(new Error(In))})})},actionName:He.API_LAUNCH_OTP_ONDEMAND,newRelicFlowName:(0,u.hK)(Ms)}),launchLoginBySWID:ca({preConditions:[ea],method:function([e,t]){if(tt(t),!e)return Promise.reject({errorCodes:an});return new Promise((n,o)=>{vn().then(()=>Te.then(n=>n.call("inner","runWorkflow",{apiCallback:{name:Si.LAUNCH_LOGIN_BY_SWID_CALLBACK},name:bs,step:"executeRecoveryMethodsBySWID",workflowData:{OTPLoginBySWID:{swid:e}},workflowOptions:bn(t)}))).then(()=>{S(Si.LAUNCH_LOGIN_BY_SWID_CALLBACK,({errorCodes:e=Nt,wasSuccess:t=!1})=>{if(C(Si.LAUNCH_LOGIN_BY_SWID_CALLBACK),t)return n();o({errorCategory:kt,errorCodes:e})}),wn.showLightbox()}).catch(()=>{o(new Error(In))})})},actionName:He.API_LAUNCH_LOGIN_BY_SWID,newRelicFlowName:(0,u.hK)(xs)}),displayViewPreview:ca({preConditions:[ea],method:function([e,t={},n={}]){const o=Cn(),r=vn().then(()=>Te.then(o=>o.call("inner","displayViewPreview",{viewID:e,guest:t,workflowData:n})));return Promise.race([r,o]).then(()=>(o.cancel(),wn.showLightbox(),Promise.resolve()))}}),setLogLevel:function(t,n){if("string"!==typeof t||!e[t.toUpperCase()])return void s.warn(on);const o=e[t.toUpperCase()];i(o),Te.then(e=>e.broadcast("config.setLogLevel",o)),n&&o!==e.OFF?O(g,t,null,"/"):n&&o!==e.OFF||I(g,null,"/")}};let qi;const Yi={get:oa},zi={get:(Qi=oa,Xi=tn,"function"===typeof Qi?function(...e){return s.warn(Xi),Qi.apply(this,e)}:Qi)};var Qi,Xi;function Zi(){return new Promise((e,t)=>{ta().then(n=>{if(n)return e();t({errorCategory:yn,errorCodes:mn})})})}function Ji(){return new Promise((e,t)=>{ta().then(n=>{if(!n)return e();t({errorCategory:yn,errorCodes:gn})})})}function ea(){return new Promise((e,t)=>{if(ji())return e();t({errorCategory:yn,errorCodes:hn})})}function ta(){return $e().then(e=>!!e&&!_e(e)).catch(()=>!1)}function na(e){return"string"!==typeof e||!e.length}function oa(e){s.debug("JS SDK get() was called with the following configuration:",e);const t=!!F(),n=(0,u.d9)(e),o=[];if(n&&t)throw new Error(Jt);if(!t){if(!n||!Object.keys(n).length)throw new Error(un);if(!n.clientId||"string"!==typeof n.clientId)throw new Error(cn);if(!n.responderPage)throw new Error(pn);let e="";try{e=new URL(n.responderPage)}catch(e){throw new Error(`${on}: responderPage`)}const t=(0,u.KT)(window.location.hostname),c=(0,u.KT)(e.hostname);t!==c&&(s.warn("responder page domain does not match the top window domain. responder domain:",c),o.push("responderPage")),n.hasOwnProperty("langPref")&&(na(a=n.langPref)||!f.test(a))&&(s.warn("invalid config.langPref passed to get(config) - it is being ignored."),o.push("langPref"),delete n.langPref),n.cssOverride&&("string"!==typeof(i=n.cssOverride)||!i.startsWith("http")&&0!==i.length)&&(s.warn("invalid config.cssOverride passed to get(config) - it is being ignored."),o.push("cssOverride"),delete n.cssOverride),n.hasOwnProperty("experience")&&(na(r=n.experience)||!/^[A-Z0-9.\-_]+.EXP$/.test(r))&&(s.warn("invalid config.experience passed to get(config) - it is being ignored."),o.push("experience"),delete n.experience),h.test(n.clientId)&&(s.warn("passing environment as part of the Client ID is deprecated - it is being ignored."),o.push("clientId"),n.clientId=n.clientId.replace(h,"")),function(e){M=(0,u._A)((0,u.d9)({...x,...e}))}(n),qi=(0,u._A)((0,u.d9)(n)),function(e){let t=(0,u.U2)(e,"optionalConfigs.reporting"),n=(0,u.U2)(e,"experience");t&&!it(t)&&(s.warn("optionalConfigs.reporting does not pass validation, values will be ignored"),t=null),n&&!at(n)&&(s.warn("experience does not pass validation, values will be ignored"),n=null),(t||n)&&(Xe={reporting:t,...n&&{experience:n}})}(qi),n.initialize&&Bi(),o.length&&st({[He.ACTION_NAME]:He.LOG_INVALID_OID_CONFIG,[He.INFO]:o.join(",")})}var r,i,a;window.ONEID_WEB_SDK_MIGRATION&&(Hi.launchSocialRegistration=ca({preConditions:[ea,Ji],method:ia,actionName:He.API_LAUNCH_SOCIAL_REGISTRATION}),Hi.getInlineNewsletters=ra,Hi.setInlineNewsletters=sa);const c=(0,u.d9)(Hi),{clientId:l}=F(),d=(0,u.U2)(F(),"debug.launchOTPEnabled")||!1,p=(0,u.U2)(F(),"debug.displayViewPreviewEnabled")||!1;return s.debug(`Is LaunchOTP Enabled ${d} for client-id ${l}?`),d||delete c.launchOTP,s.debug(`Is LaunchCustomFlow Enabled ${p} for client-id ${l}?`),p||delete c.displayViewPreview,S(eo,e=>s.error(e)),c}function ra(e,t){const n=ot(He.API_GET_INLINE_NEWSLETTERS),o=`promotionId(${e})`;if(tt(t),!ji())return n.send({[He.ERROR_CATEGORY]:yn,[He.ERROR_CODES]:hn,[He.INFO]:o}),ct(eo,hn),Promise.reject({data:{},error_codes:hn});const r=ua(n,o,nn),s=ut().then(t=>t?Nn(t,e)?Promise.resolve():(n.send({[He.ERROR_CATEGORY]:yn,[He.ERROR_CODES]:_n,[He.INFO]:o}),ct(eo,_n),Promise.reject({data:{},error_codes:zs})):(n.send({[He.ERROR_CATEGORY]:yn,[He.ERROR_CODES]:fn,[He.INFO]:o}),ct(eo,fn),Promise.reject({data:{},error_codes:fn}))).then(()=>new Promise(n=>{Li({name:"GET_INLINE_NEWSLETTERS",workflowOptions:bn(t,{promotionId:e}),onComplete:n})})).then(()=>{const e=jt("responsePayload");return e.error_codes&&e.error_codes.length>0?(n.send({[He.ERROR_CATEGORY]:yn,[He.ERROR_CODES]:e.error_codes,[He.INFO]:o}),ct(eo,e.error_codes),e.data={},Promise.reject(e)):Promise.resolve()});return Promise.race([s,r]).then(()=>{r.cancel(),n.send({[He.INFO]:o});const e=jt("responsePayload");return Promise.resolve(e)})}function sa(e,t){const n=ot(He.API_SET_INLINE_NEWSLETTERS);if(tt(t),!ji())return n.send({[He.ERROR_CATEGORY]:yn,[He.ERROR_CODES]:hn}),ct(eo,hn),Promise.reject({data:{},error_codes:hn});if(!e)return n.send({[He.ERROR_CATEGORY]:yn,[He.ERROR_CODES]:ln}),ct(eo,ln),Promise.reject({data:{},error_codes:Ys});const o=ua(n,void 0,{data:{},error_codes:nn}),r=ut().then(t=>t?Nn(t,e.campaignId)?Promise.resolve():(n.send({[He.ERROR_CATEGORY]:yn,[He.ERROR_CODES]:zs}),Promise.reject({data:{},error_codes:zs})):(n.send({[He.ERROR_CATEGORY]:yn,[He.ERROR_CODES]:fn}),ct(eo,fn),Promise.reject({data:{},error_codes:fn}))).then(()=>new Promise(n=>{Li({name:"SET_INLINE_NEWSLETTERS",workflowOptions:bn(t,{buData:e}),onComplete:n})})).then(()=>{const e=jt("responsePayload");return e.error_codes&&e.error_codes.length>0?(n.send({[He.ERROR_CATEGORY]:yn,[He.ERROR_CODES]:e.error_codes}),ct(eo,e.error_codes),Promise.reject(e)):Promise.resolve(e)});return Promise.race([r,o]).then(()=>{o.cancel();const e=jt("responsePayload");return Promise.resolve(e)})}function ia(e){const[t]=e;tt(t);const n=Cn(),o=bn(t),r={name:Ps,workflowOptions:o},s=(0,u.U2)(t,"optionalConfigs.providedProfile");s&&(r.guestChanges={profile:s});const i=vn().then(()=>Te.then(e=>{e.call("inner","runWorkflow",r)}));return Promise.race([i,n]).then(()=>(n.cancel(),wn.showLightbox(),Promise.resolve()))}function aa(e){return(0,e[0])().then(()=>{if(e.shift(),e.length)return aa(e)})}function ca({preConditions:e=[()=>Promise.resolve()],method:t,actionName:n,newRelicFlowName:o,logInfoKey:r="",sendAfterPreconditions:s=!1}){return(...i)=>{const a=ot(n),c={};o&&(c[He.FLOW]=o),r&&(c[He.INFO]=`${r}(${i[0]})`);const l=new Promise((n,o)=>{aa((0,u.d9)(e)).then(()=>{s&&a.send(c),t(i).then(e=>{s||a.send(c),n(e)}).catch(({errorCategory:e,errorCodes:t})=>{s||a.send({[He.ERROR_CATEGORY]:e||yn,[He.ERROR_CODES]:t,...c}),ct(eo,t),o(t)})}).catch(({errorCategory:e,errorCodes:t})=>{a.send({[He.ERROR_CATEGORY]:e,[He.ERROR_CODES]:t,...c}),ct(eo,t),o(t)})});if(window.ONEID_WEB_SDK_MIGRATION){const e=Mi().defer();return l.then(t=>e.resolve(t)).catch(t=>e.reject(t)),e.promise}return l}}function ua(e,t,n){let o;const r=new Promise((r,s)=>{o=setTimeout(()=>{const o={[He.ERROR_CATEGORY]:yn,[He.ERROR_CODES]:nn};t&&(o[He.INFO]=t),e.send(o),s(n)},De)});return r.cancel=()=>(clearTimeout(o),this),r}function la(e){if(!e)return null;const t=localStorage.getItem(e);try{const n=JSON.parse(t);if(!n._expiry)return n;const o=new Date(n._expiry);if(delete n._expiry,o>new Date)return n;localStorage.removeItem(e)}catch(e){return t}}function da({key:e,value:t,expires:n}){const o=JSON.stringify({...t,_expiry:n},function(){const e=new Map;return(t,n)=>n?"object"!==typeof n?n:e.has(n)?void 0:(e.set(n,!0),n):n}());localStorage.setItem(e,o)}function pa(){$t("loggedIn",!0),Ti()}function fa(){$t("loggedIn",!1)}function _a({key:e,value:t,expires:n,secure:o=!1}){O(e,t,T.getCookieDomain(),"/",n,o)}window.ONEID_WEB_SDK_VERSION="4.4.266",window.ONEID_WEB_SDK_MIGRATION=!1,i(e[y(g)]||e.INFO),s.debug("MOUI (outer) initializing..."),Te.then(e=>{e.addHandler("ui.hideLightbox",wn.hideLightbox),e.addHandler("ui.showLightbox",wn.showLightbox),e.addHandler("init.setInitialized",$i),e.addHandler("get.localStorage",la),e.addHandler("set.localStorage",da),e.addHandler("get.cookie",y),e.addHandler("set.cookie",_a),e.addHandler("newRelic.send",e=>{st({...e,...Ye})}),e.addHandler("api.callback",e=>{const{name:t,...n}=e;N(t,n)}),e.addHandler("api.emitEvent",({eventName:e,eventPayload:t,additionalInfo:n})=>ct(e,t,n)),e.addHandler("guest.write",e=>Bn(e,!0)),e.addHandler("guest.read",Vn),e.addHandler("session.loggedIn",pa),e.addHandler("session.loggedOut",fa),e.addHandler("set.s2cookie",Wt)}),window.OneID||(window.OneID=Yi),window.DisneyID||(window.DisneyID=zi),be()})()})();